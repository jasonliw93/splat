<!DOCTYPE html>
<html>
<head>
  <title>splat-min.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../", thisFile = "courses/courses/cscc09f15/liwyanch/a2/app//js/splat-min.js", defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>splat-min.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="cm">/*! splat 2015-12-02 */</span>
<span class="s2">&quot;use strict&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="o">=</span><span class="p">{</span><span class="nx">showNotice</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#notification-panel&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;alert-danger alert-warning alert-success alert-info&quot;</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#notification-panel&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;alert &quot;</span><span class="o">+</span><span class="nx">c</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#notification-panel&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;&lt;strong&gt;&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;&lt;/strong&gt; &quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#notification-panel&quot;</span><span class="p">).</span><span class="nx">stop</span><span class="p">(</span><span class="o">!</span><span class="mi">0</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">().</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">5</span><span class="nx">e3</span><span class="p">)},</span><span class="nx">hideNotice</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#notification-panel&quot;</span><span class="p">).</span><span class="nx">stop</span><span class="p">(</span><span class="o">!</span><span class="mi">0</span><span class="p">,</span><span class="o">!</span><span class="mi">0</span><span class="p">).</span><span class="nx">hide</span><span class="p">()},</span><span class="nx">requestFailed</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">responseText</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)},</span><span class="nx">displayValidationErrors</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span><span class="nx">a</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">addValidationError</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]);</span><span class="k">this</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Error!&quot;</span><span class="p">,</span><span class="s2">&quot;Fix validation errors and try again&quot;</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)},</span><span class="nx">addValidationError</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.form-group&quot;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;input[name=&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;], textarea[name=&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;]&quot;</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">parent</span><span class="p">();</span><span class="nx">c</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;has-error&quot;</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.help-block&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">b</span><span class="p">)},</span><span class="nx">removeValidationError</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.form-group&quot;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;input[name=&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;], textarea[name=&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;]&quot;</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">parent</span><span class="p">();</span><span class="nx">b</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;has-error&quot;</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.help-block&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)},</span><span class="nx">templateHelpers</span><span class="o">:</span><span class="p">{</span><span class="nx">getReviewImage</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">/</span><span class="nx">b</span><span class="o">&gt;=</span><span class="p">.</span><span class="mi">5</span><span class="o">?</span><span class="s2">&quot;/img/fresh_lg.png&quot;</span><span class="o">:</span><span class="s2">&quot;/img/rotten_lg.png&quot;</span><span class="p">},</span><span class="nx">getReviewText</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span><span class="p">(</span><span class="nx">a</span><span class="o">/</span><span class="nx">b</span><span class="o">*</span><span class="mi">100</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;% (&quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">},</span><span class="nx">formatArray</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)},</span><span class="nx">getTrailer</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">b</span><span class="o">?</span><span class="nx">b</span><span class="o">:</span><span class="s2">&quot;movies/&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;/video&quot;</span><span class="p">}},</span><span class="nx">loadTemplates</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">[],</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">?</span><span class="nx">c</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;tpl/&quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot;.html&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">splat</span><span class="p">[</span><span class="nx">b</span><span class="p">].</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">template</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">a</span><span class="p">)(</span><span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">templateHelpers</span><span class="p">))}}))</span><span class="o">:</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot; not found&quot;</span><span class="p">)}),</span><span class="nx">$</span><span class="p">.</span><span class="nx">when</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">c</span><span class="p">).</span><span class="nx">done</span><span class="p">(</span><span class="nx">b</span><span class="p">)}};</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Review</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">idAttribute</span><span class="o">:</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="nx">defaults</span><span class="o">:</span><span class="p">{</span><span class="nx">freshness</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">reviewName</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">reviewAffil</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">reviewText</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">movieId</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Movie</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">idAttribute</span><span class="o">:</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="nx">defaults</span><span class="o">:</span><span class="p">{</span><span class="nx">title</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">released</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">director</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">rating</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">starring</span><span class="o">:</span><span class="p">[],</span><span class="nx">duration</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">,</span><span class="nx">genre</span><span class="o">:</span><span class="p">[],</span><span class="nx">synopsis</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">freshTotal</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">freshVotes</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">trailer</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">poster</span><span class="o">:</span><span class="s2">&quot;img/placeholder.png&quot;</span><span class="p">,</span><span class="nx">dated</span><span class="o">:</span><span class="k">new</span> <span class="nb">Date</span><span class="p">,</span><span class="nx">userId</span><span class="o">:</span><span class="k">void</span> <span class="mi">0</span><span class="p">},</span><span class="nx">validators</span><span class="o">:</span><span class="p">{</span><span class="nx">title</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="sr">/^[a-zA-Z0-9 \,\.\!\?\-\&#39;\*]+$/</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s1">&#39;You must enter a movie title. Only letters-digits-spaces and &quot;,&quot;, &quot;.&quot;, &quot;!&quot;, &quot;?&quot;, &quot;-&quot;, &quot;\&#39;&quot;, &quot;*&quot; allowed&#39;</span><span class="p">}},</span><span class="nx">released</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="sr">/^(19[1-9]\d|20(1[0-6]|0\d))$/</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;You must enter a year between 1910 and 2016&quot;</span><span class="p">}},</span><span class="nx">director</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="sr">/^[a-zA-Z0-9 \,\.\!\?\-\&#39;\*]+$/</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s1">&#39;You must enter a director\&#39;s name. Only letters-digits-spaces and &quot;,&quot;, &quot;.&quot;, &quot;!&quot;, &quot;?&quot;, &quot;-&quot;, &quot;\&#39;&quot;, &quot;*&quot; allowed&#39;</span><span class="p">}},</span><span class="nx">rating</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="sr">/^(G|PG|PG\-13|R|NC\-17|NR)$/</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">b</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;You must enter one of G, PG, PG-13, R, NC-17, NR.&quot;</span><span class="p">}},</span><span class="nx">starring</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="sr">/^[a-zA-Z \-\&#39;]+$/</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s1">&#39;You must enter atleast one actor\&#39;s name. Only letters-spaces and &quot;-&quot;, &quot;\&#39;&quot;&#39;</span><span class="p">};</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span><span class="o">||</span><span class="mi">0</span><span class="o">===</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">return</span> <span class="nx">c</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">||!</span><span class="nx">b</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]))</span><span class="k">return</span> <span class="nx">c</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}},</span><span class="nx">duration</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">&amp;&amp;</span><span class="mi">999</span><span class="o">&gt;=</span><span class="nx">a</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;You must enter a duration between 0 and 999.&quot;</span><span class="p">}},</span><span class="nx">genre</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="sr">/^[a-zA-Z \-\&#39;]+$/</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s1">&#39;You must enter atleast one movie genre. Only letters-spaces and &quot;-&quot;, &quot;\&#39;&quot;&#39;</span><span class="p">};</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">a</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span><span class="o">||</span><span class="mi">0</span><span class="o">===</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span><span class="k">return</span> <span class="nx">c</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">d</span><span class="o">&lt;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">d</span><span class="o">++</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]</span><span class="o">||!</span><span class="nx">b</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">d</span><span class="p">]))</span><span class="k">return</span> <span class="nx">c</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}},</span><span class="nx">synopsis</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="sr">/^[ \w\,\.\!\?\-\&#39;\*]+$/</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s1">&#39;You must enter a synopsis. Only letters-digits-spaces and &quot;,&quot;, &quot;.&quot;, &quot;!&quot;, &quot;?&quot;, &quot;-&quot;, &quot;\&#39;&quot;, &quot;*&quot; allowed. No blank lines.&#39;</span><span class="p">},</span><span class="nx">d</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">),</span><span class="nx">e</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="o">&lt;</span><span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">e</span><span class="o">++</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="nx">e</span><span class="p">]))</span><span class="k">return</span> <span class="nx">c</span><span class="p">;</span><span class="k">return</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}},</span><span class="nx">freshTotal</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;You must enter non-negative integer.&quot;</span><span class="p">}},</span><span class="nx">freshVotes</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;You must enter non-negative integer.&quot;</span><span class="p">}},</span><span class="nx">trailer</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="sr">/^(https?:\/\/[\w-]+(\.[\w-]+)+(:\d+)?(\/\S*)?)$/</span><span class="p">;</span><span class="k">return</span><span class="o">!</span><span class="nx">a</span><span class="o">||</span><span class="nx">b</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;You must enter a valid trailer url&quot;</span><span class="p">}},</span><span class="nx">dated</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">b</span> <span class="k">instanceof</span> <span class="nb">Date</span><span class="o">&amp;&amp;!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;You must enter a valid dated date&quot;</span><span class="p">}}},</span><span class="nx">validateItem</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">a</span><span class="p">](</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}},</span><span class="nx">validateAll</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">{};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">b</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">b</span><span class="p">](</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">b</span><span class="p">));</span><span class="nx">c</span><span class="p">.</span><span class="nx">isValid</span><span class="o">===!</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">message</span><span class="p">)}</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="nx">a</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">User</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">urlRoot</span><span class="o">:</span><span class="s2">&quot;/auth&quot;</span><span class="p">,</span><span class="nx">idAttribute</span><span class="o">:</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="o">=</span><span class="p">{},</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">.</span><span class="nx">username</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;username required&quot;</span><span class="p">}},</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">.</span><span class="nx">email</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;email required&quot;</span><span class="p">}},</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">.</span><span class="nx">password</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;password required&quot;</span><span class="p">}},</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">.</span><span class="nx">password2</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;password required&quot;</span><span class="p">}}},</span><span class="nx">validateItem</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">a</span><span class="p">](</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}},</span><span class="nx">validateAll</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="p">{};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">b</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">)</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">b</span><span class="p">)){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">b</span><span class="p">](</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">b</span><span class="p">));</span><span class="nx">c</span><span class="p">.</span><span class="nx">isValid</span><span class="o">===!</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">message</span><span class="p">)}</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">messages</span><span class="o">:</span><span class="nx">a</span><span class="p">}</span><span class="o">:</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">0</span><span class="p">}}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Reviews</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">url</span><span class="o">=</span><span class="s2">&quot;/movies/&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;/reviews&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">movieId</span><span class="o">=</span><span class="nx">a</span><span class="p">},</span><span class="nx">model</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Review</span><span class="p">});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Movies</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Movie</span><span class="p">,</span><span class="nx">url</span><span class="o">:</span><span class="s2">&quot;/movies&quot;</span><span class="p">});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Users</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">User</span><span class="p">,</span><span class="nx">url</span><span class="o">:</span><span class="s2">&quot;/auth&quot;</span><span class="p">});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">About</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">()),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Details</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">movieFormView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">MovieForm</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">}),</span><span class="k">this</span><span class="p">.</span><span class="nx">moviePosterView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">MoviePoster</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">}),</span><span class="k">this</span><span class="p">.</span><span class="nx">movieFormActionsView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">MovieFormActions</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">})},</span><span class="nx">onClose</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">movieFormView</span><span class="p">.</span><span class="nx">close</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">movieFormActionsView</span><span class="p">.</span><span class="nx">close</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">moviePosterView</span><span class="p">.</span><span class="nx">close</span><span class="p">()},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">()),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#movieposter&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">moviePosterView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#movieform&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">movieFormView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#movieformactions&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">movieFormActionsView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Header</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="nx">Backbone</span><span class="p">,</span><span class="s2">&quot;signedUp&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">signedUp</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="nx">Backbone</span><span class="p">,</span><span class="s2">&quot;signedIn&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">signedIn</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="nx">Backbone</span><span class="p">,</span><span class="s2">&quot;signedOut&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">signedOut</span><span class="p">)},</span><span class="nx">events</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;change #orderForm&quot;</span><span class="o">:</span><span class="s2">&quot;sortOrder&quot;</span><span class="p">,</span><span class="s2">&quot;mouseenter #orderdrop.active&quot;</span><span class="o">:</span><span class="s2">&quot;showOrderForm&quot;</span><span class="p">,</span><span class="s2">&quot;mouseleave #orderdrop.active&quot;</span><span class="o">:</span><span class="s2">&quot;hideOrderForm&quot;</span><span class="p">,</span><span class="s2">&quot;click #ordering&quot;</span><span class="o">:</span><span class="s2">&quot;showOrderForm&quot;</span><span class="p">},</span><span class="nx">authenticatedUI</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#greet&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">username</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signoutUser&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;&lt;b&gt;&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">username</span><span class="o">+</span><span class="s2">&quot;&lt;/b&gt;&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.btn.signinSubmit&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span><span class="s2">&quot;none&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.btn.signoutSubmit&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span><span class="s2">&quot;block&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#addMovie&quot;</span><span class="p">).</span><span class="nx">show</span><span class="p">()},</span><span class="nx">signedUp</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signupdrop&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.signinput&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span><span class="s2">&quot;none&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signupForm&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">reset</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">authenticatedUI</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">signedIn</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signindrop&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;[class*=&quot;signin&quot;]&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span><span class="s2">&quot;none&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signinForm&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">reset</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">authenticatedUI</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">signedOut</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#greet&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;Sign In&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signoutUser&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.btn.signoutSubmit&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span><span class="s2">&quot;none&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.btn.signinSubmit&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span><span class="s2">&quot;block&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;[class*=&quot;signin&quot;]&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span><span class="s2">&quot;block&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signindrop&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#addMovie&quot;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()},</span><span class="nx">showOrderForm</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#orderdrop&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">)},</span><span class="nx">hideOrderForm</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#orderdrop&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">)},</span><span class="nx">sortOrder</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">(),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">order</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;orderevent&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">hideOrderForm</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">());</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">User</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">signupform</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Signup</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="nx">a</span><span class="p">}),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signupDiv&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">signupform</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">signinform</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Signin</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="nx">a</span><span class="p">}),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signinDiv&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">signinform</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">auth</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">signedIn</span><span class="p">({</span><span class="nx">userid</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">userid</span><span class="p">,</span><span class="nx">username</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">username</span><span class="p">}),</span><span class="k">this</span><span class="p">},</span><span class="nx">selectMenuItem</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.nav li&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;active&quot;</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.nav a:contains(&quot;</span><span class="o">+</span><span class="nx">a</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;active&quot;</span><span class="p">)}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Home</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">()),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">MovieThumb</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">MovieForm</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">events</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;change .form-group input[type=text]&quot;</span><span class="o">:</span><span class="s2">&quot;change&quot;</span><span class="p">,</span><span class="s2">&quot;change .form-group textarea&quot;</span><span class="o">:</span><span class="s2">&quot;change&quot;</span><span class="p">,</span><span class="s2">&quot;change #selectVideo&quot;</span><span class="o">:</span><span class="s2">&quot;uploadVideo&quot;</span><span class="p">},</span><span class="nx">uploadVideo</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">size</span><span class="o">&gt;</span><span class="mi">5242880</span><span class="p">)</span><span class="k">return</span> <span class="k">void</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Warning&quot;</span><span class="p">,</span><span class="s2">&quot;Video is too large!&quot;</span><span class="p">,</span><span class="s2">&quot;alert-warning&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="s2">&quot;video/mp4&quot;</span><span class="o">!==</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">type</span><span class="p">)</span><span class="k">return</span> <span class="k">void</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Warning&quot;</span><span class="p">,</span><span class="s2">&quot;Video must be an mp4!&quot;</span><span class="p">,</span><span class="s2">&quot;alert-warning&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="k">return</span> <span class="k">void</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Warning&quot;</span><span class="p">,</span><span class="s2">&quot;Please save the movie first&quot;</span><span class="p">,</span><span class="s2">&quot;alert-warning&quot;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="k">new</span> <span class="nx">FormData</span><span class="p">;</span><span class="nx">c</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;video&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span><span class="nx">url</span><span class="o">:</span><span class="s2">&quot;movies/&quot;</span><span class="o">+</span><span class="nx">b</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">id</span><span class="o">+</span><span class="s2">&quot;/video&quot;</span><span class="p">,</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span><span class="nx">data</span><span class="o">:</span><span class="nx">c</span><span class="p">,</span><span class="nx">processData</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">contentType</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">beforeSend</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">&quot;X-CSRF-Token&quot;</span><span class="p">,</span><span class="nx">splat</span><span class="p">.</span><span class="nx">token</span><span class="p">)},</span><span class="nx">xhr</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">$</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">xhr</span><span class="p">();</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">upload</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input[name=trailer]&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;hidden&quot;</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.progress&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;hidden&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">upload</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;progress&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">loaded</span><span class="o">/</span><span class="nx">a</span><span class="p">.</span><span class="nx">total</span><span class="o">*</span><span class="mi">100</span><span class="p">;</span><span class="nx">b</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.progress-bar&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span><span class="nx">c</span><span class="o">+</span><span class="s2">&quot;%&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;aria-valuenow&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">)})),</span><span class="nx">a</span><span class="p">}}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.progress&quot;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;hidden&quot;</span><span class="p">),</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input[name=trailer]&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;hidden&quot;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">escape</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">origin</span><span class="o">+</span><span class="nx">a</span><span class="p">);</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;input[name=trailer]&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">trailer</span><span class="o">:</span><span class="nx">c</span><span class="p">}),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Note!&quot;</span><span class="p">,</span><span class="s2">&quot;Video has been uploaded to server&quot;</span><span class="p">,</span><span class="s2">&quot;alert-info&quot;</span><span class="p">)}).</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">requestFailed</span><span class="p">(</span><span class="nx">a</span><span class="p">)})}},</span><span class="nx">change</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">{},</span><span class="nx">c</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">escape</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span><span class="s2">&quot;starring&quot;</span><span class="o">===</span><span class="nx">c</span><span class="o">||</span><span class="s2">&quot;genre&quot;</span><span class="o">===</span><span class="nx">c</span><span class="o">?</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">call</span><span class="p">,</span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">)</span><span class="o">:</span><span class="s2">&quot;duration&quot;</span><span class="o">===</span><span class="nx">c</span><span class="o">?</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="nb">Number</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span><span class="o">:</span><span class="nx">b</span><span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="o">=</span><span class="nx">d</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Note!&quot;</span><span class="p">,</span><span class="s1">&#39;Movie Attribute updated, to make changes permanent, click &quot;Save Changes&quot; button&#39;</span><span class="p">,</span><span class="s2">&quot;alert-info&quot;</span><span class="p">);</span><span class="kd">var</span> <span class="nx">e</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">validateItem</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="nx">e</span><span class="p">.</span><span class="nx">isValid</span><span class="o">?</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">removeValidationError</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">addValidationError</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">)},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">())),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">MovieFormActions</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">isNew</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">isNew</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">,</span><span class="s2">&quot;change:freshTotal&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">)},</span><span class="nx">events</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;click #moviesave&quot;</span><span class="o">:</span><span class="s2">&quot;beforeSave&quot;</span><span class="p">,</span><span class="s2">&quot;click #moviedel&quot;</span><span class="o">:</span><span class="s2">&quot;destroy&quot;</span><span class="p">},</span><span class="nx">beforeSave</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">validateAll</span><span class="p">();</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">isValid</span><span class="o">===!</span><span class="mi">1</span><span class="o">?</span><span class="p">(</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">displayValidationErrors</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">messages</span><span class="p">),</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="k">this</span><span class="p">.</span><span class="nx">save</span><span class="p">()},</span><span class="nx">save</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">,{</span><span class="nx">wait</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#detailsImage&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span><span class="nx">c</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;poster&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">isNew</span><span class="o">&amp;&amp;</span><span class="nx">splat</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="s2">&quot;#movies/&quot;</span><span class="o">+</span><span class="nx">a</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">id</span><span class="p">,{</span><span class="nx">replace</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">trigger</span><span class="o">:!</span><span class="mi">1</span><span class="p">}),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Success!&quot;</span><span class="p">,</span><span class="s2">&quot;Movie saved&quot;</span><span class="p">,</span><span class="s2">&quot;alert-success&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">render</span><span class="p">()},</span><span class="nx">error</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">requestFailed</span><span class="p">(</span><span class="nx">b</span><span class="p">)}})},</span><span class="nx">destroy</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">destroy</span><span class="p">({</span><span class="nx">wait</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="s2">&quot;#movies&quot;</span><span class="p">,{</span><span class="nx">replace</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">trigger</span><span class="o">:!</span><span class="mi">0</span><span class="p">}),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">,</span><span class="s2">&quot;Movie deleted&quot;</span><span class="p">,</span><span class="s2">&quot;alert-success&quot;</span><span class="p">)},</span><span class="nx">error</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">requestFailed</span><span class="p">(</span><span class="nx">b</span><span class="p">)}})},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">())),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">MoviePoster</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){},</span><span class="nx">events</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;change #selectImage&quot;</span><span class="o">:</span><span class="s2">&quot;selectImage&quot;</span><span class="p">,</span><span class="s2">&quot;dragover #detailsImage&quot;</span><span class="o">:</span><span class="s2">&quot;dragoverHandler&quot;</span><span class="p">,</span><span class="s2">&quot;drop #detailsImage&quot;</span><span class="o">:</span><span class="s2">&quot;dropHandler&quot;</span><span class="p">},</span><span class="nx">selectImage</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">pictureFile</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">0</span><span class="o">===</span><span class="k">this</span><span class="p">.</span><span class="nx">pictureFile</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;image/&quot;</span><span class="p">)</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">imageRead</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pictureFile</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">pictureFile</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span><span class="s2">&quot;Please select a valid image file&quot;</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)},</span><span class="nx">imageRead</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">d</span><span class="o">=</span><span class="k">new</span> <span class="nx">FileReader</span><span class="p">;</span><span class="nx">d</span><span class="p">.</span><span class="nx">onload</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">c</span><span class="p">.</span><span class="nx">resize</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="s2">&quot;0.9&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">c</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;poster&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">);</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#detailsImage&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span><span class="nx">b</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">a</span><span class="p">,</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Note!&quot;</span><span class="p">,</span><span class="s1">&#39;Movie Poster updated, to make changes permanent, click &quot;Save Changes&quot; button&#39;</span><span class="p">,</span><span class="s2">&quot;alert-info&quot;</span><span class="p">)})},</span><span class="nx">d</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">a</span><span class="p">)},</span><span class="nx">dragoverHandler</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">(),</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">(),</span><span class="nx">a</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">dropEffect</span><span class="o">=</span><span class="s2">&quot;copy&quot;</span><span class="p">},</span><span class="nx">dropHandler</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">(),</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">pictureFile</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">0</span><span class="o">===</span><span class="k">this</span><span class="p">.</span><span class="nx">pictureFile</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;image/&quot;</span><span class="p">)</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">imageRead</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">pictureFile</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">pictureFile</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span><span class="s2">&quot;Please select a valid image file&quot;</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)},</span><span class="nx">resize</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="o">||</span><span class="p">.</span><span class="mi">95</span><span class="p">,</span><span class="nx">e</span><span class="o">=</span><span class="k">new</span> <span class="nx">Image</span><span class="p">,</span><span class="nx">f</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="mi">450</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">e</span><span class="p">.</span><span class="nx">onload</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">e</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="o">&gt;</span><span class="nx">g</span><span class="o">/</span><span class="nx">f</span><span class="o">?</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="o">*</span><span class="nx">g</span><span class="o">/</span><span class="nx">e</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">g</span><span class="p">,</span><span class="nx">i</span><span class="o">=</span><span class="p">(</span><span class="nx">f</span><span class="o">-</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">e</span><span class="p">.</span><span class="nx">width</span><span class="o">*</span><span class="nx">f</span><span class="o">/</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">f</span><span class="p">,</span><span class="nx">h</span><span class="o">=</span><span class="p">(</span><span class="nx">g</span><span class="o">-</span><span class="nx">e</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;canvas&quot;</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">width</span><span class="o">=</span><span class="nx">g</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">height</span><span class="o">=</span><span class="nx">f</span><span class="p">;</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">h</span><span class="p">,</span><span class="nx">i</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span><span class="nx">e</span><span class="p">.</span><span class="nx">height</span><span class="p">),</span><span class="nx">d</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">toDataURL</span><span class="p">(</span><span class="s2">&quot;image/jpeg&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">))},</span><span class="nx">e</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">a</span><span class="p">},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">())),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">MoviesView</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">events</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;click .video-container&quot;</span><span class="o">:</span><span class="s2">&quot;playVideo&quot;</span><span class="p">},</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">movieThumbView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">MovieThumb</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="nx">Backbone</span><span class="p">,</span><span class="s2">&quot;orderevent&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">,</span><span class="s2">&quot;sync&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">sort</span><span class="p">()},</span><span class="nx">playVideo</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">play</span><span class="p">()},</span><span class="nx">moviesTemplate</span><span class="o">:</span><span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">([</span><span class="s2">&quot;&lt;% movies.each(function(movie) { %&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;%= movieTemplate(movie.toJSON()) %&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;% }); %&gt;&quot;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)),</span><span class="nx">sort</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">comparator</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">splat</span><span class="p">.</span><span class="nx">order</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()},</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">sort</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">()},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">moviesTemplate</span><span class="p">({</span><span class="nx">movies</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">,</span><span class="nx">movieTemplate</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">movieThumbView</span><span class="p">.</span><span class="nx">template</span><span class="p">})),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.trailer source&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span><span class="s2">&quot;Video not found&quot;</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)}),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;[data-toggle=&quot;tooltip&quot;]&#39;</span><span class="p">).</span><span class="nx">tooltip</span><span class="p">(),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">ReviewThumb</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Reviewer</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">events</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;click #reviewsave&quot;</span><span class="o">:</span><span class="s2">&quot;save&quot;</span><span class="p">,</span><span class="s2">&quot;change .form-group input&quot;</span><span class="o">:</span><span class="s2">&quot;change&quot;</span><span class="p">,</span><span class="s2">&quot;change .form-group textarea&quot;</span><span class="o">:</span><span class="s2">&quot;change&quot;</span><span class="p">},</span><span class="nx">change</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">{};</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">escape</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">b</span><span class="p">)},</span><span class="nx">save</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">review</span><span class="p">,{</span><span class="nx">wait</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">,</span><span class="s2">&quot;review has been saved&quot;</span><span class="p">,</span><span class="s2">&quot;alert-success&quot;</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">render</span><span class="p">()},</span><span class="nx">error</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">requestFailed</span><span class="p">(</span><span class="nx">b</span><span class="p">)}})},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">review</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Review</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">review</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">())),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">ReviewsView</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">reviewerView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Reviewer</span><span class="p">({</span><span class="nx">collection</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">}),</span><span class="k">this</span><span class="p">.</span><span class="nx">reviewThumbsView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">ReviewThumbs</span><span class="p">({</span><span class="nx">collection</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">}),</span><span class="k">this</span><span class="p">.</span><span class="nx">listenTo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">,</span><span class="s2">&quot;sync&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">reviewThumbsView</span><span class="p">.</span><span class="nx">render</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">showScore</span><span class="p">()})},</span><span class="nx">showScore</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">){</span><span class="nx">a</span><span class="o">+=</span><span class="nx">b</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;freshness&quot;</span><span class="p">)});</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">b</span><span class="o">?</span><span class="p">(</span><span class="nx">a</span><span class="o">/</span><span class="nx">b</span><span class="o">&gt;=</span><span class="p">.</span><span class="mi">5</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#freshnessimg&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">,</span><span class="s2">&quot;/img/fresh.gif&quot;</span><span class="p">)</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#freshnessimg&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">,</span><span class="s2">&quot;/img/rotten.gif&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#freshness&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">((</span><span class="nx">a</span><span class="o">/</span><span class="nx">b</span><span class="o">*</span><span class="mi">100</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;% (&quot;</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">))</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#freshness&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;… no reviews yet&quot;</span><span class="p">)},</span><span class="nx">onClose</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">reviewerView</span><span class="p">.</span><span class="nx">close</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">reviewThumbsView</span><span class="p">.</span><span class="nx">close</span><span class="p">()},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">()),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#reviewer&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">reviewerView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#reviewthumbs&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">reviewThumbsView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">showScore</span><span class="p">(),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">ReviewThumbs</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">reviewThumbView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">ReviewThumb</span><span class="p">},</span><span class="nx">reviewsTemplate</span><span class="o">:</span><span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">([</span><span class="s2">&quot;&lt;% reviews.each(function(review) { %&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;%= reviewTemplate(review.toJSON()) %&gt;&quot;</span><span class="p">,</span><span class="s2">&quot;&lt;% }); %&gt;&quot;</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)),</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">reviewsTemplate</span><span class="p">({</span><span class="nx">reviews</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">collection</span><span class="p">,</span><span class="nx">reviewTemplate</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">reviewThumbView</span><span class="p">.</span><span class="nx">template</span><span class="p">})),</span><span class="k">this</span><span class="p">}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Signin</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">el</span><span class="o">:</span><span class="s1">&#39;&lt;form id=&quot;signinForm&quot; accept-charset=&quot;UTF-8&quot;&gt;&#39;</span><span class="p">,</span><span class="nx">events</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;change .signinput&quot;</span><span class="o">:</span><span class="s2">&quot;change&quot;</span><span class="p">,</span><span class="s2">&quot;click .signinSubmit&quot;</span><span class="o">:</span><span class="s2">&quot;signin&quot;</span><span class="p">,</span><span class="s2">&quot;click .signoutSubmit&quot;</span><span class="o">:</span><span class="s2">&quot;signout&quot;</span><span class="p">},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">())),</span><span class="k">this</span><span class="p">},</span><span class="nx">change</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hideNotice</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="p">{};</span><span class="nx">b</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">validateItem</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">isValid</span><span class="o">?</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">removeValidationError</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">addValidationError</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">message</span><span class="p">)},</span><span class="nx">signin</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">validateItem</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">isValid</span><span class="o">?</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">removeValidationError</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">addValidationError</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span><span class="nx">c</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">validateItem</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">);</span><span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">isValid</span><span class="o">?</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">removeValidationError</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">)</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">addValidationError</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">message</span><span class="p">),</span><span class="nx">c</span><span class="p">.</span><span class="nx">isValid</span><span class="o">&amp;&amp;</span><span class="nx">d</span><span class="p">.</span><span class="nx">isValid</span><span class="o">?</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">login</span><span class="o">:</span><span class="mi">1</span><span class="p">}),</span><span class="k">void</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kc">null</span><span class="p">,{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;put&quot;</span><span class="p">,</span><span class="nx">wait</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">error</span><span class="o">?</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Signin Failed&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">error</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">splat</span><span class="p">.</span><span class="nx">userid</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">userid</span><span class="p">,</span><span class="nx">splat</span><span class="p">.</span><span class="nx">username</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Signin Successful!&quot;</span><span class="p">,</span><span class="s2">&quot;Welcome back &quot;</span><span class="o">+</span><span class="nx">splat</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="s2">&quot;alert-success&quot;</span><span class="p">),</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;signedIn&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">))},</span><span class="nx">error</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">responseText</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)}}))</span><span class="o">:!</span><span class="mi">1</span><span class="p">},</span><span class="nx">signout</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">(),</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#logoutdrop&quot;</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">login</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">username</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="nx">password</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">}),</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kc">null</span><span class="p">,{</span><span class="nx">type</span><span class="o">:</span><span class="s2">&quot;put&quot;</span><span class="p">,</span><span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Signout Successful!&quot;</span><span class="p">,</span><span class="s2">&quot;Please Come Back Soon&quot;</span><span class="p">,</span><span class="s2">&quot;alert-success&quot;</span><span class="p">),</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;signedOut&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">)},</span><span class="nx">error</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">responseText</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)}})}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">Signup</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">el</span><span class="o">:</span><span class="s1">&#39;&lt;form id=&quot;signupForm&quot; accept-charset=&quot;UTF-8&quot;&gt;&#39;</span><span class="p">,</span><span class="nx">events</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;change .signup&quot;</span><span class="o">:</span><span class="s2">&quot;change&quot;</span><span class="p">,</span><span class="s2">&quot;click .signupSubmit&quot;</span><span class="o">:</span><span class="s2">&quot;signup&quot;</span><span class="p">},</span><span class="nx">render</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">())),</span><span class="k">this</span><span class="p">},</span><span class="nx">change</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">hideNotice</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">User</span><span class="p">);</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">{};</span><span class="nx">c</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span><span class="o">=</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span><span class="kd">var</span> <span class="nx">d</span><span class="p">;</span><span class="s2">&quot;password&quot;</span><span class="o">===</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="o">||</span><span class="s2">&quot;password2&quot;</span><span class="o">===</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signup_password&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span><span class="o">!==</span><span class="nx">b</span><span class="p">.</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#signup_password2&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span><span class="o">?</span><span class="nx">d</span><span class="o">=</span><span class="p">{</span><span class="nx">isValid</span><span class="o">:!</span><span class="mi">1</span><span class="p">,</span><span class="nx">message</span><span class="o">:</span><span class="s2">&quot;Password values must match&quot;</span><span class="p">}</span><span class="o">:</span><span class="p">(</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">validateItem</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">removeValidationError</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">removeValidationError</span><span class="p">(</span><span class="s2">&quot;password2&quot;</span><span class="p">))</span><span class="o">:</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">validateItem</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">),</span><span class="nx">d</span><span class="p">.</span><span class="nx">isValid</span><span class="o">?</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">removeValidationError</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="o">:</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">addValidationError</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span><span class="nx">d</span><span class="p">.</span><span class="nx">message</span><span class="p">)},</span><span class="nx">signup</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">,</span><span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">validateAll</span><span class="p">();</span><span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">isValid</span><span class="o">===!</span><span class="mi">1</span><span class="o">?</span><span class="p">(</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">displayValidationErrors</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">messages</span><span class="p">),</span><span class="o">!</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="k">void</span> <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="kc">null</span><span class="p">,{</span><span class="nx">wait</span><span class="o">:!</span><span class="mi">0</span><span class="p">,</span><span class="nx">success</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">b</span><span class="p">.</span><span class="nx">error</span><span class="o">?</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Signup Failed&quot;</span><span class="p">,</span><span class="s2">&quot;Failed to create account&quot;</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">splat</span><span class="p">.</span><span class="nx">userid</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">userid</span><span class="p">,</span><span class="nx">splat</span><span class="p">.</span><span class="nx">username</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Signup Successful!&quot;</span><span class="p">,</span><span class="s2">&quot;Welcome &quot;</span><span class="o">+</span><span class="nx">splat</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span><span class="s2">&quot;alert-success&quot;</span><span class="p">),</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;signedUp&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">))},</span><span class="nx">error</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">showNotice</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">responseText</span><span class="p">,</span><span class="s2">&quot;alert-danger&quot;</span><span class="p">)}})}});</span><span class="kd">var</span> <span class="nx">splat</span><span class="o">=</span><span class="nx">splat</span><span class="o">||</span><span class="p">{};</span><span class="nx">splat</span><span class="p">.</span><span class="nx">AppRouter</span><span class="o">=</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Router</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nx">routes</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;&quot;</span><span class="o">:</span><span class="s2">&quot;home&quot;</span><span class="p">,</span><span class="nx">about</span><span class="o">:</span><span class="s2">&quot;about&quot;</span><span class="p">,</span><span class="nx">movies</span><span class="o">:</span><span class="s2">&quot;browse&quot;</span><span class="p">,</span><span class="s2">&quot;movies/add&quot;</span><span class="o">:</span><span class="s2">&quot;addHandler&quot;</span><span class="p">,</span><span class="s2">&quot;movies/:id&quot;</span><span class="o">:</span><span class="s2">&quot;editHandler&quot;</span><span class="p">,</span><span class="s2">&quot;movies/:id/reviews&quot;</span><span class="o">:</span><span class="s2">&quot;reviews&quot;</span><span class="p">,</span><span class="s2">&quot;*default&quot;</span><span class="o">:</span><span class="s2">&quot;home&quot;</span><span class="p">},</span><span class="nx">initialize</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">movies</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Movies</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">moviesFetch</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">movies</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">order</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">;</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">new</span> <span class="nx">EventSource</span><span class="p">(</span><span class="s2">&quot;/events&quot;</span><span class="p">),</span><span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">onmessage</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span><span class="s2">&quot;movie&quot;</span><span class="o">===</span><span class="nx">c</span><span class="p">.</span><span class="nx">model</span><span class="o">?</span><span class="nx">b</span><span class="p">.</span><span class="nx">moviesFetch</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">movies</span><span class="p">.</span><span class="nx">fetch</span><span class="p">()</span><span class="o">:</span><span class="s2">&quot;review&quot;</span><span class="o">===</span><span class="nx">c</span><span class="p">.</span><span class="nx">model</span><span class="o">?</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">moviesFetch</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">movies</span><span class="p">.</span><span class="nx">fetch</span><span class="p">(),</span><span class="nx">b</span><span class="p">.</span><span class="nx">moviesFetch</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">movies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">movieId</span><span class="p">);</span><span class="nx">a</span><span class="p">.</span><span class="nx">reviews</span><span class="o">&amp;&amp;</span><span class="nx">a</span><span class="p">.</span><span class="nx">reviews</span><span class="p">.</span><span class="nx">fetch</span><span class="p">()}).</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">requestFailed</span><span class="p">(</span><span class="nx">b</span><span class="p">)}))</span><span class="o">:</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">)},</span><span class="k">this</span><span class="p">.</span><span class="nx">headerView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Header</span><span class="p">,</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.header&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">)},</span><span class="nx">showView</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">currentView</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">currentView</span><span class="p">.</span><span class="nx">close</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">currentView</span><span class="o">=</span><span class="nx">b</span><span class="p">,</span><span class="nx">$</span><span class="p">(</span><span class="nx">a</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span><span class="p">).</span><span class="nx">stop</span><span class="p">().</span><span class="nx">hide</span><span class="p">().</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">500</span><span class="p">)},</span><span class="nx">home</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">homeView</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">homeView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Home</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">showView</span><span class="p">(</span><span class="s2">&quot;#content&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">homeView</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">selectMenuItem</span><span class="p">(</span><span class="s2">&quot;Splat!&quot;</span><span class="p">)},</span><span class="nx">about</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">aboutView</span><span class="o">||</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">aboutView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">About</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">showView</span><span class="p">(</span><span class="s2">&quot;#content&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">aboutView</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">selectMenuItem</span><span class="p">(</span><span class="s2">&quot;About&quot;</span><span class="p">)},</span><span class="nx">browse</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">moviesFetch</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">movies</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">moviesFetch</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">a</span><span class="p">.</span><span class="nx">moviesView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">MoviesView</span><span class="p">({</span><span class="nx">collection</span><span class="o">:</span><span class="nx">a</span><span class="p">.</span><span class="nx">movies</span><span class="p">}),</span><span class="nx">a</span><span class="p">.</span><span class="nx">showView</span><span class="p">(</span><span class="s2">&quot;#content&quot;</span><span class="p">,</span><span class="nx">a</span><span class="p">.</span><span class="nx">moviesView</span><span class="p">),</span><span class="nx">a</span><span class="p">.</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">selectMenuItem</span><span class="p">(</span><span class="s2">&quot;Browse Movies&quot;</span><span class="p">)}).</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">requestFailed</span><span class="p">(</span><span class="nx">b</span><span class="p">)})},</span><span class="nx">addHandler</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">a</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Movie</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">collection</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">movies</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">detailsView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Details</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="nx">a</span><span class="p">}),</span><span class="k">this</span><span class="p">.</span><span class="nx">showView</span><span class="p">(</span><span class="s2">&quot;#content&quot;</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">detailsView</span><span class="p">),</span><span class="k">this</span><span class="p">.</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">selectMenuItem</span><span class="p">(</span><span class="s2">&quot;Add Movie&quot;</span><span class="p">)},</span><span class="nx">editHandler</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">moviesFetch</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">movies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="nx">b</span><span class="p">.</span><span class="nx">detailsView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Details</span><span class="p">({</span><span class="nx">model</span><span class="o">:</span><span class="nx">c</span><span class="p">}),</span><span class="nx">b</span><span class="p">.</span><span class="nx">showView</span><span class="p">(</span><span class="s2">&quot;#content&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">detailsView</span><span class="p">),</span><span class="nx">b</span><span class="p">.</span><span class="nx">headerView</span><span class="p">.</span><span class="nx">selectMenuItem</span><span class="p">(</span><span class="s2">&quot;Add Movie&quot;</span><span class="p">)}).</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">requestFailed</span><span class="p">(</span><span class="nx">b</span><span class="p">)})},</span><span class="nx">reviews</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="kd">var</span> <span class="nx">b</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">moviesFetch</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nx">b</span><span class="p">.</span><span class="nx">movies</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span><span class="nx">c</span><span class="p">.</span><span class="nx">reviews</span><span class="o">||</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">reviews</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">Reviews</span><span class="p">(</span><span class="nx">a</span><span class="p">));</span><span class="kd">var</span> <span class="nx">d</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">reviews</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span><span class="nx">d</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">b</span><span class="p">.</span><span class="nx">reviewsView</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">ReviewsView</span><span class="p">({</span><span class="nx">collection</span><span class="o">:</span><span class="nx">c</span><span class="p">.</span><span class="nx">reviews</span><span class="p">}),</span><span class="nx">b</span><span class="p">.</span><span class="nx">showView</span><span class="p">(</span><span class="s2">&quot;#content&quot;</span><span class="p">,</span><span class="nx">b</span><span class="p">.</span><span class="nx">reviewsView</span><span class="p">)}).</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">requestFailed</span><span class="p">(</span><span class="nx">b</span><span class="p">)})}).</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">requestFailed</span><span class="p">(</span><span class="nx">b</span><span class="p">)})}}),</span><span class="nx">splat</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">loadTemplates</span><span class="p">([</span><span class="s2">&quot;Home&quot;</span><span class="p">,</span><span class="s2">&quot;Header&quot;</span><span class="p">,</span><span class="s2">&quot;About&quot;</span><span class="p">,</span><span class="s2">&quot;Details&quot;</span><span class="p">,</span><span class="s2">&quot;MovieThumb&quot;</span><span class="p">,</span><span class="s2">&quot;MovieForm&quot;</span><span class="p">,</span><span class="s2">&quot;MovieFormActions&quot;</span><span class="p">,</span><span class="s2">&quot;MoviePoster&quot;</span><span class="p">,</span><span class="s2">&quot;ReviewsView&quot;</span><span class="p">,</span><span class="s2">&quot;Reviewer&quot;</span><span class="p">,</span><span class="s2">&quot;ReviewThumb&quot;</span><span class="p">,</span><span class="s2">&quot;Signup&quot;</span><span class="p">,</span><span class="s2">&quot;Signin&quot;</span><span class="p">],</span><span class="kd">function</span><span class="p">(){</span><span class="nx">splat</span><span class="p">.</span><span class="nx">app</span><span class="o">=</span><span class="k">new</span> <span class="nx">splat</span><span class="p">.</span><span class="nx">AppRouter</span><span class="p">,</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">start</span><span class="p">()}),</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">close</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">onClose</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">onClose</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">unbind</span><span class="p">()},</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">ajax</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">$</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">$</span><span class="p">,{</span><span class="nx">beforeSend</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="s2">&quot;X-CSRF-Token&quot;</span><span class="p">,</span><span class="nx">splat</span><span class="p">.</span><span class="nx">token</span><span class="p">)}}),</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">Backbone</span><span class="p">.</span><span class="nx">$</span><span class="p">,</span><span class="nx">arguments</span><span class="p">)};</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
