<!DOCTYPE html>
<html>
<head>
  <title>jquery_1.11.3.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "courses/courses/cscc09f15/liwyanch//js/lib/jquery_1.11.3.js", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h2">
        <a href="#support%20tests">Support tests</a>
      </div>
      <div class="heading h2">
        <a href="#attributes">Attributes</a>
      </div>
      <div class="heading h2">
        <a href="#getelement(s)by*">getElement(s)By*</a>
      </div>
      <div class="heading h2">
        <a href="#qsa%2Fmatchesselector">QSA/matchesSelector</a>
      </div>
      <div class="heading h2">
        <a href="#contains">Contains</a>
      </div>
      <div class="heading h2">
        <a href="#sorting">Sorting</a>
      </div>
      <div class="heading h1">
        <a href="#11217%20-%20webkit%20loses%20check%20when%20the%20name%20is%20after%20the%20checked%20attribute">11217 - WebKit loses check when the name is after the checked attribute</a>
      </div>
      <div class="heading h1">
        <a href="#8545%2C%20%237054%2C%20preventing%20memory%20leaks%20for%20custom%20events%20in%20ie6-8">8545, #7054, preventing memory leaks for custom events in IE6-8</a>
      </div>
      <div class="heading h1">
        <a href="#4087%20-%20if%20origin%20and%20destination%20elements%20are%20the%20same%2C%20and%20this%20is">4087 - If origin and destination elements are the same, and this is</a>
      </div>
      <div class="heading h1">
        <a href="#7653%2C%20%238125%2C%20%238152%3A%20local%20protocol%20detection">7653, #8125, #8152: local protocol detection</a>
      </div>
      <div class="heading h1">
        <a href="#8138%2C%20ie%20may%20throw%20an%20exception%20when%20accessing">8138, IE may throw an exception when accessing</a>
      </div>
      <div class="heading h1">
        <a href="#9682%3A%20remove%20data%20so%20that%20it's%20not%20used%20in%20an%20eventual%20retry">9682: remove data so that it's not used in an eventual retry</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>jquery_1.11.3.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>!
jQuery JavaScript Library v1.11.3
<a href='http://jquery.com/'>http://jquery.com/</a></p>
  </div>
  <div class="body"><p>Includes Sizzle.js
<a href='http://sizzlejs.com/'>http://sizzlejs.com/</a></p>

<p>Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
Released under the MIT license
<a href='http://jquery.org/license'>http://jquery.org/license</a></p>

<p>Date: 2015-04-28T16:19Z</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">global</span><span class="p">,</span> <span class="nx">factory</span> <span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">module</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2">&#182;</a>
</div>
<p>For CommonJS and CommonJS-like environments where a proper window is present,
execute the factory and get jQuery
For environments that do not inherently posses a window with a document
(such as Node.js), expose a jQuery-making factory as module.exports
This accentuates the need for the creation of a real window
e.g. var jQuery = require("jquery")(window);
See ticket #14549 for more info</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nb">document</span> <span class="o">?</span>
      <span class="nx">factory</span><span class="p">(</span> <span class="nx">global</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">:</span>
      <span class="kd">function</span><span class="p">(</span> <span class="nx">w</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">w</span><span class="p">.</span><span class="nb">document</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="s2">&quot;jQuery requires a window with a document&quot;</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">factory</span><span class="p">(</span> <span class="nx">w</span> <span class="p">);</span>
      <span class="p">};</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">factory</span><span class="p">(</span> <span class="nx">global</span> <span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<p>Pass this if window is not defined yet</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="p">}(</span><span class="k">typeof</span> <span class="nb">window</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">?</span> <span class="nb">window</span> <span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nb">window</span><span class="p">,</span> <span class="nx">noGlobal</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4">&#182;</a>
</div>
<p>Can't do this because several apps including ASP.NET trace
the stack via arguments.caller.callee and Firefox dies if
you try to trace through "use strict" call chains. (#13335)
Support: Firefox 18+</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">deletedIds</span> <span class="o">=</span> <span class="p">[];</span>

<span class="kd">var</span> <span class="nx">slice</span> <span class="o">=</span> <span class="nx">deletedIds</span><span class="p">.</span><span class="nx">slice</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">concat</span> <span class="o">=</span> <span class="nx">deletedIds</span><span class="p">.</span><span class="nx">concat</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">push</span> <span class="o">=</span> <span class="nx">deletedIds</span><span class="p">.</span><span class="nx">push</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">indexOf</span> <span class="o">=</span> <span class="nx">deletedIds</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">class2type</span> <span class="o">=</span> <span class="p">{};</span>

<span class="kd">var</span> <span class="nx">toString</span> <span class="o">=</span> <span class="nx">class2type</span><span class="p">.</span><span class="nx">toString</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">hasOwn</span> <span class="o">=</span> <span class="nx">class2type</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">support</span> <span class="o">=</span> <span class="p">{};</span>



<span class="kd">var</span>
  <span class="nx">version</span> <span class="o">=</span> <span class="s2">&quot;1.11.3&quot;</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<p>Define a local copy of jQuery</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<p>The jQuery object is actually just the init constructor 'enhanced'
Need init if jQuery is called (just allow error to be thrown if not included)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<p>Support: Android&lt;4.1, IE&lt;9
Make sure we trim BOM and NBSP</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rtrim</span> <span class="o">=</span> <span class="sr">/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8">&#182;</a>
</div>
<p>Matches dashed string for camelizing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rmsPrefix</span> <span class="o">=</span> <span class="sr">/^-ms-/</span><span class="p">,</span>
  <span class="nx">rdashAlpha</span> <span class="o">=</span> <span class="sr">/-([\da-z])/gi</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<p>Used by jQuery.camelCase as callback to replace()</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">fcamelCase</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">all</span><span class="p">,</span> <span class="nx">letter</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">letter</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<p>The current version of jQuery being used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jquery</span><span class="o">:</span> <span class="nx">version</span><span class="p">,</span>

  <span class="nx">constructor</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11">&#182;</a>
</div>
<p>Start with an empty selector</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">selector</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<p>The default length of a jQuery object is 0</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">length</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

  <span class="nx">toArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13">&#182;</a>
</div>
<p>Get the Nth element in the matched element set OR
Get the whole matched element set as a clean array</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">num</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">num</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14">&#182;</a>
</div>
<p>Return just the one element from the set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">(</span> <span class="nx">num</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span> <span class="nx">num</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">]</span> <span class="o">:</span> <span class="k">this</span><span class="p">[</span> <span class="nx">num</span> <span class="p">]</span> <span class="p">)</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15">&#182;</a>
</div>
<p>Return all the elements in a clean array</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16">&#182;</a>
</div>
<p>Take an array of elements and push it onto the stack
(returning the new matched element set)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">pushStack</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<p>Build a new jQuery matched element set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(),</span> <span class="nx">elems</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18">&#182;</a>
</div>
<p>Add the old object onto the stack (as a reference)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">prevObject</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19">&#182;</a>
</div>
<p>Return the newly-formed element set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20">&#182;</a>
</div>
<p>Execute a callback for every element in the matched set.
(You can seed the arguments with an array of args, but this is
only used internally.)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">each</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">map</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}));</span>
  <span class="p">},</span>

  <span class="nx">slice</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">first</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">last</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">eq</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">j</span> <span class="o">=</span> <span class="o">+</span><span class="nx">i</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">len</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">j</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="o">?</span> <span class="p">[</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[]</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">end</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21">&#182;</a>
</div>
<p>For internal use only.
Behaves like an Array's method, not like a jQuery method.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">push</span><span class="o">:</span> <span class="nx">push</span><span class="p">,</span>
  <span class="nx">sort</span><span class="o">:</span> <span class="nx">deletedIds</span><span class="p">.</span><span class="nx">sort</span><span class="p">,</span>
  <span class="nx">splice</span><span class="o">:</span> <span class="nx">deletedIds</span><span class="p">.</span><span class="nx">splice</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">copyIsArray</span><span class="p">,</span> <span class="nx">copy</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">clone</span><span class="p">,</span>
    <span class="nx">target</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="p">{},</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">length</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">deep</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22">&#182;</a>
</div>
<p>Handle a deep copy situation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">target</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">deep</span> <span class="o">=</span> <span class="nx">target</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23">&#182;</a>
</div>
<p>skip the boolean and the target</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">target</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24">&#182;</a>
</div>
<p>Handle case when target is a string or something (possible in deep copy)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">target</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">target</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25">&#182;</a>
</div>
<p>extend jQuery itself if only one argument is passed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">===</span> <span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">target</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">i</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26">&#182;</a>
</div>
<p>Only deal with non-null/undefined values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span> <span class="nx">i</span> <span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27">&#182;</a>
</div>
<p>Extend the base object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">src</span> <span class="o">=</span> <span class="nx">target</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
        <span class="nx">copy</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28">&#182;</a>
</div>
<p>Prevent never-ending loop</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">target</span> <span class="o">===</span> <span class="nx">copy</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29">&#182;</a>
</div>
<p>Recurse if we're merging plain objects or arrays</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">deep</span> <span class="o">&amp;&amp;</span> <span class="nx">copy</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">copy</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">copyIsArray</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">copy</span><span class="p">))</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">copyIsArray</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">copyIsArray</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clone</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="o">?</span> <span class="nx">src</span> <span class="o">:</span> <span class="p">[];</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">clone</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="o">?</span> <span class="nx">src</span> <span class="o">:</span> <span class="p">{};</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30">&#182;</a>
</div>
<p>Never move original objects, clone them</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">target</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">deep</span><span class="p">,</span> <span class="nx">clone</span><span class="p">,</span> <span class="nx">copy</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31">&#182;</a>
</div>
<p>Don't bring in undefined values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">copy</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">target</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">copy</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32">&#182;</a>
</div>
<p>Return the modified object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33">&#182;</a>
</div>
<p>Unique for each copy of jQuery on the page</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">expando</span><span class="o">:</span> <span class="s2">&quot;jQuery&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">version</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/\D/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34">&#182;</a>
</div>
<p>Assume jQuery is ready without the ready module</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">isReady</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">msg</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="nx">msg</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">noop</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35">&#182;</a>
</div>
<p>See test/unit/core.js for details concerning isFunction.
Since version 1.3, DOM methods and functions like alert
aren't supported. They return false on IE (#2968).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">isFunction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">isArray</span><span class="o">:</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;array&quot;</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">isWindow</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* jshint eqeqeq: false */</span>
    <span class="k">return</span> <span class="nx">obj</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span> <span class="o">==</span> <span class="nx">obj</span><span class="p">.</span><span class="nb">window</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">isNumeric</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36">&#182;</a>
</div>
<p>parseFloat NaNs numeric-cast false positives (null|true|false|"")
...but misinterprets leading-number strings, particularly hex literals ("0x...")
subtraction forces infinities to NaN
adding 1 corrects loss of precision from parseFloat (#15100)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">obj</span> <span class="o">-</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">isEmptyObject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">isPlainObject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">key</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37">&#182;</a>
</div>
<p>Must be an Object.
Because of IE, we also have to check the presence of the constructor property.
Make sure that DOM nodes and window objects don't pass through, as well</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">obj</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="o">||</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">try</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38">&#182;</a>
</div>
<p>Not own constructor property must be Object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="s2">&quot;constructor&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">&quot;isPrototypeOf&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39">&#182;</a>
</div>
<p>IE8,9 Will throw exceptions on certain host objects #9897</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40">&#182;</a>
</div>
<p>Support: IE&lt;9
Handle iteration over inherited properties before own properties.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">ownLast</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41">&#182;</a>
</div>
<p>Own properties are enumerated firstly, so to speed up,
if last one is own, then all properties are own.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{}</span>

    <span class="k">return</span> <span class="nx">key</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">type</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">obj</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span>
      <span class="nx">class2type</span><span class="p">[</span> <span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;object&quot;</span> <span class="o">:</span>
      <span class="k">typeof</span> <span class="nx">obj</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42">&#182;</a>
</div>
<p>Evaluates a script in a global context
Workarounds based on findings by Jim Driscoll
<a href='http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context'>http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">globalEval</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43">&#182;</a>
</div>
<p>We use execScript on Internet Explorer
We use an anonymous function so that context is window
rather than jQuery in Firefox</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">execScript</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">[</span> <span class="s2">&quot;eval&quot;</span> <span class="p">].</span><span class="nx">call</span><span class="p">(</span> <span class="nb">window</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span> <span class="p">)(</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44">&#182;</a>
</div>
<p>Convert dashed to camelCase; used by the css and data modules
Microsoft forgot to hump their vendor prefix (#9572)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">camelCase</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">string</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rmsPrefix</span><span class="p">,</span> <span class="s2">&quot;ms-&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rdashAlpha</span><span class="p">,</span> <span class="nx">fcamelCase</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">nodeName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45">&#182;</a>
</div>
<p>args is for internal usage only</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">each</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">value</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">isArray</span> <span class="o">=</span> <span class="nx">isArraylike</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isArray</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">obj</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">args</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">obj</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">args</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46">&#182;</a>
</div>
<p>A special, fast, case for the most common use of each</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isArray</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">obj</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">obj</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">obj</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">obj</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47">&#182;</a>
</div>
<p>Support: Android&lt;4.1, IE&lt;9</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">trim</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
      <span class="s2">&quot;&quot;</span> <span class="o">:</span>
      <span class="p">(</span> <span class="nx">text</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rtrim</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48">&#182;</a>
</div>
<p>results is for internal usage only</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">makeArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">results</span> <span class="o">||</span> <span class="p">[];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">arr</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isArraylike</span><span class="p">(</span> <span class="nb">Object</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span>
          <span class="k">typeof</span> <span class="nx">arr</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
          <span class="p">[</span> <span class="nx">arr</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">arr</span>
        <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">push</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">arr</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">inArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">len</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">arr</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">indexOf</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">indexOf</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">len</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">?</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">+</span> <span class="nx">i</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">i</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49">&#182;</a>
</div>
<p>Skip accessing in sparse arrays</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">arr</span> <span class="o">&amp;&amp;</span> <span class="nx">arr</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">merge</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">second</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="o">+</span><span class="nx">second</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="nx">first</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">first</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">second</span><span class="p">[</span> <span class="nx">j</span><span class="o">++</span> <span class="p">];</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50">&#182;</a>
</div>
<p>Support: IE&lt;9
Workaround casting of .length to NaN on otherwise arraylike objects (e.g., NodeLists)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">len</span> <span class="o">!==</span> <span class="nx">len</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">second</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">first</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">second</span><span class="p">[</span> <span class="nx">j</span><span class="o">++</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">first</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">first</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">grep</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">invert</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">callbackInverse</span><span class="p">,</span>
      <span class="nx">matches</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">callbackExpect</span> <span class="o">=</span> <span class="o">!</span><span class="nx">invert</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51">&#182;</a>
</div>
<p>Go through the array, only saving the items
that pass the validator function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">callbackInverse</span> <span class="o">=</span> <span class="o">!</span><span class="nx">callback</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">callbackInverse</span> <span class="o">!==</span> <span class="nx">callbackExpect</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matches</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">matches</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52">&#182;</a>
</div>
<p>arg is for internal usage only</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">map</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">value</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">isArray</span> <span class="o">=</span> <span class="nx">isArraylike</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">),</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53">&#182;</a>
</div>
<p>Go through the array, translating each of the items to their new values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">isArray</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54">&#182;</a>
</div>
<p>Go through every key on the object,</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55">&#182;</a>
</div>
<p>Flatten any nested arrays</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">concat</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="p">[],</span> <span class="nx">ret</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56">&#182;</a>
</div>
<p>A global GUID counter for objects</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">guid</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57">&#182;</a>
</div>
<p>Bind a function to a context, optionally partially applying any
arguments.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">proxy</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">proxy</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">[</span> <span class="nx">context</span> <span class="p">];</span>
      <span class="nx">context</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58">&#182;</a>
</div>
<p>Quick check to determine if target is callable, in the spec
this throws a TypeError, but we will just return undefined.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59">&#182;</a>
</div>
<p>Simulated bind</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">args</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
    <span class="nx">proxy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">context</span> <span class="o">||</span> <span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60">&#182;</a>
</div>
<p>Set the guid of unique handler to the same of original handler, so it can be removed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">proxy</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">proxy</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">now</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">+</span><span class="p">(</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61">&#182;</a>
</div>
<p>jQuery.support is not used in Core but other projects attach their
properties to it so it needs to exist.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="o">:</span> <span class="nx">support</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62">&#182;</a>
</div>
<p>Populate the class2type map</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="s2">&quot;Boolean Number String Function Array Date RegExp Object Error&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">class2type</span><span class="p">[</span> <span class="s2">&quot;[object &quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">isArraylike</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63">&#182;</a>
</div>
<p>Support: iOS 8.2 (not reproducible in simulator)
<code>in</code> check used to prevent JIT error (gh-2145)
hasOwn isn't used here due to false negatives
regarding Nodelist length in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="s2">&quot;length&quot;</span> <span class="k">in</span> <span class="nx">obj</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;array&quot;</span> <span class="o">||</span> <span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span>
    <span class="k">typeof</span> <span class="nx">length</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">Sizzle</span> <span class="o">=</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>!
Sizzle CSS Selector Engine v2.2.0-pre
<a href='http://sizzlejs.com/'>http://sizzlejs.com/</a></p>
  </div>
  <div class="body"><p>Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
Released under the MIT license
<a href='http://jquery.org/license'>http://jquery.org/license</a></p>

<p>Date: 2014-12-16</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nb">window</span> <span class="p">)</span> <span class="p">{</span>

<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
  <span class="nx">support</span><span class="p">,</span>
  <span class="nx">Expr</span><span class="p">,</span>
  <span class="nx">getText</span><span class="p">,</span>
  <span class="nx">isXML</span><span class="p">,</span>
  <span class="nx">tokenize</span><span class="p">,</span>
  <span class="nx">compile</span><span class="p">,</span>
  <span class="nx">select</span><span class="p">,</span>
  <span class="nx">outermostContext</span><span class="p">,</span>
  <span class="nx">sortInput</span><span class="p">,</span>
  <span class="nx">hasDuplicate</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65">&#182;</a>
</div>
<p>Local document vars</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">setDocument</span><span class="p">,</span>
  <span class="nb">document</span><span class="p">,</span>
  <span class="nx">docElem</span><span class="p">,</span>
  <span class="nx">documentIsHTML</span><span class="p">,</span>
  <span class="nx">rbuggyQSA</span><span class="p">,</span>
  <span class="nx">rbuggyMatches</span><span class="p">,</span>
  <span class="nx">matches</span><span class="p">,</span>
  <span class="nx">contains</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66">&#182;</a>
</div>
<p>Instance-specific data</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">expando</span> <span class="o">=</span> <span class="s2">&quot;sizzle&quot;</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
  <span class="nx">preferredDoc</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">,</span>
  <span class="nx">dirruns</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">done</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">classCache</span> <span class="o">=</span> <span class="nx">createCache</span><span class="p">(),</span>
  <span class="nx">tokenCache</span> <span class="o">=</span> <span class="nx">createCache</span><span class="p">(),</span>
  <span class="nx">compilerCache</span> <span class="o">=</span> <span class="nx">createCache</span><span class="p">(),</span>
  <span class="nx">sortOrder</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">hasDuplicate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67">&#182;</a>
</div>
<p>General-purpose constants</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">MAX_NEGATIVE</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68">&#182;</a>
</div>
<p>Instance methods</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">hasOwn</span> <span class="o">=</span> <span class="p">({}).</span><span class="nx">hasOwnProperty</span><span class="p">,</span>
  <span class="nx">arr</span> <span class="o">=</span> <span class="p">[],</span>
  <span class="nx">pop</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">pop</span><span class="p">,</span>
  <span class="nx">push_native</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">,</span>
  <span class="nx">push</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">,</span>
  <span class="nx">slice</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">slice</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69">&#182;</a>
</div>
<p>Use a stripped-down indexOf as it's faster than native
<a href='http://jsperf.com/thor-indexof-vs-for/5'>http://jsperf.com/thor-indexof-vs-for/5</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">indexOf</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">list</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">len</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">booleans</span> <span class="o">=</span> <span class="s2">&quot;checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped&quot;</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70">&#182;</a>
</div>
<p>Regular expressions</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71">&#182;</a>
</div>
<p>Whitespace characters <a href='http://www.w3.org/TR/css3-selectors/#whitespace'>http://www.w3.org/TR/css3-selectors/#whitespace</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">whitespace</span> <span class="o">=</span> <span class="s2">&quot;[\\x20\\t\\r\\n\\f]&quot;</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72">&#182;</a>
</div>
<p><a href='http://www.w3.org/TR/css3-syntax/#characters'>http://www.w3.org/TR/css3-syntax/#characters</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">characterEncoding</span> <span class="o">=</span> <span class="s2">&quot;(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+&quot;</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73">&#182;</a>
</div>
<p>Loosely modeled on CSS identifier characters
An unquoted value should be a CSS identifier <a href='http://www.w3.org/TR/css3-selectors/#attribute-selectors'>http://www.w3.org/TR/css3-selectors/#attribute-selectors</a>
Proper syntax: <a href='http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier'>http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">identifier</span> <span class="o">=</span> <span class="nx">characterEncoding</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="s2">&quot;w#&quot;</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74">&#182;</a>
</div>
<p>Attribute selectors: <a href='http://www.w3.org/TR/selectors/#attribute-selectors'>http://www.w3.org/TR/selectors/#attribute-selectors</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">attributes</span> <span class="o">=</span> <span class="s2">&quot;\\[&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*(&quot;</span> <span class="o">+</span> <span class="nx">characterEncoding</span> <span class="o">+</span> <span class="s2">&quot;)(?:&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75">&#182;</a>
</div>
<p>Operator (capture 2)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;*([*^$|!~]?=)&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76">&#182;</a>
</div>
<p>"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;*(?:&#39;((?:\\\\.|[^\\\\&#39;])*)&#39;|\&quot;((?:\\\\.|[^\\\\\&quot;])*)\&quot;|(&quot;</span> <span class="o">+</span> <span class="nx">identifier</span> <span class="o">+</span> <span class="s2">&quot;))|)&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span>
    <span class="s2">&quot;*\\]&quot;</span><span class="p">,</span>

  <span class="nx">pseudos</span> <span class="o">=</span> <span class="s2">&quot;:(&quot;</span> <span class="o">+</span> <span class="nx">characterEncoding</span> <span class="o">+</span> <span class="s2">&quot;)(?:\\((&quot;</span> <span class="o">+</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77">&#182;</a>
</div>
<p>To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
1. quoted (capture 3; capture 4 or capture 5)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;(&#39;((?:\\\\.|[^\\\\&#39;])*)&#39;|\&quot;((?:\\\\.|[^\\\\\&quot;])*)\&quot;)|&quot;</span> <span class="o">+</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78">&#182;</a>
</div>
<ol>
<li>simple (capture 6)</li>
</ol>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;((?:\\\\.|[^\\\\()[\\]]|&quot;</span> <span class="o">+</span> <span class="nx">attributes</span> <span class="o">+</span> <span class="s2">&quot;)*)|&quot;</span> <span class="o">+</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79">&#182;</a>
</div>
<ol>
<li>anything else (capture 2)</li>
</ol>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;.*&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;)\\)|)&quot;</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80">&#182;</a>
</div>
<p>Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rwhitespace</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span> <span class="p">),</span>
  <span class="nx">rtrim</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;+|((?:^|[^\\\\])(?:\\\\.)*)&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;+$&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span> <span class="p">),</span>

  <span class="nx">rcomma</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*,&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="p">),</span>
  <span class="nx">rcombinators</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*([&gt;+~]|&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="p">),</span>

  <span class="nx">rattributeQuotes</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*([^\\]&#39;\&quot;]*?)&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*\\]&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span> <span class="p">),</span>

  <span class="nx">rpseudo</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="nx">pseudos</span> <span class="p">),</span>
  <span class="nx">ridentifier</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^&quot;</span> <span class="o">+</span> <span class="nx">identifier</span> <span class="o">+</span> <span class="s2">&quot;$&quot;</span> <span class="p">),</span>

  <span class="nx">matchExpr</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;ID&quot;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^#(&quot;</span> <span class="o">+</span> <span class="nx">characterEncoding</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="p">),</span>
    <span class="s2">&quot;CLASS&quot;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^\\.(&quot;</span> <span class="o">+</span> <span class="nx">characterEncoding</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="p">),</span>
    <span class="s2">&quot;TAG&quot;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^(&quot;</span> <span class="o">+</span> <span class="nx">characterEncoding</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="s2">&quot;w*&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="p">),</span>
    <span class="s2">&quot;ATTR&quot;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^&quot;</span> <span class="o">+</span> <span class="nx">attributes</span> <span class="p">),</span>
    <span class="s2">&quot;PSEUDO&quot;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^&quot;</span> <span class="o">+</span> <span class="nx">pseudos</span> <span class="p">),</span>
    <span class="s2">&quot;CHILD&quot;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span>
      <span class="s2">&quot;*(even|odd|(([+-]|)(\\d*)n|)&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*(?:([+-]|)&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span>
      <span class="s2">&quot;*(\\d+)|))&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*\\)|)&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span> <span class="p">),</span>
    <span class="s2">&quot;bool&quot;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^(?:&quot;</span> <span class="o">+</span> <span class="nx">booleans</span> <span class="o">+</span> <span class="s2">&quot;)$&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span> <span class="p">),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81">&#182;</a>
</div>
<p>For use in libraries implementing .is()
We use this for POS matching in <code>select</code></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;needsContext&quot;</span><span class="o">:</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*[&gt;+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(&quot;</span> <span class="o">+</span>
      <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*((?:-\\d)?\\d*)&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*\\)|)(?=[^-]|$)&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span> <span class="p">)</span>
  <span class="p">},</span>

  <span class="nx">rinputs</span> <span class="o">=</span> <span class="sr">/^(?:input|select|textarea|button)$/i</span><span class="p">,</span>
  <span class="nx">rheader</span> <span class="o">=</span> <span class="sr">/^h\d$/i</span><span class="p">,</span>

  <span class="nx">rnative</span> <span class="o">=</span> <span class="sr">/^[^{]+\{\s*\[native \w/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82">&#182;</a>
</div>
<p>Easily-parseable/retrievable ID or TAG or CLASS selectors</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rquickExpr</span> <span class="o">=</span> <span class="sr">/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/</span><span class="p">,</span>

  <span class="nx">rsibling</span> <span class="o">=</span> <span class="sr">/[+~]/</span><span class="p">,</span>
  <span class="nx">rescape</span> <span class="o">=</span> <span class="sr">/&#39;|\\/g</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83">&#182;</a>
</div>
<p>CSS escapes <a href='http://www.w3.org/TR/CSS21/syndata.html#escaped-characters'>http://www.w3.org/TR/CSS21/syndata.html#escaped-characters</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">runescape</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;\\\\([\\da-f]{1,6}&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;?|(&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;)|.)&quot;</span><span class="p">,</span> <span class="s2">&quot;ig&quot;</span> <span class="p">),</span>
  <span class="nx">funescape</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">escaped</span><span class="p">,</span> <span class="nx">escapedWhitespace</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">high</span> <span class="o">=</span> <span class="s2">&quot;0x&quot;</span> <span class="o">+</span> <span class="nx">escaped</span> <span class="o">-</span> <span class="mh">0x10000</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84">&#182;</a>
</div>
<p>NaN means non-codepoint
Support: Firefox&lt;24
Workaround erroneous numeric interpretation of +"0x"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">high</span> <span class="o">!==</span> <span class="nx">high</span> <span class="o">||</span> <span class="nx">escapedWhitespace</span> <span class="o">?</span>
      <span class="nx">escaped</span> <span class="o">:</span>
      <span class="nx">high</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85">&#182;</a>
</div>
<p>BMP codepoint</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span> <span class="nx">high</span> <span class="o">+</span> <span class="mh">0x10000</span> <span class="p">)</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86">&#182;</a>
</div>
<p>Supplemental Plane codepoint (surrogate pair)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span> <span class="nx">high</span> <span class="o">&gt;&gt;</span> <span class="mi">10</span> <span class="o">|</span> <span class="mh">0xD800</span><span class="p">,</span> <span class="nx">high</span> <span class="o">&amp;</span> <span class="mh">0x3FF</span> <span class="o">|</span> <span class="mh">0xDC00</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87">&#182;</a>
</div>
<p>Used for iframes
See setDocument()
Removing the function wrapper causes a "Permission Denied"
error in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">unloadHandler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">setDocument</span><span class="p">();</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88">&#182;</a>
</div>
<p>Optimize for push.apply( _, NodeList )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">try</span> <span class="p">{</span>
  <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span>
    <span class="p">(</span><span class="nx">arr</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">preferredDoc</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">)),</span>
    <span class="nx">preferredDoc</span><span class="p">.</span><span class="nx">childNodes</span>
  <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89">&#182;</a>
</div>
<p>Support: Android&lt;4.0
Detect silently failing push.apply</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">arr</span><span class="p">[</span> <span class="nx">preferredDoc</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="p">].</span><span class="nx">nodeType</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">push</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">apply</span><span class="o">:</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90">&#182;</a>
</div>
<p>Leverage slice if possible</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">els</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">push_native</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">els</span><span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91">&#182;</a>
</div>
<p>Support: IE&lt;9
Otherwise append directly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">els</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92">&#182;</a>
</div>
<p>Can't trust NodeList.length</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">target</span><span class="p">[</span><span class="nx">j</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">els</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{}</span>
      <span class="nx">target</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">nodeType</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93">&#182;</a>
</div>
<p>QSA vars</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">i</span><span class="p">,</span> <span class="nx">groups</span><span class="p">,</span> <span class="nx">old</span><span class="p">,</span> <span class="nx">nid</span><span class="p">,</span> <span class="nx">newContext</span><span class="p">,</span> <span class="nx">newSelector</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">context</span> <span class="o">?</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">context</span> <span class="o">:</span> <span class="nx">preferredDoc</span> <span class="p">)</span> <span class="o">!==</span> <span class="nb">document</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">setDocument</span><span class="p">(</span> <span class="nx">context</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
  <span class="nx">results</span> <span class="o">=</span> <span class="nx">results</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="nx">nodeType</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">selector</span> <span class="o">||</span>
    <span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">seed</span> <span class="o">&amp;&amp;</span> <span class="nx">documentIsHTML</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94">&#182;</a>
</div>
<p>Try to shortcut find operations when possible (e.g., not under DocumentFragment)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">rquickExpr</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95">&#182;</a>
</div>
<p>Speed-up: Sizzle("#ID")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">m</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">m</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96">&#182;</a>
</div>
<p>Check parentNode to catch when Blackberry 4.6 returns
nodes that are no longer in the document (jQuery #6963)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97">&#182;</a>
</div>
<p>Handle the case where IE, Opera, and Webkit return items
by name instead of ID</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">m</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
              <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98">&#182;</a>
</div>
<p>Context is not a document</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">m</span> <span class="p">))</span> <span class="o">&amp;&amp;</span>
            <span class="nx">contains</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">m</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
            <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99">&#182;</a>
</div>
<p>Speed-up: Sizzle("TAG")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100">&#182;</a>
</div>
<p>Speed-up: Sizzle(".CLASS")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">m</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">support</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span> <span class="nx">m</span> <span class="p">)</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101">&#182;</a>
</div>
<p>QSA path</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">qsa</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">rbuggyQSA</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">nid</span> <span class="o">=</span> <span class="nx">old</span> <span class="o">=</span> <span class="nx">expando</span><span class="p">;</span>
      <span class="nx">newContext</span> <span class="o">=</span> <span class="nx">context</span><span class="p">;</span>
      <span class="nx">newSelector</span> <span class="o">=</span> <span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102">&#182;</a>
</div>
<p>qSA works strangely on Element-rooted queries
We can work around this by specifying an extra ID on the root
and working up from there (Thanks to Andrew Dupont for the technique)
IE 8 doesn't work on object elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">groups</span> <span class="o">=</span> <span class="nx">tokenize</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">old</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">nid</span> <span class="o">=</span> <span class="nx">old</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rescape</span><span class="p">,</span> <span class="s2">&quot;\\$&amp;&quot;</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">context</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nx">nid</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">nid</span> <span class="o">=</span> <span class="s2">&quot;[id=&#39;&quot;</span> <span class="o">+</span> <span class="nx">nid</span> <span class="o">+</span> <span class="s2">&quot;&#39;] &quot;</span><span class="p">;</span>

        <span class="nx">i</span> <span class="o">=</span> <span class="nx">groups</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">groups</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">nid</span> <span class="o">+</span> <span class="nx">toSelector</span><span class="p">(</span> <span class="nx">groups</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">newContext</span> <span class="o">=</span> <span class="nx">rsibling</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">testContext</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">context</span><span class="p">;</span>
        <span class="nx">newSelector</span> <span class="o">=</span> <span class="nx">groups</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">newSelector</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span>
            <span class="nx">newContext</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="nx">newSelector</span> <span class="p">)</span>
          <span class="p">);</span>
          <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">qsaError</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103">&#182;</a>
</div>
<p>All others</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">select</span><span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rtrim</span><span class="p">,</span> <span class="s2">&quot;$1&quot;</span> <span class="p">),</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">);</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Create key-value caches of limited size</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Function(string</span>
      <span class="dox_type">Object)</span>
      <span>Returns the Object data after storing it on itself with
 property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 deleting the oldest entry</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">createCache</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="kd">function</span> <span class="nx">cache</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105">&#182;</a>
</div>
<p>Use (key + " ") to avoid collision with native prototype properties (see Issue #157)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">key</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">cacheLength</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106">&#182;</a>
</div>
<p>Only keep the most recent entries</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">key</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">cache</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Mark a function for special use by Sizzle</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
      <span>The function to mark</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">markFunction</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">fn</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">fn</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Support testing using an element</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
      <span>Passed the created div and expects a boolean result</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">assert</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!!</span><span class="nx">fn</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109">&#182;</a>
</div>
<p>Remove from its parent by default</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">div</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110">&#182;</a>
</div>
<p>release memory in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">div</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Adds the same handler for all of the specified attrs</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">attrs</span>
      <span class="dox_type">String</span>
      <span>Pipe-separated list of attributes</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">handler</span>
      <span class="dox_type">Function</span>
      <span>The method that will be applied</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">addHandle</span><span class="p">(</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">handler</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nx">attrs</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">),</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">attrs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Checks document order of two siblings</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">a</span>
      <span class="dox_type">Element</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">b</span>
      <span class="dox_type">Element</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Number</span>
      <span>Returns less than 0 if a precedes b, greater than 0 if a follows b</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">,</span>
    <span class="nx">diff</span> <span class="o">=</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span>
      <span class="p">(</span> <span class="o">~</span><span class="nx">b</span><span class="p">.</span><span class="nx">sourceIndex</span> <span class="o">||</span> <span class="nx">MAX_NEGATIVE</span> <span class="p">)</span> <span class="o">-</span>
      <span class="p">(</span> <span class="o">~</span><span class="nx">a</span><span class="p">.</span><span class="nx">sourceIndex</span> <span class="o">||</span> <span class="nx">MAX_NEGATIVE</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113">&#182;</a>
</div>
<p>Use IE sourceIndex if available on both nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">diff</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">diff</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-114" id="section-114">&#182;</a>
</div>
<p>Check if b follows a</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">a</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-115" id="section-115">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Returns a function to use in pseudos for input types</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">type
</span>
      <span class="dox_type">String</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">createInputPseudo</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-116" id="section-116">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Returns a function to use in pseudos for buttons</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">type
</span>
      <span class="dox_type">String</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">createButtonPseudo</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-117" id="section-117">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Returns a function to use in pseudos for positionals</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn
</span>
      <span class="dox_type">Function</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">createPositionalPseudo</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">markFunction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">argument</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">argument</span> <span class="o">=</span> <span class="o">+</span><span class="nx">argument</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">markFunction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">seed</span><span class="p">,</span> <span class="nx">matches</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">j</span><span class="p">,</span>
        <span class="nx">matchIndexes</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">(</span> <span class="p">[],</span> <span class="nx">seed</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">argument</span> <span class="p">),</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="nx">matchIndexes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-118" id="section-118">&#182;</a>
</div>
<p>Match elements found at the specified indexes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">seed</span><span class="p">[</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">matchIndexes</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">seed</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">seed</span><span class="p">[</span><span class="nx">j</span><span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-119" id="section-119">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Checks a node for validity as a Sizzle context</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">context</span>
      <span class="dox_type">Element</span>
      <span class="dox_type">Object=</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Element</span>
      <span class="dox_type">Object</span>
      <span class="dox_type">Boolean</span>
      <span>The input node if acceptable, otherwise a falsy value</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">testContext</span><span class="p">(</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-120" id="section-120">&#182;</a>
</div>
<p>Expose support vars for convenience</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">support</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">support</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Detects XML nodes</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">elem</span>
      <span class="dox_type">Element</span>
      <span class="dox_type">Object</span>
      <span>An element or a document</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Boolean</span>
      <span>True iff elem is a non-HTML XML node</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">isXML</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122">&#182;</a>
</div>
<p>documentElement is verified for cases where it doesn't yet exist
(such as loading iframes in IE - #4833)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">documentElement</span> <span class="o">=</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">).</span><span class="nx">documentElement</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">documentElement</span> <span class="o">?</span> <span class="nx">documentElement</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">!==</span> <span class="s2">&quot;HTML&quot;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Sets document-related variables once based on the current document</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">[doc]</span>
      <span class="dox_type">Element</span>
      <span class="dox_type">Object</span>
      <span>An element or document object to use to set the document</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Object</span>
      <span>Returns the current document</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">setDocument</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">setDocument</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">node</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">hasCompare</span><span class="p">,</span> <span class="nx">parent</span><span class="p">,</span>
    <span class="nx">doc</span> <span class="o">=</span> <span class="nx">node</span> <span class="o">?</span> <span class="nx">node</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">node</span> <span class="o">:</span> <span class="nx">preferredDoc</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124">&#182;</a>
</div>
<p>If no document and documentElement is available, return</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">doc</span> <span class="o">===</span> <span class="nb">document</span> <span class="o">||</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">9</span> <span class="o">||</span> <span class="o">!</span><span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">document</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125">&#182;</a>
</div>
<p>Set our document</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nb">document</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">;</span>
  <span class="nx">docElem</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>
  <span class="nx">parent</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-126" id="section-126">&#182;</a>
</div>
<p>Support: IE>8
If iframe document is assigned to "document" variable and if iframe has been reloaded,
IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
IE6-8 do not support the defaultView property so parent will be undefined</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span> <span class="o">!==</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">top</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127">&#182;</a>
</div>
<p>IE11 does not have attachEvent, so all must suffer</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">parent</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&quot;unload&quot;</span><span class="p">,</span> <span class="nx">unloadHandler</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">parent</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onunload&quot;</span><span class="p">,</span> <span class="nx">unloadHandler</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="support%20tests">
  <h2>
    <a href="#support%20tests" name="support%20tests" class="pilcrow">&#182;</a>
    Support tests
  </h2>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">documentIsHTML</span> <span class="o">=</span> <span class="o">!</span><span class="nx">isXML</span><span class="p">(</span> <span class="nx">doc</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="attributes">
  <h2>
    <a href="#attributes" name="attributes" class="pilcrow">&#182;</a>
    Attributes
  </h2>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-130" id="section-130">&#182;</a>
</div>
<p>Support: IE&lt;8
Verify that getAttribute really returns attributes and not properties
(excepting IE8 booleans)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">=</span> <span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot;i&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;className&quot;</span><span class="p">);</span>
  <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getelement(s)by*">
  <h2>
    <a href="#getelement(s)by*" name="getelement(s)by*" class="pilcrow">&#182;</a>
    getElement(s)By*
  </h2>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-132" id="section-132">&#182;</a>
</div>
<p>Check if getElementsByTagName("*") returns only elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">=</span> <span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createComment</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">);</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-133" id="section-133">&#182;</a>
</div>
<p>Support: IE&lt;9</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="o">=</span> <span class="nx">rnative</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-134" id="section-134">&#182;</a>
</div>
<p>Support: IE&lt;10
Check if getElementById returns elements by name
The broken getElementById methods don't pick up programatically-set names,
so use a roundabout getElementsByName test</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">getById</span> <span class="o">=</span> <span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">docElem</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">).</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">expando</span><span class="p">;</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">doc</span><span class="p">.</span><span class="nx">getElementsByName</span> <span class="o">||</span> <span class="o">!</span><span class="nx">doc</span><span class="p">.</span><span class="nx">getElementsByName</span><span class="p">(</span> <span class="nx">expando</span> <span class="p">).</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-135" id="section-135">&#182;</a>
</div>
<p>ID find and filter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">getById</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">documentIsHTML</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">id</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-136" id="section-136">&#182;</a>
</div>
<p>Check parentNode to catch when Blackberry 4.6 returns
nodes that are no longer in the document #6963</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span> <span class="nx">m</span> <span class="o">&amp;&amp;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">m</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">Expr</span><span class="p">.</span><span class="nx">filter</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">id</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">attrId</span> <span class="o">=</span> <span class="nx">id</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">runescape</span><span class="p">,</span> <span class="nx">funescape</span> <span class="p">);</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">attrId</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">};</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-137" id="section-137">&#182;</a>
</div>
<p>Support: IE6/7
getElementById is not reliable as a find shortcut</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">delete</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">];</span>

    <span class="nx">Expr</span><span class="p">.</span><span class="nx">filter</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">]</span> <span class="o">=</span>  <span class="kd">function</span><span class="p">(</span> <span class="nx">id</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">attrId</span> <span class="o">=</span> <span class="nx">id</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">runescape</span><span class="p">,</span> <span class="nx">funescape</span> <span class="p">);</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">node</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="nx">attrId</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">};</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-138" id="section-138">&#182;</a>
</div>
<p>Tag</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">[</span><span class="s2">&quot;TAG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">support</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">?</span>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">tag</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-139" id="section-139">&#182;</a>
</div>
<p>DocumentFragment nodes don't have gEBTN</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">qsa</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="nx">tag</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="o">:</span>

    <span class="kd">function</span><span class="p">(</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span>
        <span class="nx">tmp</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-140" id="section-140">&#182;</a>
</div>
<p>By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">results</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">tag</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-141" id="section-141">&#182;</a>
</div>
<p>Filter out possible comments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">tag</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">tmp</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">tmp</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-142" id="section-142">&#182;</a>
</div>
<p>Class</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">[</span><span class="s2">&quot;CLASS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">support</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="o">&amp;&amp;</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">className</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">documentIsHTML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span> <span class="nx">className</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="qsa%2Fmatchesselector">
  <h2>
    <a href="#qsa%2Fmatchesselector" name="qsa%2Fmatchesselector" class="pilcrow">&#182;</a>
    QSA/matchesSelector
  </h2>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-144" id="section-144">&#182;</a>
</div>
<p>QSA and matchesSelector support</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-145" id="section-145">&#182;</a>
</div>
<p>matchesSelector(:active) reports false when true (IE9/Opera 11.5)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rbuggyMatches</span> <span class="o">=</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-146" id="section-146">&#182;</a>
</div>
<p>qSa(:focus) reports false when true (Chrome 21)
We allow this because of a bug in IE8/9 that throws an error
whenever <code>document.activeElement</code> is accessed on an iframe
So, we allow :focus to pass through QSA all the time to avoid the IE error
See <a href='http://bugs.jquery.com/ticket/13378'>http://bugs.jquery.com/ticket/13378</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rbuggyQSA</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">support</span><span class="p">.</span><span class="nx">qsa</span> <span class="o">=</span> <span class="nx">rnative</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">querySelectorAll</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-147" id="section-147">&#182;</a>
</div>
<p>Build QSA regex
Regex strategy adopted from Diego Perini</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-148" id="section-148">&#182;</a>
</div>
<p>Select is set to empty string on purpose
This is to test IE's treatment of not explicitly
setting a boolean content attribute,
since its presence should be enough
<a href='http://bugs.jquery.com/ticket/12359'>http://bugs.jquery.com/ticket/12359</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">docElem</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;a id=&#39;&quot;</span> <span class="o">+</span> <span class="nx">expando</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&lt;/a&gt;&quot;</span> <span class="o">+</span>
        <span class="s2">&quot;&lt;select id=&#39;&quot;</span> <span class="o">+</span> <span class="nx">expando</span> <span class="o">+</span> <span class="s2">&quot;-\f]&#39; msallowcapture=&#39;&#39;&gt;&quot;</span> <span class="o">+</span>
        <span class="s2">&quot;&lt;option selected=&#39;&#39;&gt;&lt;/option&gt;&lt;/select&gt;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-149" id="section-149">&#182;</a>
</div>
<p>Support: IE8, Opera 11-12.16
Nothing should be selected when empty strings follow ^= or $= or *=
The test attribute must be unknown in Opera but "safe" for WinRT
<a href='http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section'>http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;[msallowcapture^=&#39;&#39;]&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="s2">&quot;[*^$]=&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*(?:&#39;&#39;|\&quot;\&quot;)&quot;</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-150" id="section-150">&#182;</a>
</div>
<p>Support: IE8
Boolean attributes and "value" are not treated correctly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;[selected]&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="s2">&quot;\\[&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*(?:value|&quot;</span> <span class="o">+</span> <span class="nx">booleans</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-151" id="section-151">&#182;</a>
</div>
<p>Support: Chrome&lt;29, Android&lt;4.2+, Safari&lt;7.0+, iOS&lt;7.0+, PhantomJS&lt;1.9.7+</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="s2">&quot;[id~=&quot;</span> <span class="o">+</span> <span class="nx">expando</span> <span class="o">+</span> <span class="s2">&quot;-]&quot;</span> <span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;~=&quot;</span><span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-152" id="section-152">&#182;</a>
</div>
<p>Webkit/Opera - :checked should return selected option elements
<a href='http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked'>http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked</a>
IE8 throws error here and will not see later tests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;:checked&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;:checked&quot;</span><span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-153" id="section-153">&#182;</a>
</div>
<p>Support: Safari 8+, iOS 8+
<a href='https://bugs.webkit.org/show_bug.cgi?id=136851'>https://bugs.webkit.org/show_bug.cgi?id=136851</a>
In-page <code>selector#id sibing-combinator selector</code> fails</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="s2">&quot;a#&quot;</span> <span class="o">+</span> <span class="nx">expando</span> <span class="o">+</span> <span class="s2">&quot;+*&quot;</span> <span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;.#.+[+~]&quot;</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-154" id="section-154">&#182;</a>
</div>
<p>Support: Windows 8 Native Apps
The type and name attributes are restricted during .innerHTML assignment</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">);</span>
      <span class="nx">input</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span> <span class="p">);</span>
      <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">input</span> <span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-155" id="section-155">&#182;</a>
</div>
<p>Support: IE8
Enforce case-sensitivity of name attribute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;[name=d]&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="s2">&quot;name&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;*[*^$|!~]?=&quot;</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-156" id="section-156">&#182;</a>
</div>
<p>FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
IE8 throws error here and will not see later tests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;:enabled&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="s2">&quot;:enabled&quot;</span><span class="p">,</span> <span class="s2">&quot;:disabled&quot;</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-157" id="section-157">&#182;</a>
</div>
<p>Opera 10-11 does not throw on post-comma invalid pseudos</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;*,:x&quot;</span><span class="p">);</span>
      <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;,.*:&quot;</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">support</span><span class="p">.</span><span class="nx">matchesSelector</span> <span class="o">=</span> <span class="nx">rnative</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="p">(</span><span class="nx">matches</span> <span class="o">=</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">matches</span> <span class="o">||</span>
    <span class="nx">docElem</span><span class="p">.</span><span class="nx">webkitMatchesSelector</span> <span class="o">||</span>
    <span class="nx">docElem</span><span class="p">.</span><span class="nx">mozMatchesSelector</span> <span class="o">||</span>
    <span class="nx">docElem</span><span class="p">.</span><span class="nx">oMatchesSelector</span> <span class="o">||</span>
    <span class="nx">docElem</span><span class="p">.</span><span class="nx">msMatchesSelector</span><span class="p">)</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-158" id="section-158">&#182;</a>
</div>
<p>Check to see if it's possible to do matchesSelector
on a disconnected node (IE 9)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">support</span><span class="p">.</span><span class="nx">disconnectedMatch</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">div</span><span class="p">,</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-159" id="section-159">&#182;</a>
</div>
<p>This should fail with an exception
Gecko does not error, returns false instead</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">matches</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">div</span><span class="p">,</span> <span class="s2">&quot;[s!=&#39;&#39;]:x&quot;</span> <span class="p">);</span>
      <span class="nx">rbuggyMatches</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="s2">&quot;!=&quot;</span><span class="p">,</span> <span class="nx">pseudos</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">rbuggyQSA</span> <span class="o">=</span> <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="p">);</span>
  <span class="nx">rbuggyMatches</span> <span class="o">=</span> <span class="nx">rbuggyMatches</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="nx">rbuggyMatches</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="contains">
  <h2>
    <a href="#contains" name="contains" class="pilcrow">&#182;</a>
    Contains
  </h2>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">hasCompare</span> <span class="o">=</span> <span class="nx">rnative</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-161" id="section-161">&#182;</a>
</div>
<p>Element contains another
Purposefully does not implement inclusive descendent
As in, an element does not contain itself</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">contains</span> <span class="o">=</span> <span class="nx">hasCompare</span> <span class="o">||</span> <span class="nx">rnative</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">contains</span> <span class="p">)</span> <span class="o">?</span>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">adown</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">documentElement</span> <span class="o">:</span> <span class="nx">a</span><span class="p">,</span>
        <span class="nx">bup</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">bup</span> <span class="o">||</span> <span class="o">!!</span><span class="p">(</span> <span class="nx">bup</span> <span class="o">&amp;&amp;</span> <span class="nx">bup</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="nx">adown</span><span class="p">.</span><span class="nx">contains</span> <span class="o">?</span>
          <span class="nx">adown</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">bup</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span> <span class="nx">bup</span> <span class="p">)</span> <span class="o">&amp;</span> <span class="mi">16</span>
      <span class="p">));</span>
    <span class="p">}</span> <span class="o">:</span>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">b</span> <span class="o">===</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="sorting">
  <h2>
    <a href="#sorting" name="sorting" class="pilcrow">&#182;</a>
    Sorting
  </h2>
</div>

  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-163" id="section-163">&#182;</a>
</div>
<p>Document order sorting</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">sortOrder</span> <span class="o">=</span> <span class="nx">hasCompare</span> <span class="o">?</span>
  <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-164" id="section-164">&#182;</a>
</div>
<p>Flag for duplicate removal</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">hasDuplicate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-165" id="section-165">&#182;</a>
</div>
<p>Sort on method existence if only one input has compareDocumentPosition</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">compare</span> <span class="o">=</span> <span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="o">-</span> <span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">compare</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">compare</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-166" id="section-166">&#182;</a>
</div>
<p>Calculate position if both inputs belong to the same document</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">compare</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">a</span> <span class="p">)</span> <span class="o">===</span> <span class="p">(</span> <span class="nx">b</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">b</span> <span class="p">)</span> <span class="o">?</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span> <span class="nx">b</span> <span class="p">)</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-167" id="section-167">&#182;</a>
</div>
<p>Otherwise we know they are disconnected</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="mi">1</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-168" id="section-168">&#182;</a>
</div>
<p>Disconnected nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">compare</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">||</span>
      <span class="p">(</span><span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">sortDetached</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="o">===</span> <span class="nx">compare</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-169" id="section-169">&#182;</a>
</div>
<p>Choose the first element that is related to our preferred document</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">doc</span> <span class="o">||</span> <span class="nx">a</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">===</span> <span class="nx">preferredDoc</span> <span class="o">&amp;&amp;</span> <span class="nx">contains</span><span class="p">(</span><span class="nx">preferredDoc</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">b</span> <span class="o">===</span> <span class="nx">doc</span> <span class="o">||</span> <span class="nx">b</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">===</span> <span class="nx">preferredDoc</span> <span class="o">&amp;&amp;</span> <span class="nx">contains</span><span class="p">(</span><span class="nx">preferredDoc</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-170" id="section-170">&#182;</a>
</div>
<p>Maintain original order</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">sortInput</span> <span class="o">?</span>
        <span class="p">(</span> <span class="nx">indexOf</span><span class="p">(</span> <span class="nx">sortInput</span><span class="p">,</span> <span class="nx">a</span> <span class="p">)</span> <span class="o">-</span> <span class="nx">indexOf</span><span class="p">(</span> <span class="nx">sortInput</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span>
        <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">compare</span> <span class="o">&amp;</span> <span class="mi">4</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span> <span class="o">:</span>
  <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-171" id="section-171">&#182;</a>
</div>
<p>Exit early if the nodes are identical</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">hasDuplicate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">cur</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">aup</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
      <span class="nx">bup</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
      <span class="nx">ap</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">a</span> <span class="p">],</span>
      <span class="nx">bp</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">b</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-172" id="section-172">&#182;</a>
</div>
<p>Parentless nodes are either documents or disconnected</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">aup</span> <span class="o">||</span> <span class="o">!</span><span class="nx">bup</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">doc</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span>
        <span class="nx">b</span> <span class="o">===</span> <span class="nx">doc</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span>
        <span class="nx">aup</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span>
        <span class="nx">bup</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span>
        <span class="nx">sortInput</span> <span class="o">?</span>
        <span class="p">(</span> <span class="nx">indexOf</span><span class="p">(</span> <span class="nx">sortInput</span><span class="p">,</span> <span class="nx">a</span> <span class="p">)</span> <span class="o">-</span> <span class="nx">indexOf</span><span class="p">(</span> <span class="nx">sortInput</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span>
        <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-173" id="section-173">&#182;</a>
</div>
<p>If the nodes are siblings, we can do a quick check</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">aup</span> <span class="o">===</span> <span class="nx">bup</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-174" id="section-174">&#182;</a>
</div>
<p>Otherwise we need full lists of their ancestors for comparison</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">cur</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ap</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">cur</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">bp</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-175" id="section-175">&#182;</a>
</div>
<p>Walk down the tree looking for a discrepancy</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">ap</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">bp</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">i</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-176" id="section-176">&#182;</a>
</div>
<p>Do a sibling check if the nodes have a common ancestor</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">ap</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">bp</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-177" id="section-177">&#182;</a>
</div>
<p>Otherwise nodes in our document sort first</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">ap</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">preferredDoc</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span>
      <span class="nx">bp</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">preferredDoc</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span>
      <span class="mi">0</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">doc</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">matches</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">elements</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">elements</span> <span class="p">);</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">matchesSelector</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">expr</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-178" id="section-178">&#182;</a>
</div>
<p>Set document vars if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">!==</span> <span class="nb">document</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">setDocument</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-179" id="section-179">&#182;</a>
</div>
<p>Make sure that attribute selectors are quoted</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">expr</span> <span class="o">=</span> <span class="nx">expr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rattributeQuotes</span><span class="p">,</span> <span class="s2">&quot;=&#39;$1&#39;]&quot;</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">matchesSelector</span> <span class="o">&amp;&amp;</span> <span class="nx">documentIsHTML</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span> <span class="o">!</span><span class="nx">rbuggyMatches</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rbuggyMatches</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span> <span class="o">!</span><span class="nx">rbuggyQSA</span>     <span class="o">||</span> <span class="o">!</span><span class="nx">rbuggyQSA</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">expr</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-180" id="section-180">&#182;</a>
</div>
<p>IE 9's matchesSelector returns false on disconnected nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">||</span> <span class="nx">support</span><span class="p">.</span><span class="nx">disconnectedMatch</span> <span class="o">||</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-181" id="section-181">&#182;</a>
</div>
<p>As well, disconnected nodes are said to be in a document
fragment in IE 9</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">elem</span><span class="p">.</span><span class="nb">document</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">]</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-182" id="section-182">&#182;</a>
</div>
<p>Set document vars if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">context</span> <span class="p">)</span> <span class="o">!==</span> <span class="nb">document</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">setDocument</span><span class="p">(</span> <span class="nx">context</span> <span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">contains</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">attr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-183" id="section-183">&#182;</a>
</div>
<p>Set document vars if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">!==</span> <span class="nb">document</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">setDocument</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">],</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-184" id="section-184">&#182;</a>
</div>
<p>Don't get fooled by Object.prototype properties (jQuery #13807)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">val</span> <span class="o">=</span> <span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrHandle</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">)</span> <span class="o">?</span>
      <span class="nx">fn</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="o">!</span><span class="nx">documentIsHTML</span> <span class="p">)</span> <span class="o">:</span>
      <span class="kc">undefined</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">val</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">?</span>
    <span class="nx">val</span> <span class="o">:</span>
    <span class="nx">support</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">||</span> <span class="o">!</span><span class="nx">documentIsHTML</span> <span class="o">?</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">:</span>
      <span class="p">(</span><span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">val</span><span class="p">.</span><span class="nx">specified</span> <span class="o">?</span>
        <span class="nx">val</span><span class="p">.</span><span class="nx">value</span> <span class="o">:</span>
        <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">msg</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="s2">&quot;Syntax error, unrecognized expression: &quot;</span> <span class="o">+</span> <span class="nx">msg</span> <span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-185" id="section-185">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Document sorting and removing duplicates</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">results
</span>
      <span class="dox_type">ArrayLike</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">uniqueSort</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span>
    <span class="nx">duplicates</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-186" id="section-186">&#182;</a>
</div>
<p>Unless we <em>know</em> we can detect duplicates, assume their presence</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">hasDuplicate</span> <span class="o">=</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">detectDuplicates</span><span class="p">;</span>
  <span class="nx">sortInput</span> <span class="o">=</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">sortStable</span> <span class="o">&amp;&amp;</span> <span class="nx">results</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="nx">results</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span> <span class="nx">sortOrder</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">hasDuplicate</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">results</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="nx">duplicates</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">j</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">results</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">duplicates</span><span class="p">[</span> <span class="nx">j</span> <span class="p">],</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-187" id="section-187">&#182;</a>
</div>
<p>Clear input after sorting to release objects
See <a href='https://github.com/jquery/sizzle/pull/225'>https://github.com/jquery/sizzle/pull/225</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">sortInput</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-188" id="section-188">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Utility function for retrieving the text value of an array of DOM nodes</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">elem
</span>
      <span class="dox_type">Array</span>
      <span class="dox_type">Element</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">getText</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">getText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">node</span><span class="p">,</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">nodeType</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-189" id="section-189">&#182;</a>
</div>
<p>If no nodeType, this is expected to be an array</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-190" id="section-190">&#182;</a>
</div>
<p>Do not traverse comment nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">getText</span><span class="p">(</span> <span class="nx">node</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">||</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-191" id="section-191">&#182;</a>
</div>
<p>Use textContent for elements
innerText usage removed for consistency of new lines (jQuery #11153)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-192" id="section-192">&#182;</a>
</div>
<p>Traverse its children</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span> <span class="nx">elem</span><span class="p">;</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">getText</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeValue</span><span class="p">;</span>
  <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-193" id="section-193">&#182;</a>
</div>
<p>Do not include comment or processing instruction nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Expr</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">selectors</span> <span class="o">=</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-194" id="section-194">&#182;</a>
</div>
<p>Can be adjusted by the user</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">cacheLength</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>

  <span class="nx">createPseudo</span><span class="o">:</span> <span class="nx">markFunction</span><span class="p">,</span>

  <span class="nx">match</span><span class="o">:</span> <span class="nx">matchExpr</span><span class="p">,</span>

  <span class="nx">attrHandle</span><span class="o">:</span> <span class="p">{},</span>

  <span class="nx">find</span><span class="o">:</span> <span class="p">{},</span>

  <span class="nx">relative</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;&gt;&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="nx">dir</span><span class="o">:</span> <span class="s2">&quot;parentNode&quot;</span><span class="p">,</span> <span class="nx">first</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="s2">&quot; &quot;</span><span class="o">:</span> <span class="p">{</span> <span class="nx">dir</span><span class="o">:</span> <span class="s2">&quot;parentNode&quot;</span> <span class="p">},</span>
    <span class="s2">&quot;+&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="nx">dir</span><span class="o">:</span> <span class="s2">&quot;previousSibling&quot;</span><span class="p">,</span> <span class="nx">first</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="s2">&quot;~&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="nx">dir</span><span class="o">:</span> <span class="s2">&quot;previousSibling&quot;</span> <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">preFilter</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;ATTR&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">runescape</span><span class="p">,</span> <span class="nx">funescape</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-195" id="section-195">&#182;</a>
</div>
<p>Move the given value to match[3] whether quoted or unquoted</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">runescape</span><span class="p">,</span> <span class="nx">funescape</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;~=&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">match</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="s2">&quot;CHILD&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-196" id="section-196">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>matches from matchExpr["CHILD"]
1 type (only|nth|...)
2 what (child|of-type)
3 argument (even|odd|\d<em>|\d</em>n([+-]\d+)?|...)
4 xn-component of xn+y argument ([+-]?\d*n|)
5 sign of xn-component
6 x of xn-component
7 sign of y-component
8 y of y-component</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;nth&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-197" id="section-197">&#182;</a>
</div>
<p>nth-* requires argument</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-198" id="section-198">&#182;</a>
</div>
<p>numeric x and y parameters for Expr.filter.CHILD
remember that false/true cast respectively to 0/1</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="o">+</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">?</span> <span class="nx">match</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;even&quot;</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;odd&quot;</span> <span class="p">)</span> <span class="p">);</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="o">+</span><span class="p">(</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="nx">match</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;odd&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-199" id="section-199">&#182;</a>
</div>
<p>other types prohibit arguments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="s2">&quot;PSEUDO&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">excess</span><span class="p">,</span>
        <span class="nx">unquoted</span> <span class="o">=</span> <span class="o">!</span><span class="nx">match</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">matchExpr</span><span class="p">[</span><span class="s2">&quot;CHILD&quot;</span><span class="p">].</span><span class="nx">test</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-200" id="section-200">&#182;</a>
</div>
<p>Accept quoted arguments as-is</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-201" id="section-201">&#182;</a>
</div>
<p>Strip excess characters from unquoted arguments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">unquoted</span> <span class="o">&amp;&amp;</span> <span class="nx">rpseudo</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">unquoted</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-202" id="section-202">&#182;</a>
</div>
<p>Get excess from tokenize (recursively)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">(</span><span class="nx">excess</span> <span class="o">=</span> <span class="nx">tokenize</span><span class="p">(</span> <span class="nx">unquoted</span><span class="p">,</span> <span class="kc">true</span> <span class="p">))</span> <span class="o">&amp;&amp;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-203" id="section-203">&#182;</a>
</div>
<p>advance to the next closing parenthesis</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">(</span><span class="nx">excess</span> <span class="o">=</span> <span class="nx">unquoted</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="nx">unquoted</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">excess</span> <span class="p">)</span> <span class="o">-</span> <span class="nx">unquoted</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-204" id="section-204">&#182;</a>
</div>
<p>excess is a negative index</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">excess</span> <span class="p">);</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">unquoted</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">excess</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-205" id="section-205">&#182;</a>
</div>
<p>Return only captures needed by the pseudo filter method (type and argument)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">match</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">filter</span><span class="o">:</span> <span class="p">{</span>

    <span class="s2">&quot;TAG&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">nodeNameSelector</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">nodeNameSelector</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">runescape</span><span class="p">,</span> <span class="nx">funescape</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">nodeNameSelector</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="o">?</span>
        <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="p">}</span> <span class="o">:</span>
        <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">nodeName</span><span class="p">;</span>
        <span class="p">};</span>
    <span class="p">},</span>

    <span class="s2">&quot;CLASS&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">className</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">pattern</span> <span class="o">=</span> <span class="nx">classCache</span><span class="p">[</span> <span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">];</span>

      <span class="k">return</span> <span class="nx">pattern</span> <span class="o">||</span>
        <span class="p">(</span><span class="nx">pattern</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;(^|&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="o">+</span> <span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="nx">whitespace</span> <span class="o">+</span> <span class="s2">&quot;|$)&quot;</span> <span class="p">))</span> <span class="o">&amp;&amp;</span>
        <span class="nx">classCache</span><span class="p">(</span> <span class="nx">className</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
        <span class="p">});</span>
    <span class="p">},</span>

    <span class="s2">&quot;ATTR&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">operator</span><span class="p">,</span> <span class="nx">check</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">result</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">operator</span> <span class="o">===</span> <span class="s2">&quot;!=&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">operator</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">result</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">operator</span> <span class="o">===</span> <span class="s2">&quot;=&quot;</span> <span class="o">?</span> <span class="nx">result</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">:</span>
          <span class="nx">operator</span> <span class="o">===</span> <span class="s2">&quot;!=&quot;</span> <span class="o">?</span> <span class="nx">result</span> <span class="o">!==</span> <span class="nx">check</span> <span class="o">:</span>
          <span class="nx">operator</span> <span class="o">===</span> <span class="s2">&quot;^=&quot;</span> <span class="o">?</span> <span class="nx">check</span> <span class="o">&amp;&amp;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">check</span> <span class="p">)</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">:</span>
          <span class="nx">operator</span> <span class="o">===</span> <span class="s2">&quot;*=&quot;</span> <span class="o">?</span> <span class="nx">check</span> <span class="o">&amp;&amp;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">check</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span>
          <span class="nx">operator</span> <span class="o">===</span> <span class="s2">&quot;$=&quot;</span> <span class="o">?</span> <span class="nx">check</span> <span class="o">&amp;&amp;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="o">-</span><span class="nx">check</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">:</span>
          <span class="nx">operator</span> <span class="o">===</span> <span class="s2">&quot;~=&quot;</span> <span class="o">?</span> <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">result</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rwhitespace</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">check</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span>
          <span class="nx">operator</span> <span class="o">===</span> <span class="s2">&quot;|=&quot;</span> <span class="o">?</span> <span class="nx">result</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">||</span> <span class="nx">result</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">check</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">:</span>
          <span class="kc">false</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">},</span>

    <span class="s2">&quot;CHILD&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">what</span><span class="p">,</span> <span class="nx">argument</span><span class="p">,</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">last</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">simple</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;nth&quot;</span><span class="p">,</span>
        <span class="nx">forward</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="o">-</span><span class="mi">4</span> <span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;last&quot;</span><span class="p">,</span>
        <span class="nx">ofType</span> <span class="o">=</span> <span class="nx">what</span> <span class="o">===</span> <span class="s2">&quot;of-type&quot;</span><span class="p">;</span>

      <span class="k">return</span> <span class="nx">first</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">last</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-206" id="section-206">&#182;</a>
</div>
<p>Shortcut for :nth-*(n)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="o">!!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
        <span class="p">}</span> <span class="o">:</span>

        <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">cache</span><span class="p">,</span> <span class="nx">outerCache</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">diff</span><span class="p">,</span> <span class="nx">nodeIndex</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span>
            <span class="nx">dir</span> <span class="o">=</span> <span class="nx">simple</span> <span class="o">!==</span> <span class="nx">forward</span> <span class="o">?</span> <span class="s2">&quot;nextSibling&quot;</span> <span class="o">:</span> <span class="s2">&quot;previousSibling&quot;</span><span class="p">,</span>
            <span class="nx">parent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
            <span class="nx">name</span> <span class="o">=</span> <span class="nx">ofType</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">(),</span>
            <span class="nx">useCache</span> <span class="o">=</span> <span class="o">!</span><span class="nx">xml</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">ofType</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-207" id="section-207">&#182;</a>
</div>
<p>:(first|last|only)-(child|of-type)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">simple</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">while</span> <span class="p">(</span> <span class="nx">dir</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">node</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
                <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">ofType</span> <span class="o">?</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">name</span> <span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
                  <span class="p">}</span>
                <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-208" id="section-208">&#182;</a>
</div>
<p>Reverse direction for :only-* (if we haven't yet done so)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">start</span> <span class="o">=</span> <span class="nx">dir</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;only&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">start</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;nextSibling&quot;</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">start</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">forward</span> <span class="o">?</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">lastChild</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-209" id="section-209">&#182;</a>
</div>
<p>non-xml :nth-child(...) stores cache data on <code>parent</code></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">forward</span> <span class="o">&amp;&amp;</span> <span class="nx">useCache</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-210" id="section-210">&#182;</a>
</div>
<p>Seek <code>elem</code> from a previously-cached index</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">outerCache</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">parent</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{});</span>
              <span class="nx">cache</span> <span class="o">=</span> <span class="nx">outerCache</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
              <span class="nx">nodeIndex</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">dirruns</span> <span class="o">&amp;&amp;</span> <span class="nx">cache</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
              <span class="nx">diff</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">dirruns</span> <span class="o">&amp;&amp;</span> <span class="nx">cache</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
              <span class="nx">node</span> <span class="o">=</span> <span class="nx">nodeIndex</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span> <span class="nx">nodeIndex</span> <span class="p">];</span>

              <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="o">++</span><span class="nx">nodeIndex</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">]</span> <span class="o">||</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-211" id="section-211">&#182;</a>
</div>
<p>Fallback to seeking <code>elem</code> from the start</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="p">(</span><span class="nx">diff</span> <span class="o">=</span> <span class="nx">nodeIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="nx">start</span><span class="p">.</span><span class="nx">pop</span><span class="p">())</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-212" id="section-212">&#182;</a>
</div>
<p>When found, cache indexes on <code>parent</code> and break</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">++</span><span class="nx">diff</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span> <span class="o">===</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">outerCache</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">dirruns</span><span class="p">,</span> <span class="nx">nodeIndex</span><span class="p">,</span> <span class="nx">diff</span> <span class="p">];</span>
                  <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
              <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-213" id="section-213">&#182;</a>
</div>
<p>Use previously-cached element index if available</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">useCache</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">cache</span> <span class="o">=</span> <span class="p">(</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{}))[</span> <span class="nx">type</span> <span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">cache</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">dirruns</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">diff</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-214" id="section-214">&#182;</a>
</div>
<p>xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-215" id="section-215">&#182;</a>
</div>
<p>Use the same loop as above to seek <code>elem</code> from the start</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="o">++</span><span class="nx">nodeIndex</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">]</span> <span class="o">||</span>
                <span class="p">(</span><span class="nx">diff</span> <span class="o">=</span> <span class="nx">nodeIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="nx">start</span><span class="p">.</span><span class="nx">pop</span><span class="p">())</span> <span class="p">)</span> <span class="p">{</span>

                <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">ofType</span> <span class="o">?</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">name</span> <span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">++</span><span class="nx">diff</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-216" id="section-216">&#182;</a>
</div>
<p>Cache the index of each encountered element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">useCache</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="p">(</span><span class="nx">node</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">node</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{}))[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">dirruns</span><span class="p">,</span> <span class="nx">diff</span> <span class="p">];</span>
                  <span class="p">}</span>

                  <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span> <span class="o">===</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="k">break</span><span class="p">;</span>
                  <span class="p">}</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-217" id="section-217">&#182;</a>
</div>
<p>Incorporate the offset, then check against cycle size</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">diff</span> <span class="o">-=</span> <span class="nx">last</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">diff</span> <span class="o">===</span> <span class="nx">first</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">diff</span> <span class="o">%</span> <span class="nx">first</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">diff</span> <span class="o">/</span> <span class="nx">first</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">};</span>
    <span class="p">},</span>

    <span class="s2">&quot;PSEUDO&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">pseudo</span><span class="p">,</span> <span class="nx">argument</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-218" id="section-218">&#182;</a>
</div>
<p>pseudo-class names are case-insensitive
<a href='http://www.w3.org/TR/selectors/#pseudo-classes'>http://www.w3.org/TR/selectors/#pseudo-classes</a>
Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
Remember that setFilters inherits from pseudos</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">args</span><span class="p">,</span>
        <span class="nx">fn</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">[</span> <span class="nx">pseudo</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">setFilters</span><span class="p">[</span> <span class="nx">pseudo</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">||</span>
          <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;unsupported pseudo: &quot;</span> <span class="o">+</span> <span class="nx">pseudo</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-219" id="section-219">&#182;</a>
</div>
<p>The user may use createPseudo to indicate that
arguments are needed to create the filter function
just as Sizzle does</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">fn</span><span class="p">(</span> <span class="nx">argument</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-220" id="section-220">&#182;</a>
</div>
<p>But maintain support for old signatures</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">args</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">pseudo</span><span class="p">,</span> <span class="nx">pseudo</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">argument</span> <span class="p">];</span>
        <span class="k">return</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">setFilters</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span> <span class="nx">pseudo</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">)</span> <span class="o">?</span>
          <span class="nx">markFunction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">seed</span><span class="p">,</span> <span class="nx">matches</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">idx</span><span class="p">,</span>
              <span class="nx">matched</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">(</span> <span class="nx">seed</span><span class="p">,</span> <span class="nx">argument</span> <span class="p">),</span>
              <span class="nx">i</span> <span class="o">=</span> <span class="nx">matched</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">idx</span> <span class="o">=</span> <span class="nx">indexOf</span><span class="p">(</span> <span class="nx">seed</span><span class="p">,</span> <span class="nx">matched</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
              <span class="nx">seed</span><span class="p">[</span> <span class="nx">idx</span> <span class="p">]</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span> <span class="nx">matches</span><span class="p">[</span> <span class="nx">idx</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">matched</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">})</span> <span class="o">:</span>
          <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">fn</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
          <span class="p">};</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">fn</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">pseudos</span><span class="o">:</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-221" id="section-221">&#182;</a>
</div>
<p>Potentially complex pseudos</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;not&quot;</span><span class="o">:</span> <span class="nx">markFunction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-222" id="section-222">&#182;</a>
</div>
<p>Trim the selector passed to compile
to avoid treating leading and trailing
spaces as combinators</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="nx">results</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="nx">matcher</span> <span class="o">=</span> <span class="nx">compile</span><span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rtrim</span><span class="p">,</span> <span class="s2">&quot;$1&quot;</span> <span class="p">)</span> <span class="p">);</span>

      <span class="k">return</span> <span class="nx">matcher</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">?</span>
        <span class="nx">markFunction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">seed</span><span class="p">,</span> <span class="nx">matches</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span>
            <span class="nx">unmatched</span> <span class="o">=</span> <span class="nx">matcher</span><span class="p">(</span> <span class="nx">seed</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">xml</span><span class="p">,</span> <span class="p">[]</span> <span class="p">),</span>
            <span class="nx">i</span> <span class="o">=</span> <span class="nx">seed</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-223" id="section-223">&#182;</a>
</div>
<p>Match elements unmatched by <code>matcher</code></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">unmatched</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">seed</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">})</span> <span class="o">:</span>
        <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
          <span class="nx">matcher</span><span class="p">(</span> <span class="nx">input</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">xml</span><span class="p">,</span> <span class="nx">results</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-224" id="section-224">&#182;</a>
</div>
<p>Don't keep the element (issue #299)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">input</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="k">return</span> <span class="o">!</span><span class="nx">results</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="p">};</span>
    <span class="p">}),</span>

    <span class="s2">&quot;has&quot;</span><span class="o">:</span> <span class="nx">markFunction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">}),</span>

    <span class="s2">&quot;contains&quot;</span><span class="o">:</span> <span class="nx">markFunction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">runescape</span><span class="p">,</span> <span class="nx">funescape</span> <span class="p">);</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">||</span> <span class="nx">getText</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">}),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-225" id="section-225">&#182;</a>
</div>
<p>"Whether an element is represented by a :lang() selector
is based solely on the element's language value
being equal to the identifier C,
or beginning with the identifier C immediately followed by "-".
The matching of C against the element's language value is performed case-insensitively.
The identifier C does not have to be a valid language name."
<a href='http://www.w3.org/TR/selectors/#lang-pseudo'>http://www.w3.org/TR/selectors/#lang-pseudo</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;lang&quot;</span><span class="o">:</span> <span class="nx">markFunction</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">lang</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-226" id="section-226">&#182;</a>
</div>
<p>lang value must be a valid identifier</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">ridentifier</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">lang</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;unsupported lang: &quot;</span> <span class="o">+</span> <span class="nx">lang</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">lang</span> <span class="o">=</span> <span class="nx">lang</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">runescape</span><span class="p">,</span> <span class="nx">funescape</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elemLang</span><span class="p">;</span>
        <span class="k">do</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elemLang</span> <span class="o">=</span> <span class="nx">documentIsHTML</span> <span class="o">?</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">lang</span> <span class="o">:</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;xml:lang&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;lang&quot;</span><span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

            <span class="nx">elemLang</span> <span class="o">=</span> <span class="nx">elemLang</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
            <span class="k">return</span> <span class="nx">elemLang</span> <span class="o">===</span> <span class="nx">lang</span> <span class="o">||</span> <span class="nx">elemLang</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">lang</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">}),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-227" id="section-227">&#182;</a>
</div>
<p>Miscellaneous</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;target&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">hash</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">hash</span> <span class="o">&amp;&amp;</span> <span class="nx">hash</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="s2">&quot;root&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">docElem</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="s2">&quot;focus&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">hasFocus</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">hasFocus</span><span class="p">())</span> <span class="o">&amp;&amp;</span> <span class="o">!!</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">href</span> <span class="o">||</span> <span class="o">~</span><span class="nx">elem</span><span class="p">.</span><span class="nx">tabIndex</span><span class="p">);</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-228" id="section-228">&#182;</a>
</div>
<p>Boolean properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;enabled&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">===</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="s2">&quot;disabled&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="s2">&quot;checked&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-229" id="section-229">&#182;</a>
</div>
<p>In CSS3, :checked should return both checked and selected elements
<a href='http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked'>http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;option&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">selected</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="s2">&quot;selected&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-230" id="section-230">&#182;</a>
</div>
<p>Accessing this property makes selected-by-default
options in Safari work properly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selected</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-231" id="section-231">&#182;</a>
</div>
<p>Contents</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;empty&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-232" id="section-232">&#182;</a>
</div>
<p><a href='http://www.w3.org/TR/selectors/#empty-pseudo'>http://www.w3.org/TR/selectors/#empty-pseudo</a>
:empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
  but not by others (comment: 8; processing instruction: 7; etc.)
nodeType &lt; 6 works because attributes (2) do not appear as children</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span> <span class="nx">elem</span><span class="p">;</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">&lt;</span> <span class="mi">6</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="s2">&quot;parent&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="nx">Expr</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">[</span><span class="s2">&quot;empty&quot;</span><span class="p">](</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-233" id="section-233">&#182;</a>
</div>
<p>Element/input types</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;header&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">rheader</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="s2">&quot;input&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">rinputs</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="s2">&quot;button&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="s2">&quot;text&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">attr</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;text&quot;</span> <span class="o">&amp;&amp;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-234" id="section-234">&#182;</a>
</div>
<p>Support: IE&lt;8
New HTML5 attribute values (e.g., "search") appear with elem.type === "text"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">(</span> <span class="p">(</span><span class="nx">attr</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;text&quot;</span> <span class="p">);</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-235" id="section-235">&#182;</a>
</div>
<p>Position-in-collection</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;first&quot;</span><span class="o">:</span> <span class="nx">createPositionalPseudo</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
    <span class="p">}),</span>

    <span class="s2">&quot;last&quot;</span><span class="o">:</span> <span class="nx">createPositionalPseudo</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">matchIndexes</span><span class="p">,</span> <span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">];</span>
    <span class="p">}),</span>

    <span class="s2">&quot;eq&quot;</span><span class="o">:</span> <span class="nx">createPositionalPseudo</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">matchIndexes</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">argument</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">argument</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">argument</span> <span class="o">+</span> <span class="nx">length</span> <span class="o">:</span> <span class="nx">argument</span> <span class="p">];</span>
    <span class="p">}),</span>

    <span class="s2">&quot;even&quot;</span><span class="o">:</span> <span class="nx">createPositionalPseudo</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">matchIndexes</span><span class="p">,</span> <span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matchIndexes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">matchIndexes</span><span class="p">;</span>
    <span class="p">}),</span>

    <span class="s2">&quot;odd&quot;</span><span class="o">:</span> <span class="nx">createPositionalPseudo</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">matchIndexes</span><span class="p">,</span> <span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matchIndexes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">matchIndexes</span><span class="p">;</span>
    <span class="p">}),</span>

    <span class="s2">&quot;lt&quot;</span><span class="o">:</span> <span class="nx">createPositionalPseudo</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">matchIndexes</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">argument</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">argument</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">argument</span> <span class="o">+</span> <span class="nx">length</span> <span class="o">:</span> <span class="nx">argument</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="o">--</span><span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matchIndexes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">matchIndexes</span><span class="p">;</span>
    <span class="p">}),</span>

    <span class="s2">&quot;gt&quot;</span><span class="o">:</span> <span class="nx">createPositionalPseudo</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">matchIndexes</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">argument</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">argument</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">argument</span> <span class="o">+</span> <span class="nx">length</span> <span class="o">:</span> <span class="nx">argument</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matchIndexes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">matchIndexes</span><span class="p">;</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Expr</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">[</span><span class="s2">&quot;nth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">[</span><span class="s2">&quot;eq&quot;</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-236" id="section-236">&#182;</a>
</div>
<p>Add button/input type pseudos</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">{</span> <span class="nx">radio</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">checkbox</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">file</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">image</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">createInputPseudo</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">{</span> <span class="nx">submit</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">reset</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">createButtonPseudo</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-237" id="section-237">&#182;</a>
</div>
<p>Easy API for creating new setFilters</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">setFilters</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">setFilters</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">filters</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">;</span>
<span class="nx">Expr</span><span class="p">.</span><span class="nx">setFilters</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">setFilters</span><span class="p">();</span>

<span class="nx">tokenize</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">tokenize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">parseOnly</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">matched</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">tokens</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span>
    <span class="nx">soFar</span><span class="p">,</span> <span class="nx">groups</span><span class="p">,</span> <span class="nx">preFilters</span><span class="p">,</span>
    <span class="nx">cached</span> <span class="o">=</span> <span class="nx">tokenCache</span><span class="p">[</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">];</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">cached</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">parseOnly</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">cached</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">soFar</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
  <span class="nx">groups</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">preFilters</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">preFilter</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span> <span class="nx">soFar</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-238" id="section-238">&#182;</a>
</div>
<p>Comma and first run</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">matched</span> <span class="o">||</span> <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">rcomma</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">soFar</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-239" id="section-239">&#182;</a>
</div>
<p>Don't consume trailing commas as valid</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">soFar</span> <span class="o">=</span> <span class="nx">soFar</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">soFar</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">groups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="p">(</span><span class="nx">tokens</span> <span class="o">=</span> <span class="p">[])</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">matched</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-240" id="section-240">&#182;</a>
</div>
<p>Combinators</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">rcombinators</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">soFar</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">matched</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">tokens</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">value</span><span class="o">:</span> <span class="nx">matched</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-241" id="section-241">&#182;</a>
</div>
<p>Cast descendant combinators to space</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rtrim</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span>
      <span class="p">});</span>
      <span class="nx">soFar</span> <span class="o">=</span> <span class="nx">soFar</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">matched</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-242" id="section-242">&#182;</a>
</div>
<p>Filters</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">matchExpr</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">soFar</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">preFilters</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span>
        <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">preFilters</span><span class="p">[</span> <span class="nx">type</span> <span class="p">](</span> <span class="nx">match</span> <span class="p">)))</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matched</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
        <span class="nx">tokens</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
          <span class="nx">value</span><span class="o">:</span> <span class="nx">matched</span><span class="p">,</span>
          <span class="nx">type</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span>
          <span class="nx">matches</span><span class="o">:</span> <span class="nx">match</span>
        <span class="p">});</span>
        <span class="nx">soFar</span> <span class="o">=</span> <span class="nx">soFar</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">matched</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">matched</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-243" id="section-243">&#182;</a>
</div>
<p>Return the length of the invalid excess
if we're just parsing
Otherwise, throw an error or return tokens</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">parseOnly</span> <span class="o">?</span>
    <span class="nx">soFar</span><span class="p">.</span><span class="nx">length</span> <span class="o">:</span>
    <span class="nx">soFar</span> <span class="o">?</span>
      <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-244" id="section-244">&#182;</a>
</div>
<p>Cache the tokens</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">tokenCache</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">groups</span> <span class="p">).</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">toSelector</span><span class="p">(</span> <span class="nx">tokens</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">len</span> <span class="o">=</span> <span class="nx">tokens</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">selector</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">selector</span> <span class="o">+=</span> <span class="nx">tokens</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">selector</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">addCombinator</span><span class="p">(</span> <span class="nx">matcher</span><span class="p">,</span> <span class="nx">combinator</span><span class="p">,</span> <span class="nx">base</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">dir</span> <span class="o">=</span> <span class="nx">combinator</span><span class="p">.</span><span class="nx">dir</span><span class="p">,</span>
    <span class="nx">checkNonElements</span> <span class="o">=</span> <span class="nx">base</span> <span class="o">&amp;&amp;</span> <span class="nx">dir</span> <span class="o">===</span> <span class="s2">&quot;parentNode&quot;</span><span class="p">,</span>
    <span class="nx">doneName</span> <span class="o">=</span> <span class="nx">done</span><span class="o">++</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">combinator</span><span class="p">.</span><span class="nx">first</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-245" id="section-245">&#182;</a>
</div>
<p>Check against closest ancestor/preceding element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">checkNonElements</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">matcher</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-246" id="section-246">&#182;</a>
</div>
<p>Check against all ancestor/preceding elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">oldCache</span><span class="p">,</span> <span class="nx">outerCache</span><span class="p">,</span>
        <span class="nx">newCache</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">dirruns</span><span class="p">,</span> <span class="nx">doneName</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-247" id="section-247">&#182;</a>
</div>
<p>We can't set arbitrary data on XML nodes, so they don't benefit from dir caching</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">checkNonElements</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">matcher</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">checkNonElements</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">outerCache</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{});</span>
            <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">oldCache</span> <span class="o">=</span> <span class="nx">outerCache</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">])</span> <span class="o">&amp;&amp;</span>
              <span class="nx">oldCache</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">dirruns</span> <span class="o">&amp;&amp;</span> <span class="nx">oldCache</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">doneName</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-248" id="section-248">&#182;</a>
</div>
<p>Assign to newCache so results back-propagate to previous elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">return</span> <span class="p">(</span><span class="nx">newCache</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">oldCache</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-249" id="section-249">&#182;</a>
</div>
<p>Reuse newcache so results back-propagate to previous elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">outerCache</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">newCache</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-250" id="section-250">&#182;</a>
</div>
<p>A match means we're done; a fail means we have to keep checking</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">newCache</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">matcher</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">elementMatcher</span><span class="p">(</span> <span class="nx">matchers</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">matchers</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">matchers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">matchers</span><span class="p">[</span><span class="nx">i</span><span class="p">](</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="o">:</span>
    <span class="nx">matchers</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">multipleContexts</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">contexts</span><span class="p">,</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">len</span> <span class="o">=</span> <span class="nx">contexts</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">contexts</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">results</span> <span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">condense</span><span class="p">(</span> <span class="nx">unmatched</span><span class="p">,</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">filter</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span>
    <span class="nx">newUnmatched</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">len</span> <span class="o">=</span> <span class="nx">unmatched</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">mapped</span> <span class="o">=</span> <span class="nx">map</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">unmatched</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">filter</span> <span class="o">||</span> <span class="nx">filter</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">newUnmatched</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">mapped</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">map</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">newUnmatched</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">setMatcher</span><span class="p">(</span> <span class="nx">preFilter</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">matcher</span><span class="p">,</span> <span class="nx">postFilter</span><span class="p">,</span> <span class="nx">postFinder</span><span class="p">,</span> <span class="nx">postSelector</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">postFilter</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">postFilter</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">postFilter</span> <span class="o">=</span> <span class="nx">setMatcher</span><span class="p">(</span> <span class="nx">postFilter</span> <span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">postFinder</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">postFinder</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">postFinder</span> <span class="o">=</span> <span class="nx">setMatcher</span><span class="p">(</span> <span class="nx">postFinder</span><span class="p">,</span> <span class="nx">postSelector</span> <span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">markFunction</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">seed</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">temp</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span>
      <span class="nx">preMap</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">postMap</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">preexisting</span> <span class="o">=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-251" id="section-251">&#182;</a>
</div>
<p>Get initial elements from seed or context</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">elems</span> <span class="o">=</span> <span class="nx">seed</span> <span class="o">||</span> <span class="nx">multipleContexts</span><span class="p">(</span> <span class="nx">selector</span> <span class="o">||</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">context</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">context</span><span class="p">,</span> <span class="p">[]</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-252" id="section-252">&#182;</a>
</div>
<p>Prefilter to get matcher input, preserving a map for seed-results synchronization</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">matcherIn</span> <span class="o">=</span> <span class="nx">preFilter</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">seed</span> <span class="o">||</span> <span class="o">!</span><span class="nx">selector</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nx">condense</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">preMap</span><span class="p">,</span> <span class="nx">preFilter</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">elems</span><span class="p">,</span>

      <span class="nx">matcherOut</span> <span class="o">=</span> <span class="nx">matcher</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-253" id="section-253">&#182;</a>
</div>
<p>If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">postFinder</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">seed</span> <span class="o">?</span> <span class="nx">preFilter</span> <span class="o">:</span> <span class="nx">preexisting</span> <span class="o">||</span> <span class="nx">postFilter</span> <span class="p">)</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-254" id="section-254">&#182;</a>
</div>
<p>...intermediate processing is necessary</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="p">[]</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-255" id="section-255">&#182;</a>
</div>
<p>...otherwise use results directly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">results</span> <span class="o">:</span>
        <span class="nx">matcherIn</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-256" id="section-256">&#182;</a>
</div>
<p>Find primary matches</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">matcher</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">matcher</span><span class="p">(</span> <span class="nx">matcherIn</span><span class="p">,</span> <span class="nx">matcherOut</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-257" id="section-257">&#182;</a>
</div>
<p>Apply postFilter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">postFilter</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">temp</span> <span class="o">=</span> <span class="nx">condense</span><span class="p">(</span> <span class="nx">matcherOut</span><span class="p">,</span> <span class="nx">postMap</span> <span class="p">);</span>
      <span class="nx">postFilter</span><span class="p">(</span> <span class="nx">temp</span><span class="p">,</span> <span class="p">[],</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-258" id="section-258">&#182;</a>
</div>
<p>Un-match failing elements by moving them back to matcherIn</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">i</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">matcherOut</span><span class="p">[</span> <span class="nx">postMap</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">matcherIn</span><span class="p">[</span> <span class="nx">postMap</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">postFinder</span> <span class="o">||</span> <span class="nx">preFilter</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">postFinder</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-259" id="section-259">&#182;</a>
</div>
<p>Get the final matcherOut by condensing this intermediate into postFinder contexts</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">temp</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="nx">i</span> <span class="o">=</span> <span class="nx">matcherOut</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">matcherOut</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-260" id="section-260">&#182;</a>
</div>
<p>Restore matcherIn since elem is not yet a final match</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">temp</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="p">(</span><span class="nx">matcherIn</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">)</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="nx">postFinder</span><span class="p">(</span> <span class="kc">null</span><span class="p">,</span> <span class="p">(</span><span class="nx">matcherOut</span> <span class="o">=</span> <span class="p">[]),</span> <span class="nx">temp</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-261" id="section-261">&#182;</a>
</div>
<p>Move matched elements from seed to results to keep them synchronized</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">i</span> <span class="o">=</span> <span class="nx">matcherOut</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">matcherOut</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
            <span class="p">(</span><span class="nx">temp</span> <span class="o">=</span> <span class="nx">postFinder</span> <span class="o">?</span> <span class="nx">indexOf</span><span class="p">(</span> <span class="nx">seed</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">preMap</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>

            <span class="nx">seed</span><span class="p">[</span><span class="nx">temp</span><span class="p">]</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">results</span><span class="p">[</span><span class="nx">temp</span><span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-262" id="section-262">&#182;</a>
</div>
<p>Add elements to results, through postFinder if defined</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">matcherOut</span> <span class="o">=</span> <span class="nx">condense</span><span class="p">(</span>
        <span class="nx">matcherOut</span> <span class="o">===</span> <span class="nx">results</span> <span class="o">?</span>
          <span class="nx">matcherOut</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">preexisting</span><span class="p">,</span> <span class="nx">matcherOut</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">matcherOut</span>
      <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">postFinder</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">postFinder</span><span class="p">(</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">matcherOut</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">matcherOut</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">matcherFromTokens</span><span class="p">(</span> <span class="nx">tokens</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">checkContext</span><span class="p">,</span> <span class="nx">matcher</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span>
    <span class="nx">len</span> <span class="o">=</span> <span class="nx">tokens</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">leadingRelative</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">type</span> <span class="p">],</span>
    <span class="nx">implicitRelative</span> <span class="o">=</span> <span class="nx">leadingRelative</span> <span class="o">||</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span><span class="s2">&quot; &quot;</span><span class="p">],</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">leadingRelative</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-263" id="section-263">&#182;</a>
</div>
<p>The foundational matcher ensures that elements are reachable from top-level context(s)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">matchContext</span> <span class="o">=</span> <span class="nx">addCombinator</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">checkContext</span><span class="p">;</span>
    <span class="p">},</span> <span class="nx">implicitRelative</span><span class="p">,</span> <span class="kc">true</span> <span class="p">),</span>
    <span class="nx">matchAnyContext</span> <span class="o">=</span> <span class="nx">addCombinator</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">indexOf</span><span class="p">(</span> <span class="nx">checkContext</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span> <span class="nx">implicitRelative</span><span class="p">,</span> <span class="kc">true</span> <span class="p">),</span>
    <span class="nx">matchers</span> <span class="o">=</span> <span class="p">[</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">(</span> <span class="o">!</span><span class="nx">leadingRelative</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">xml</span> <span class="o">||</span> <span class="nx">context</span> <span class="o">!==</span> <span class="nx">outermostContext</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="p">(</span>
        <span class="p">(</span><span class="nx">checkContext</span> <span class="o">=</span> <span class="nx">context</span><span class="p">).</span><span class="nx">nodeType</span> <span class="o">?</span>
          <span class="nx">matchContext</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">matchAnyContext</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-264" id="section-264">&#182;</a>
</div>
<p>Avoid hanging onto element (issue #299)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">checkContext</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span> <span class="p">];</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">matcher</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">tokens</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">matchers</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">addCombinator</span><span class="p">(</span><span class="nx">elementMatcher</span><span class="p">(</span> <span class="nx">matchers</span> <span class="p">),</span> <span class="nx">matcher</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">matcher</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">filter</span><span class="p">[</span> <span class="nx">tokens</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">tokens</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">matches</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-265" id="section-265">&#182;</a>
</div>
<p>Return special upon seeing a positional matcher</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">matcher</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-266" id="section-266">&#182;</a>
</div>
<p>Find the next relative operator (if any) for proper handling</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">j</span> <span class="o">=</span> <span class="o">++</span><span class="nx">i</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">tokens</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">setMatcher</span><span class="p">(</span>
          <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">elementMatcher</span><span class="p">(</span> <span class="nx">matchers</span> <span class="p">),</span>
          <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">toSelector</span><span class="p">(</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-267" id="section-267">&#182;</a>
</div>
<p>If the preceding token was a descendant combinator, insert an implicit any-element <code>*</code></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">tokens</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">).</span><span class="nx">concat</span><span class="p">({</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">tokens</span><span class="p">[</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">2</span> <span class="p">].</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot; &quot;</span> <span class="o">?</span> <span class="s2">&quot;*&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">})</span>
          <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rtrim</span><span class="p">,</span> <span class="s2">&quot;$1&quot;</span> <span class="p">),</span>
          <span class="nx">matcher</span><span class="p">,</span>
          <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span> <span class="o">&amp;&amp;</span> <span class="nx">matcherFromTokens</span><span class="p">(</span> <span class="nx">tokens</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="p">)</span> <span class="p">),</span>
          <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="o">&amp;&amp;</span> <span class="nx">matcherFromTokens</span><span class="p">(</span> <span class="p">(</span><span class="nx">tokens</span> <span class="o">=</span> <span class="nx">tokens</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">j</span> <span class="p">))</span> <span class="p">),</span>
          <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">len</span> <span class="o">&amp;&amp;</span> <span class="nx">toSelector</span><span class="p">(</span> <span class="nx">tokens</span> <span class="p">)</span>
        <span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">matchers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">matcher</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">elementMatcher</span><span class="p">(</span> <span class="nx">matchers</span> <span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">matcherFromGroupMatchers</span><span class="p">(</span> <span class="nx">elementMatchers</span><span class="p">,</span> <span class="nx">setMatchers</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">bySet</span> <span class="o">=</span> <span class="nx">setMatchers</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">byElement</span> <span class="o">=</span> <span class="nx">elementMatchers</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">superMatcher</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">seed</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">outermost</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">matcher</span><span class="p">,</span>
        <span class="nx">matchedCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
        <span class="nx">unmatched</span> <span class="o">=</span> <span class="nx">seed</span> <span class="o">&amp;&amp;</span> <span class="p">[],</span>
        <span class="nx">setMatched</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="nx">contextBackup</span> <span class="o">=</span> <span class="nx">outermostContext</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-268" id="section-268">&#182;</a>
</div>
<p>We must always have either seed elements or outermost context</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">elems</span> <span class="o">=</span> <span class="nx">seed</span> <span class="o">||</span> <span class="nx">byElement</span> <span class="o">&amp;&amp;</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">[</span><span class="s2">&quot;TAG&quot;</span><span class="p">](</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="nx">outermost</span> <span class="p">),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-269" id="section-269">&#182;</a>
</div>
<p>Use integer dirruns iff this is the outermost matcher</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">dirrunsUnique</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dirruns</span> <span class="o">+=</span> <span class="nx">contextBackup</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">||</span> <span class="mf">0.1</span><span class="p">),</span>
        <span class="nx">len</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">outermost</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">outermostContext</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">!==</span> <span class="nb">document</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-270" id="section-270">&#182;</a>
</div>
<p>Add elements passing elementMatchers directly to results
Keep <code>i</code> a string if there are no elements so <code>matchedCount</code> will be "00" below
Support: IE&lt;9, Safari
Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">!==</span> <span class="nx">len</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">byElement</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">matcher</span> <span class="o">=</span> <span class="nx">elementMatchers</span><span class="p">[</span><span class="nx">j</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">matcher</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">outermost</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">dirruns</span> <span class="o">=</span> <span class="nx">dirrunsUnique</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-271" id="section-271">&#182;</a>
</div>
<p>Track unmatched elements for set filters</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">bySet</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-272" id="section-272">&#182;</a>
</div>
<p>They will have gone through all possible matchers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="o">!</span><span class="nx">matcher</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">matchedCount</span><span class="o">--</span><span class="p">;</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-273" id="section-273">&#182;</a>
</div>
<p>Lengthen the array for every element, matched or not</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">unmatched</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-274" id="section-274">&#182;</a>
</div>
<p>Apply set filters to unmatched elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">matchedCount</span> <span class="o">+=</span> <span class="nx">i</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">bySet</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">!==</span> <span class="nx">matchedCount</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">matcher</span> <span class="o">=</span> <span class="nx">setMatchers</span><span class="p">[</span><span class="nx">j</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">matcher</span><span class="p">(</span> <span class="nx">unmatched</span><span class="p">,</span> <span class="nx">setMatched</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">xml</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-275" id="section-275">&#182;</a>
</div>
<p>Reintegrate element matches to eliminate the need for sorting</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">matchedCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="nx">unmatched</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">||</span> <span class="nx">setMatched</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">setMatched</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">pop</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">results</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-276" id="section-276">&#182;</a>
</div>
<p>Discard index placeholder values to get only actual matches</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">setMatched</span> <span class="o">=</span> <span class="nx">condense</span><span class="p">(</span> <span class="nx">setMatched</span> <span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-277" id="section-277">&#182;</a>
</div>
<p>Add matches to results</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">setMatched</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-278" id="section-278">&#182;</a>
</div>
<p>Seedless set matches succeeding multiple successful matchers stipulate sorting</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">outermost</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">seed</span> <span class="o">&amp;&amp;</span> <span class="nx">setMatched</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span>
          <span class="p">(</span> <span class="nx">matchedCount</span> <span class="o">+</span> <span class="nx">setMatchers</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">uniqueSort</span><span class="p">(</span> <span class="nx">results</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-279" id="section-279">&#182;</a>
</div>
<p>Override manipulation of globals by nested matchers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">outermost</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">dirruns</span> <span class="o">=</span> <span class="nx">dirrunsUnique</span><span class="p">;</span>
        <span class="nx">outermostContext</span> <span class="o">=</span> <span class="nx">contextBackup</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">unmatched</span><span class="p">;</span>
    <span class="p">};</span>

  <span class="k">return</span> <span class="nx">bySet</span> <span class="o">?</span>
    <span class="nx">markFunction</span><span class="p">(</span> <span class="nx">superMatcher</span> <span class="p">)</span> <span class="o">:</span>
    <span class="nx">superMatcher</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">compile</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">compile</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">match</span> <span class="cm">/* Internal Use Only */</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
    <span class="nx">setMatchers</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">elementMatchers</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">cached</span> <span class="o">=</span> <span class="nx">compilerCache</span><span class="p">[</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">];</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cached</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-280" id="section-280">&#182;</a>
</div>
<p>Generate a function of recursive functions that can be used to check each element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">match</span> <span class="o">=</span> <span class="nx">tokenize</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">cached</span> <span class="o">=</span> <span class="nx">matcherFromTokens</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">cached</span><span class="p">[</span> <span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">setMatchers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">cached</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">elementMatchers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">cached</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-281" id="section-281">&#182;</a>
</div>
<p>Cache the compiled function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">cached</span> <span class="o">=</span> <span class="nx">compilerCache</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">matcherFromGroupMatchers</span><span class="p">(</span> <span class="nx">elementMatchers</span><span class="p">,</span> <span class="nx">setMatchers</span> <span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-282" id="section-282">&#182;</a>
</div>
<p>Save selector and tokenization</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">cached</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">cached</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-283" id="section-283">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>A low-level selection function that works with Sizzle's compiled
 selector functions</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">selector</span>
      <span class="dox_type">String</span>
      <span class="dox_type">Function</span>
      <span>A selector or a pre-compiled
 selector function built with Sizzle.compile</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">context</span>
      <span class="dox_type">Element</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">[results]</span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">[seed]</span>
      <span class="dox_type">Array</span>
      <span>A set of elements to match against</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">select</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">select</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">tokens</span><span class="p">,</span> <span class="nx">token</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">find</span><span class="p">,</span>
    <span class="nx">compiled</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">,</span>
    <span class="nx">match</span> <span class="o">=</span> <span class="o">!</span><span class="nx">seed</span> <span class="o">&amp;&amp;</span> <span class="nx">tokenize</span><span class="p">(</span> <span class="p">(</span><span class="nx">selector</span> <span class="o">=</span> <span class="nx">compiled</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="nx">selector</span><span class="p">)</span> <span class="p">);</span>

  <span class="nx">results</span> <span class="o">=</span> <span class="nx">results</span> <span class="o">||</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-284" id="section-284">&#182;</a>
</div>
<p>Try to minimize operations if there is no seed and only one group</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-285" id="section-285">&#182;</a>
</div>
<p>Take a shortcut and set the context if the root selector is an ID</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">tokens</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">tokens</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">token</span> <span class="o">=</span> <span class="nx">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;ID&quot;</span> <span class="o">&amp;&amp;</span>
        <span class="nx">support</span><span class="p">.</span><span class="nx">getById</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="nx">documentIsHTML</span> <span class="o">&amp;&amp;</span>
        <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">context</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">](</span> <span class="nx">token</span><span class="p">.</span><span class="nx">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="nx">runescape</span><span class="p">,</span> <span class="nx">funescape</span><span class="p">),</span> <span class="nx">context</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[]</span> <span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-286" id="section-286">&#182;</a>
</div>
<p>Precompiled matchers will still verify ancestry, so step up a level</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">compiled</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">tokens</span><span class="p">.</span><span class="nx">shift</span><span class="p">().</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-287" id="section-287">&#182;</a>
</div>
<p>Fetch a seed set for right-to-left matching</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">matchExpr</span><span class="p">[</span><span class="s2">&quot;needsContext&quot;</span><span class="p">].</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">tokens</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">token</span> <span class="o">=</span> <span class="nx">tokens</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-288" id="section-288">&#182;</a>
</div>
<p>Abort if we hit a combinator</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="p">(</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">token</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">find</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">[</span> <span class="nx">type</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-289" id="section-289">&#182;</a>
</div>
<p>Search, expanding context for leading sibling combinators</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">seed</span> <span class="o">=</span> <span class="nx">find</span><span class="p">(</span>
          <span class="nx">token</span><span class="p">.</span><span class="nx">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">runescape</span><span class="p">,</span> <span class="nx">funescape</span> <span class="p">),</span>
          <span class="nx">rsibling</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">type</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">testContext</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">context</span>
        <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-290" id="section-290">&#182;</a>
</div>
<p>If seed is empty or no tokens remain, we can return early</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">tokens</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
          <span class="nx">selector</span> <span class="o">=</span> <span class="nx">seed</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">toSelector</span><span class="p">(</span> <span class="nx">tokens</span> <span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">);</span>
            <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-291" id="section-291">&#182;</a>
</div>
<p>Compile and execute a filtering function if one is not provided
Provide <code>match</code> to avoid retokenization if we modified the selector above</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">(</span> <span class="nx">compiled</span> <span class="o">||</span> <span class="nx">compile</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">)(</span>
    <span class="nx">seed</span><span class="p">,</span>
    <span class="nx">context</span><span class="p">,</span>
    <span class="o">!</span><span class="nx">documentIsHTML</span><span class="p">,</span>
    <span class="nx">results</span><span class="p">,</span>
    <span class="nx">rsibling</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">testContext</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">context</span>
  <span class="p">);</span>
  <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-292" id="section-292">&#182;</a>
</div>
<p>One-time assignments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-293" id="section-293">&#182;</a>
</div>
<p>Sort stability</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">support</span><span class="p">.</span><span class="nx">sortStable</span> <span class="o">=</span> <span class="nx">expando</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">sort</span><span class="p">(</span> <span class="nx">sortOrder</span> <span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">expando</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-294" id="section-294">&#182;</a>
</div>
<p>Support: Chrome 14-35+
Always assume duplicates if they aren't passed to the comparison function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">support</span><span class="p">.</span><span class="nx">detectDuplicates</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">hasDuplicate</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-295" id="section-295">&#182;</a>
</div>
<p>Initialize against the default document</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">setDocument</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-296" id="section-296">&#182;</a>
</div>
<p>Support: Webkit&lt;537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
Detached nodes confoundingly follow <em>each other</em></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">support</span><span class="p">.</span><span class="nx">sortDetached</span> <span class="o">=</span> <span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div1</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-297" id="section-297">&#182;</a>
</div>
<p>Should return 1, but returns 4 (following)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">div1</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-298" id="section-298">&#182;</a>
</div>
<p>Support: IE&lt;8
Prevent attribute/property "interpolation"
<a href='http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx'>http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;a href=&#39;#&#39;&gt;&lt;/a&gt;&quot;</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;#&quot;</span> <span class="p">;</span>
<span class="p">})</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">addHandle</span><span class="p">(</span> <span class="s2">&quot;type|href|height|width&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;type&quot;</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">2</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-299" id="section-299">&#182;</a>
</div>
<p>Support: IE&lt;9
Use defaultValue in place of getAttribute("value")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">||</span> <span class="o">!</span><span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;input/&gt;&quot;</span><span class="p">;</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
  <span class="k">return</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;value&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="p">})</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">addHandle</span><span class="p">(</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-300" id="section-300">&#182;</a>
</div>
<p>Support: IE&lt;9
Use getAttributeNode to fetch booleans when getAttribute lies</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">assert</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">div</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">})</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">addHandle</span><span class="p">(</span> <span class="nx">booleans</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">val</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">?</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">:</span>
          <span class="p">(</span><span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">val</span><span class="p">.</span><span class="nx">specified</span> <span class="o">?</span>
          <span class="nx">val</span><span class="p">.</span><span class="nx">value</span> <span class="o">:</span>
        <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="k">return</span> <span class="nx">Sizzle</span><span class="p">;</span>

<span class="p">})(</span> <span class="nb">window</span> <span class="p">);</span>



<span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">selectors</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">[</span><span class="s2">&quot;:&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">uniqueSort</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">getText</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">contains</span><span class="p">;</span>



<span class="kd">var</span> <span class="nx">rneedsContext</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">needsContext</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">rsingleTag</span> <span class="o">=</span> <span class="p">(</span><span class="sr">/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;|)$/</span><span class="p">);</span>



<span class="kd">var</span> <span class="nx">risSimple</span> <span class="o">=</span> <span class="sr">/^.[^:#\[\.,]*$/</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-301" id="section-301">&#182;</a>
</div>
<p>Implement the identical functionality for filter and not</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">winnow</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="nx">qualifier</span><span class="p">,</span> <span class="nx">not</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="cm">/* jshint -W018 */</span>
      <span class="k">return</span> <span class="o">!!</span><span class="nx">qualifier</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">!==</span> <span class="nx">not</span><span class="p">;</span>
    <span class="p">});</span>

  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">qualifier</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="o">!==</span> <span class="nx">not</span><span class="p">;</span>
    <span class="p">});</span>

  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">qualifier</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">risSimple</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">qualifier</span><span class="p">,</span> <span class="nx">elements</span><span class="p">,</span> <span class="nx">not</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">qualifier</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">qualifier</span><span class="p">,</span> <span class="nx">elements</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">!==</span> <span class="nx">not</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">not</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">not</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">expr</span> <span class="o">=</span> <span class="s2">&quot;:not(&quot;</span> <span class="o">+</span> <span class="nx">expr</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">matchesSelector</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">expr</span> <span class="p">)</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[]</span> <span class="o">:</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}));</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">find</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
      <span class="nx">len</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">self</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">})</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">self</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">ret</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-302" id="section-302">&#182;</a>
</div>
<p>Needed because $( selector, context ) becomes $( context ).find( selector )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">ret</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">len</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span> <span class="p">);</span>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">selector</span> <span class="o">:</span> <span class="nx">selector</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">winnow</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span> <span class="o">||</span> <span class="p">[],</span> <span class="kc">false</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">not</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">winnow</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span> <span class="o">||</span> <span class="p">[],</span> <span class="kc">true</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">is</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!!</span><span class="nx">winnow</span><span class="p">(</span>
      <span class="k">this</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-303" id="section-303">&#182;</a>
</div>
<p>If this is a positional/relative selector, check membership in the returned set
so $("p:first").is("p:last") won't return true for a doc with two "p".</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">rneedsContext</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">selector</span> <span class="o">||</span> <span class="p">[],</span>
      <span class="kc">false</span>
    <span class="p">).</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-304" id="section-304">&#182;</a>
</div>
<p>Initialize a jQuery object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-305" id="section-305">&#182;</a>
</div>
<p>A central reference to the root jQuery(document)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">rootjQuery</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-306" id="section-306">&#182;</a>
</div>
<p>Use the correct document accordingly with window argument (sandbox)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nb">document</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-307" id="section-307">&#182;</a>
</div>
<p>A simple way to check for HTML strings
Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
Strict HTML recognition (#11290: must start with &lt;)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rquickExpr</span> <span class="o">=</span> <span class="sr">/^(?:\s*(&lt;[\w\W]+&gt;)[^&gt;]*|#([\w-]*))$/</span><span class="p">,</span>

  <span class="nx">init</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-308" id="section-308">&#182;</a>
</div>
<p>HANDLE: $(""), $(null), $(undefined), $(false)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-309" id="section-309">&#182;</a>
</div>
<p>Handle HTML strings</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-310" id="section-310">&#182;</a>
</div>
<p>Assume that strings that start and end with &lt;> are HTML and skip the regex check</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">match</span> <span class="o">=</span> <span class="p">[</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">null</span> <span class="p">];</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">match</span> <span class="o">=</span> <span class="nx">rquickExpr</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-311" id="section-311">&#182;</a>
</div>
<p>Match html or make sure no context is specified for #id</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="o">!</span><span class="nx">context</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-312" id="section-312">&#182;</a>
</div>
<p>HANDLE: $(html) -> $(array)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">jQuery</span> <span class="o">?</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">context</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-313" id="section-313">&#182;</a>
</div>
<p>scripts is true for back-compat
Intentionally let the error be thrown if parseHTML is not present</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseHTML</span><span class="p">(</span>
            <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">context</span> <span class="o">:</span> <span class="nb">document</span><span class="p">,</span>
            <span class="kc">true</span>
          <span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-314" id="section-314">&#182;</a>
</div>
<p>HANDLE: $(html, props)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">rsingleTag</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">match</span> <span class="k">in</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-315" id="section-315">&#182;</a>
</div>
<p>Properties of context are called as methods if possible</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span> <span class="nx">match</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">[</span> <span class="nx">match</span> <span class="p">](</span> <span class="nx">context</span><span class="p">[</span> <span class="nx">match</span> <span class="p">]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-316" id="section-316">&#182;</a>
</div>
<p>...and otherwise set as attributes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span><span class="p">[</span> <span class="nx">match</span> <span class="p">]</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-317" id="section-317">&#182;</a>
</div>
<p>HANDLE: $(#id)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-318" id="section-318">&#182;</a>
</div>
<p>Check parentNode to catch when Blackberry 4.6 returns
nodes that are no longer in the document #6963</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-319" id="section-319">&#182;</a>
</div>
<p>Handle the case where IE and Opera return items
by name instead of ID</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">rootjQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-320" id="section-320">&#182;</a>
</div>
<p>Otherwise, we inject the element directly into the jQuery object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="nb">document</span><span class="p">;</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-321" id="section-321">&#182;</a>
</div>
<p>HANDLE: $(expr, $(...))</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">context</span> <span class="o">||</span> <span class="nx">context</span><span class="p">.</span><span class="nx">jquery</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span> <span class="nx">context</span> <span class="o">||</span> <span class="nx">rootjQuery</span> <span class="p">).</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-322" id="section-322">&#182;</a>
</div>
<p>HANDLE: $(expr, context)
(which is just equivalent to: $(context).find(expr)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span> <span class="nx">context</span> <span class="p">).</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-323" id="section-323">&#182;</a>
</div>
<p>HANDLE: $(DOMElement)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-324" id="section-324">&#182;</a>
</div>
<p>HANDLE: $(function)
Shortcut for document ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">typeof</span> <span class="nx">rootjQuery</span><span class="p">.</span><span class="nx">ready</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">?</span>
        <span class="nx">rootjQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-325" id="section-325">&#182;</a>
</div>
<p>Execute immediately if ready is not present</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">selector</span><span class="p">(</span> <span class="nx">jQuery</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">selector</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">selector</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-326" id="section-326">&#182;</a>
</div>
<p>Give the init function the jQuery prototype for later instantiation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">init</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-327" id="section-327">&#182;</a>
</div>
<p>Initialize central reference</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">rootjQuery</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nb">document</span> <span class="p">);</span>


<span class="kd">var</span> <span class="nx">rparentsprev</span> <span class="o">=</span> <span class="sr">/^(?:parents|prev(?:Until|All))/</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-328" id="section-328">&#182;</a>
</div>
<p>methods guaranteed to produce a unique set when starting from a unique set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">guaranteedUnique</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">children</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">contents</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">next</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">prev</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">dir</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">matched</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">];</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">until</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">).</span><span class="nx">is</span><span class="p">(</span> <span class="nx">until</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matched</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">matched</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">sibling</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">n</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">n</span> <span class="o">!==</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">r</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">n</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">r</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">has</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">target</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
      <span class="nx">targets</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="k">this</span> <span class="p">),</span>
      <span class="nx">len</span> <span class="o">=</span> <span class="nx">targets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">targets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">closest</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selectors</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cur</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">matched</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">pos</span> <span class="o">=</span> <span class="nx">rneedsContext</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selectors</span> <span class="p">)</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">selectors</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selectors</span><span class="p">,</span> <span class="nx">context</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="p">)</span> <span class="o">:</span>
        <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span> <span class="o">!==</span> <span class="nx">context</span><span class="p">;</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-329" id="section-329">&#182;</a>
</div>
<p>Always skip document fragments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">&lt;</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">pos</span> <span class="o">?</span>
          <span class="nx">pos</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="nx">cur</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-330" id="section-330">&#182;</a>
</div>
<p>Don't pass non-elements to Sizzle</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">matchesSelector</span><span class="p">(</span><span class="nx">cur</span><span class="p">,</span> <span class="nx">selectors</span><span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nx">matched</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">matched</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span> <span class="nx">matched</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">matched</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-331" id="section-331">&#182;</a>
</div>
<p>Determine the position of an element within
the matched set of elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-332" id="section-332">&#182;</a>
</div>
<p>No argument, return index in parent</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">first</span><span class="p">().</span><span class="nx">prevAll</span><span class="p">().</span><span class="nx">length</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-333" id="section-333">&#182;</a>
</div>
<p>index in selector</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-334" id="section-334">&#182;</a>
</div>
<p>Locate the position of the desired element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-335" id="section-335">&#182;</a>
</div>
<p>If it receives a jQuery object, the first element is used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(),</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">)</span>
      <span class="p">)</span>
    <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">addBack</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">selector</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">sibling</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">dir</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">do</span> <span class="p">{</span>
    <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">];</span>
  <span class="p">}</span> <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">);</span>

  <span class="k">return</span> <span class="nx">cur</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">parent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">11</span> <span class="o">?</span> <span class="nx">parent</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">parents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;parentNode&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">parentsUntil</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;parentNode&quot;</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">next</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">sibling</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;nextSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">prev</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">sibling</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;previousSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">nextAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;nextSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">prevAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;previousSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">nextUntil</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;nextSibling&quot;</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">prevUntil</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;previousSibling&quot;</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">siblings</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">sibling</span><span class="p">(</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">||</span> <span class="p">{}</span> <span class="p">).</span><span class="nx">firstChild</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">children</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">sibling</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">contents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;iframe&quot;</span> <span class="p">)</span> <span class="o">?</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">contentDocument</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">contentWindow</span><span class="p">.</span><span class="nb">document</span> <span class="o">:</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="p">[],</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">until</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="o">-</span><span class="mi">5</span> <span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;Until&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">selector</span> <span class="o">=</span> <span class="nx">until</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">ret</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-336" id="section-336">&#182;</a>
</div>
<p>Remove duplicates</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">guaranteedUnique</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-337" id="section-337">&#182;</a>
</div>
<p>Reverse order for parents* and prev-derivatives</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rparentsprev</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">rnotwhite</span> <span class="o">=</span> <span class="p">(</span><span class="sr">/\S+/g</span><span class="p">);</span>




</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-338" id="section-338">&#182;</a>
</div>
<p>String to Object options format cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">optionsCache</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-339" id="section-339">&#182;</a>
</div>
<p>Convert String-formatted options into Object-formatted ones and store in cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">createOptions</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">object</span> <span class="o">=</span> <span class="nx">optionsCache</span><span class="p">[</span> <span class="nx">options</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span> <span class="nx">rnotwhite</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">flag</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">object</span><span class="p">[</span> <span class="nx">flag</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-340" id="section-340">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Create a callback list using the following parameters:</p>
  </div>
  <div class="body"><p>options: an optional list of space-separated options that will change how
     the callback list behaves or a more traditional option object</p>

<p>By default a callback list will act like an event callback list and can be
"fired" multiple times.</p>

<p>Possible options:</p>

<p>once:      will ensure the callback list can only be fired once (like a Deferred)</p>

<p>memory:      will keep track of previous values and will call any callback added
         after the list has been fired right away with the latest "memorized"
         values (like a Deferred)</p>

<p>unique:      will ensure a callback can only be added once (no duplicate in the list)</p>

<p>stopOnFalse:  interrupt callings when a callback returns false</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-341" id="section-341">&#182;</a>
</div>
<p>Convert options from String-formatted to Object-formatted if needed
(we check in cache first)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">options</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">options</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
    <span class="p">(</span> <span class="nx">optionsCache</span><span class="p">[</span> <span class="nx">options</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">createOptions</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">options</span> <span class="p">);</span>

  <span class="kd">var</span> <span class="c1">// Flag to know if list is currently firing</span>
    <span class="nx">firing</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-342" id="section-342">&#182;</a>
</div>
<p>Last fire value (for non-forgettable lists)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">memory</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-343" id="section-343">&#182;</a>
</div>
<p>Flag to know if list was already fired</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">fired</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-344" id="section-344">&#182;</a>
</div>
<p>End of the loop when firing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">firingLength</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-345" id="section-345">&#182;</a>
</div>
<p>Index of currently firing callback (modified by remove if needed)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">firingIndex</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-346" id="section-346">&#182;</a>
</div>
<p>First callback to fire (used internally by add and fireWith)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">firingStart</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-347" id="section-347">&#182;</a>
</div>
<p>Actual callback list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">list</span> <span class="o">=</span> <span class="p">[],</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-348" id="section-348">&#182;</a>
</div>
<p>Stack of fire calls for repeatable lists</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">stack</span> <span class="o">=</span> <span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">once</span> <span class="o">&amp;&amp;</span> <span class="p">[],</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-349" id="section-349">&#182;</a>
</div>
<p>Fire callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">fire</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">memory</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">memory</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">fired</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nx">firingIndex</span> <span class="o">=</span> <span class="nx">firingStart</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">firingStart</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">firingLength</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="nx">firing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">list</span> <span class="o">&amp;&amp;</span> <span class="nx">firingIndex</span> <span class="o">&lt;</span> <span class="nx">firingLength</span><span class="p">;</span> <span class="nx">firingIndex</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span><span class="p">[</span> <span class="nx">firingIndex</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">data</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">data</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">stopOnFalse</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">memory</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// To prevent further calls using add</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">firing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">stack</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">fire</span><span class="p">(</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">memory</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">list</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-350" id="section-350">&#182;</a>
</div>
<p>Actual Callbacks object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">self</span> <span class="o">=</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-351" id="section-351">&#182;</a>
</div>
<p>Add a callback or a collection of callbacks to the list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-352" id="section-352">&#182;</a>
</div>
<p>First, we save the current length</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="p">(</span><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span> <span class="nx">arg</span> <span class="p">);</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">unique</span> <span class="o">||</span> <span class="o">!</span><span class="nx">self</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span> <span class="nx">arg</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">list</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">arg</span> <span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">arg</span> <span class="o">&amp;&amp;</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-353" id="section-353">&#182;</a>
</div>
<p>Inspect recursively</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">add</span><span class="p">(</span> <span class="nx">arg</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">});</span>
          <span class="p">})(</span> <span class="nx">arguments</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-354" id="section-354">&#182;</a>
</div>
<p>Do we need to add the callbacks to the
current firing batch?</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">firing</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">firingLength</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-355" id="section-355">&#182;</a>
</div>
<p>With memory, if we're not firing then
we should call right away</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">memory</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">firingStart</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
            <span class="nx">fire</span><span class="p">(</span> <span class="nx">memory</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-356" id="section-356">&#182;</a>
</div>
<p>Remove a callback from the list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">index</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">arg</span><span class="p">,</span> <span class="nx">list</span><span class="p">,</span> <span class="nx">index</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">list</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">index</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-357" id="section-357">&#182;</a>
</div>
<p>Handle firing indexes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">firing</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">&lt;=</span> <span class="nx">firingLength</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">firingLength</span><span class="o">--</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">&lt;=</span> <span class="nx">firingIndex</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">firingIndex</span><span class="o">--</span><span class="p">;</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">});</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-358" id="section-358">&#182;</a>
</div>
<p>Check if a given callback is in the list.
If no argument is given, return whether or not list has callbacks attached.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">has</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">fn</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">list</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="o">!!</span><span class="p">(</span> <span class="nx">list</span> <span class="o">&amp;&amp;</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-359" id="section-359">&#182;</a>
</div>
<p>Remove all callbacks from the list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">list</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">firingLength</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-360" id="section-360">&#182;</a>
</div>
<p>Have the list do nothing anymore</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">disable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">list</span> <span class="o">=</span> <span class="nx">stack</span> <span class="o">=</span> <span class="nx">memory</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-361" id="section-361">&#182;</a>
</div>
<p>Is it disabled?</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">disabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">list</span><span class="p">;</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-362" id="section-362">&#182;</a>
</div>
<p>Lock the list in its current state</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">lock</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stack</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">memory</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">disable</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-363" id="section-363">&#182;</a>
</div>
<p>Is it locked?</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">locked</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">stack</span><span class="p">;</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-364" id="section-364">&#182;</a>
</div>
<p>Call all callbacks with the given context and arguments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">fireWith</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">list</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="o">!</span><span class="nx">fired</span> <span class="o">||</span> <span class="nx">stack</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">args</span> <span class="o">=</span> <span class="nx">args</span> <span class="o">||</span> <span class="p">[];</span>
          <span class="nx">args</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">slice</span> <span class="o">?</span> <span class="nx">args</span><span class="p">.</span><span class="nx">slice</span><span class="p">()</span> <span class="o">:</span> <span class="nx">args</span> <span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">firing</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">stack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">args</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">fire</span><span class="p">(</span> <span class="nx">args</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-365" id="section-365">&#182;</a>
</div>
<p>Call all the callbacks with the given arguments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">fire</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">fireWith</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-366" id="section-366">&#182;</a>
</div>
<p>To know if the callbacks have already been called at least once</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">fired</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!!</span><span class="nx">fired</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>

  <span class="k">return</span> <span class="nx">self</span><span class="p">;</span>
<span class="p">};</span>


<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="nx">Deferred</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">tuples</span> <span class="o">=</span> <span class="p">[</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-367" id="section-367">&#182;</a>
</div>
<p>action, add listener, listener list, final state</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">[</span> <span class="s2">&quot;resolve&quot;</span><span class="p">,</span> <span class="s2">&quot;done&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span><span class="s2">&quot;once memory&quot;</span><span class="p">),</span> <span class="s2">&quot;resolved&quot;</span> <span class="p">],</span>
        <span class="p">[</span> <span class="s2">&quot;reject&quot;</span><span class="p">,</span> <span class="s2">&quot;fail&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span><span class="s2">&quot;once memory&quot;</span><span class="p">),</span> <span class="s2">&quot;rejected&quot;</span> <span class="p">],</span>
        <span class="p">[</span> <span class="s2">&quot;notify&quot;</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span><span class="s2">&quot;memory&quot;</span><span class="p">)</span> <span class="p">]</span>
      <span class="p">],</span>
      <span class="nx">state</span> <span class="o">=</span> <span class="s2">&quot;pending&quot;</span><span class="p">,</span>
      <span class="nx">promise</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">state</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">always</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">deferred</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">).</span><span class="nx">fail</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">);</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">then</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="cm">/* fnDone, fnFail, fnProgress */</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">fns</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">newDefer</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">tuples</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">tuple</span> <span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">fns</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">fns</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-368" id="section-368">&#182;</a>
</div>
<p>deferred[ done | fail | progress ] for forwarding actions to newDefer</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">deferred</span><span class="p">[</span> <span class="nx">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">](</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">returned</span> <span class="o">=</span> <span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">returned</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">returned</span><span class="p">.</span><span class="nx">promise</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">returned</span><span class="p">.</span><span class="nx">promise</span><span class="p">()</span>
                    <span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">newDefer</span><span class="p">.</span><span class="nx">resolve</span> <span class="p">)</span>
                    <span class="p">.</span><span class="nx">fail</span><span class="p">(</span> <span class="nx">newDefer</span><span class="p">.</span><span class="nx">reject</span> <span class="p">)</span>
                    <span class="p">.</span><span class="nx">progress</span><span class="p">(</span> <span class="nx">newDefer</span><span class="p">.</span><span class="nx">notify</span> <span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">newDefer</span><span class="p">[</span> <span class="nx">tuple</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;With&quot;</span> <span class="p">](</span> <span class="k">this</span> <span class="o">===</span> <span class="nx">promise</span> <span class="o">?</span> <span class="nx">newDefer</span><span class="p">.</span><span class="nx">promise</span><span class="p">()</span> <span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">fn</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">returned</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">arguments</span> <span class="p">);</span>
                <span class="p">}</span>
              <span class="p">});</span>
            <span class="p">});</span>
            <span class="nx">fns</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="p">}).</span><span class="nx">promise</span><span class="p">();</span>
        <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-369" id="section-369">&#182;</a>
</div>
<p>Get a promise for this deferred
If obj is provided, the promise aspect is added to the object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">promise</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">obj</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">promise</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">promise</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nx">deferred</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-370" id="section-370">&#182;</a>
</div>
<p>Keep pipe for back-compat</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">promise</span><span class="p">.</span><span class="nx">pipe</span> <span class="o">=</span> <span class="nx">promise</span><span class="p">.</span><span class="nx">then</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-371" id="section-371">&#182;</a>
</div>
<p>Add list-specific methods</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">tuples</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">tuple</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="nx">tuple</span><span class="p">[</span> <span class="mi">2</span> <span class="p">],</span>
        <span class="nx">stateString</span> <span class="o">=</span> <span class="nx">tuple</span><span class="p">[</span> <span class="mi">3</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-372" id="section-372">&#182;</a>
</div>
<p>promise[ done | fail | progress ] = list.add</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">promise</span><span class="p">[</span> <span class="nx">tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">add</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-373" id="section-373">&#182;</a>
</div>
<p>Handle state</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">stateString</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">list</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-374" id="section-374">&#182;</a>
</div>
<p>state = [ resolved | rejected ]</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">state</span> <span class="o">=</span> <span class="nx">stateString</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-375" id="section-375">&#182;</a>
</div>
<p>[ reject_list | resolve_list ].disable; progress_list.lock</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">},</span> <span class="nx">tuples</span><span class="p">[</span> <span class="nx">i</span> <span class="o">^</span> <span class="mi">1</span> <span class="p">][</span> <span class="mi">2</span> <span class="p">].</span><span class="nx">disable</span><span class="p">,</span> <span class="nx">tuples</span><span class="p">[</span> <span class="mi">2</span> <span class="p">][</span> <span class="mi">2</span> <span class="p">].</span><span class="nx">lock</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-376" id="section-376">&#182;</a>
</div>
<p>deferred[ resolve | reject | notify ]</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">deferred</span><span class="p">[</span> <span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">[</span> <span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;With&quot;</span> <span class="p">](</span> <span class="k">this</span> <span class="o">===</span> <span class="nx">deferred</span> <span class="o">?</span> <span class="nx">promise</span> <span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">};</span>
      <span class="nx">deferred</span><span class="p">[</span> <span class="nx">tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;With&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">fireWith</span><span class="p">;</span>
    <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-377" id="section-377">&#182;</a>
</div>
<p>Make the deferred a promise</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">promise</span><span class="p">.</span><span class="nx">promise</span><span class="p">(</span> <span class="nx">deferred</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-378" id="section-378">&#182;</a>
</div>
<p>Call given func if any</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">func</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">deferred</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-379" id="section-379">&#182;</a>
</div>
<p>All done!</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">deferred</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-380" id="section-380">&#182;</a>
</div>
<p>Deferred helper</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">when</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">subordinate</span> <span class="cm">/* , ..., subordinateN */</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">resolveValues</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">),</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="nx">resolveValues</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-381" id="section-381">&#182;</a>
</div>
<p>the count of uncompleted subordinates</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">remaining</span> <span class="o">=</span> <span class="nx">length</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">subordinate</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">subordinate</span><span class="p">.</span><span class="nx">promise</span> <span class="p">)</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-382" id="section-382">&#182;</a>
</div>
<p>the master Deferred. If resolveValues consist of only a single Deferred, just use that.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">remaining</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">subordinate</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-383" id="section-383">&#182;</a>
</div>
<p>Update function for both resolve and progress values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">updateFunc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">contexts</span><span class="p">,</span> <span class="nx">values</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">contexts</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
          <span class="nx">values</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">values</span> <span class="o">===</span> <span class="nx">progressValues</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">deferred</span><span class="p">.</span><span class="nx">notifyWith</span><span class="p">(</span> <span class="nx">contexts</span><span class="p">,</span> <span class="nx">values</span> <span class="p">);</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="o">--</span><span class="nx">remaining</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">contexts</span><span class="p">,</span> <span class="nx">values</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">};</span>
      <span class="p">},</span>

      <span class="nx">progressValues</span><span class="p">,</span> <span class="nx">progressContexts</span><span class="p">,</span> <span class="nx">resolveContexts</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-384" id="section-384">&#182;</a>
</div>
<p>add listeners to Deferred subordinates; treat others as resolved</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">progressValues</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span> <span class="nx">length</span> <span class="p">);</span>
      <span class="nx">progressContexts</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span> <span class="nx">length</span> <span class="p">);</span>
      <span class="nx">resolveContexts</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span> <span class="nx">length</span> <span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">resolveValues</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">resolveValues</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">promise</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">resolveValues</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">promise</span><span class="p">()</span>
            <span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">updateFunc</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">resolveContexts</span><span class="p">,</span> <span class="nx">resolveValues</span> <span class="p">)</span> <span class="p">)</span>
            <span class="p">.</span><span class="nx">fail</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span> <span class="p">)</span>
            <span class="p">.</span><span class="nx">progress</span><span class="p">(</span> <span class="nx">updateFunc</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">progressContexts</span><span class="p">,</span> <span class="nx">progressValues</span> <span class="p">)</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="o">--</span><span class="nx">remaining</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-385" id="section-385">&#182;</a>
</div>
<p>if we're not waiting on anything, resolve the master</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">remaining</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">resolveContexts</span><span class="p">,</span> <span class="nx">resolveValues</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-386" id="section-386">&#182;</a>
</div>
<p>The deferred used on DOM ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">readyList</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">ready</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-387" id="section-387">&#182;</a>
</div>
<p>Add the callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">.</span><span class="nx">promise</span><span class="p">().</span><span class="nx">done</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">);</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-388" id="section-388">&#182;</a>
</div>
<p>Is the DOM ready to be used? Set to true once it occurs.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">isReady</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-389" id="section-389">&#182;</a>
</div>
<p>A counter to track how many items to wait for before
the ready event fires. See #6781</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">readyWait</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-390" id="section-390">&#182;</a>
</div>
<p>Hold (or release) the ready event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">holdReady</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">hold</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">hold</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">readyWait</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-391" id="section-391">&#182;</a>
</div>
<p>Handle when the DOM is ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">wait</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-392" id="section-392">&#182;</a>
</div>
<p>Abort if there are pending holds or we're already ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">wait</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">?</span> <span class="o">--</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">readyWait</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isReady</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-393" id="section-393">&#182;</a>
</div>
<p>Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-394" id="section-394">&#182;</a>
</div>
<p>Remember that the DOM is ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isReady</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-395" id="section-395">&#182;</a>
</div>
<p>If a normal DOM Ready event fired, decrement, and wait if need be</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">wait</span> <span class="o">!==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="o">--</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">readyWait</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-396" id="section-396">&#182;</a>
</div>
<p>If there are functions bound, to execute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">readyList</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nb">document</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jQuery</span> <span class="p">]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-397" id="section-397">&#182;</a>
</div>
<p>Trigger any bound ready events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">triggerHandler</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="nb">document</span> <span class="p">).</span><span class="nx">triggerHandler</span><span class="p">(</span> <span class="s2">&quot;ready&quot;</span> <span class="p">);</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="nb">document</span> <span class="p">).</span><span class="nx">off</span><span class="p">(</span> <span class="s2">&quot;ready&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-398" id="section-398">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Clean-up method for dom ready events</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">detach</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span> <span class="nx">completed</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="nx">completed</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span> <span class="s2">&quot;onreadystatechange&quot;</span><span class="p">,</span> <span class="nx">completed</span> <span class="p">);</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span> <span class="s2">&quot;onload&quot;</span><span class="p">,</span> <span class="nx">completed</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-399" id="section-399">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>The ready event handler and self cleanup method</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">completed</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-400" id="section-400">&#182;</a>
</div>
<p>readyState === "complete" is good enough for us to call the dom ready in oldIE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;load&quot;</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="s2">&quot;complete&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">detach</span><span class="p">();</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">.</span><span class="nx">promise</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">readyList</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">readyList</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-401" id="section-401">&#182;</a>
</div>
<p>Catch cases where $(document).ready() is called after the browser event has already occurred.
we once tried to use readyState "interactive" here, but it caused issues like the one
discovered by ChrisS here: <a href='http://bugs.jquery.com/ticket/12282#comment:15'>http://bugs.jquery.com/ticket/12282#comment:15</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="s2">&quot;complete&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-402" id="section-402">&#182;</a>
</div>
<p>Handle it asynchronously to allow scripts the opportunity to delay ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-403" id="section-403">&#182;</a>
</div>
<p>Standards-based browsers support DOMContentLoaded</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-404" id="section-404">&#182;</a>
</div>
<p>Use the handy event callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span> <span class="nx">completed</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-405" id="section-405">&#182;</a>
</div>
<p>A fallback to window.onload, that will always work</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="nx">completed</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-406" id="section-406">&#182;</a>
</div>
<p>If IE event model is used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-407" id="section-407">&#182;</a>
</div>
<p>Ensure firing before onload, maybe late but safe also for iframes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">document</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onreadystatechange&quot;</span><span class="p">,</span> <span class="nx">completed</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-408" id="section-408">&#182;</a>
</div>
<p>A fallback to window.onload, that will always work</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">window</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onload&quot;</span><span class="p">,</span> <span class="nx">completed</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-409" id="section-409">&#182;</a>
</div>
<p>If IE and not a frame
continually check to see if the document is ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">top</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">top</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">frameElement</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">top</span> <span class="o">&amp;&amp;</span> <span class="nx">top</span><span class="p">.</span><span class="nx">doScroll</span> <span class="p">)</span> <span class="p">{</span>
        <span class="p">(</span><span class="kd">function</span> <span class="nx">doScrollCheck</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isReady</span> <span class="p">)</span> <span class="p">{</span>

            <span class="k">try</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-410" id="section-410">&#182;</a>
</div>
<p>Use the trick by Diego Perini
<a href='http://javascript.nwbox.com/IEContentLoaded/'>http://javascript.nwbox.com/IEContentLoaded/</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">top</span><span class="p">.</span><span class="nx">doScroll</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">doScrollCheck</span><span class="p">,</span> <span class="mi">50</span> <span class="p">);</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-411" id="section-411">&#182;</a>
</div>
<p>detach all dom ready events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">detach</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-412" id="section-412">&#182;</a>
</div>
<p>and execute any waiting functions</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">})();</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">readyList</span><span class="p">.</span><span class="nx">promise</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">);</span>
<span class="p">};</span>


<span class="kd">var</span> <span class="nx">strundefined</span> <span class="o">=</span> <span class="k">typeof</span> <span class="kc">undefined</span><span class="p">;</span>




</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-413" id="section-413">&#182;</a>
</div>
<p>Support: IE&lt;9
Iteration over object's inherited properties before its own</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">support</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">support</span><span class="p">.</span><span class="nx">ownLast</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">!==</span> <span class="s2">&quot;0&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-414" id="section-414">&#182;</a>
</div>
<p>Note: most support tests are defined in their respective modules.
false until the test is run</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">support</span><span class="p">.</span><span class="nx">inlineBlockNeedsLayout</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-415" id="section-415">&#182;</a>
</div>
<p>Execute ASAP in case we need to set body.style.zoom</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-416" id="section-416">&#182;</a>
</div>
<p>Minified: var a,b,c,d</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">div</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="nx">container</span><span class="p">;</span>

  <span class="nx">body</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;body&quot;</span> <span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">body</span> <span class="o">||</span> <span class="o">!</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-417" id="section-417">&#182;</a>
</div>
<p>Return for frameset docs that don't have a body</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-418" id="section-418">&#182;</a>
</div>
<p>Setup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
  <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
  <span class="nx">container</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">&quot;position:absolute;border:0;width:0;height:0;top:0;left:-9999px&quot;</span><span class="p">;</span>
  <span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">container</span> <span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">!==</span> <span class="nx">strundefined</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-419" id="section-419">&#182;</a>
</div>
<p>Support: IE&lt;8
Check if natively block-level elements act like inline-block
elements when setting their display to 'inline' and giving
them layout</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">&quot;display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1&quot;</span><span class="p">;</span>

    <span class="nx">support</span><span class="p">.</span><span class="nx">inlineBlockNeedsLayout</span> <span class="o">=</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">===</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-420" id="section-420">&#182;</a>
</div>
<p>Prevent IE 6 from affecting layout for positioned elements #11048
Prevent IE from shrinking the body in IE 7 mode #12869
Support: IE&lt;8</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">container</span> <span class="p">);</span>
<span class="p">});</span>




<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-421" id="section-421">&#182;</a>
</div>
<p>Execute the test only if not already executed in another module.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span><span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-422" id="section-422">&#182;</a>
</div>
<p>Support: IE&lt;9</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">div</span><span class="p">.</span><span class="nx">test</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-423" id="section-423">&#182;</a>
</div>
<p>Null elements to avoid leaks in IE.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">})();</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-424" id="section-424">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Determines whether an object can have data</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">noData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noData</span><span class="p">[</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">],</span>
    <span class="nx">nodeType</span> <span class="o">=</span> <span class="o">+</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-425" id="section-425">&#182;</a>
</div>
<p>Do not set data on non-element DOM nodes because it will not be cleared (#8335).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">9</span> <span class="o">?</span>
    <span class="kc">false</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-426" id="section-426">&#182;</a>
</div>
<p>Nodes accept data unless otherwise specified; rejection can be conditional</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="o">!</span><span class="nx">noData</span> <span class="o">||</span> <span class="nx">noData</span> <span class="o">!==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;classid&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">noData</span><span class="p">;</span>
<span class="p">};</span>


<span class="kd">var</span> <span class="nx">rbrace</span> <span class="o">=</span> <span class="sr">/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/</span><span class="p">,</span>
  <span class="nx">rmultiDash</span> <span class="o">=</span> <span class="sr">/([A-Z])/g</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">dataAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-427" id="section-427">&#182;</a>
</div>
<p>If nothing was found internally, try to fetch any
data from the HTML5 data-* attribute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;data-&quot;</span> <span class="o">+</span> <span class="nx">key</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rmultiDash</span><span class="p">,</span> <span class="s2">&quot;-$1&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>

    <span class="nx">data</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;true&quot;</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span>
          <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;false&quot;</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span>
          <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;null&quot;</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-428" id="section-428">&#182;</a>
</div>
<p>Only convert to a number if it doesn't change the string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="o">+</span><span class="nx">data</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="o">===</span> <span class="nx">data</span> <span class="o">?</span> <span class="o">+</span><span class="nx">data</span> <span class="o">:</span>
          <span class="nx">rbrace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseJSON</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">data</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-429" id="section-429">&#182;</a>
</div>
<p>Make sure we set the data so it isn't changed later</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-430" id="section-430">&#182;</a>
</div>
<p>checks a cache object for emptiness</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">isEmptyDataObject</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">name</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-431" id="section-431">&#182;</a>
</div>
<p>if the public data object is empty, the private is still empty</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;data&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">!==</span> <span class="s2">&quot;toJSON&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">internalData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">pvt</span> <span class="cm">/* Internal Use Only */</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">thisCache</span><span class="p">,</span>
    <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-432" id="section-432">&#182;</a>
</div>
<p>We have to handle DOM nodes and JS objects differently because IE6-7
can't GC object references properly across the DOM-JS boundary</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">isNode</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-433" id="section-433">&#182;</a>
</div>
<p>Only DOM nodes need the global jQuery cache; JS object data is
attached directly to the object so GC can occur automatically</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">cache</span> <span class="o">=</span> <span class="nx">isNode</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-434" id="section-434">&#182;</a>
</div>
<p>Only defining an ID for JS objects if its cache already exists allows
the code to shortcut on the same path as a DOM node with no cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">id</span> <span class="o">=</span> <span class="nx">isNode</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">internalKey</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-435" id="section-435">&#182;</a>
</div>
<p>Avoid doing any more work than we need to when trying to get data on an
object that has no data at all</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">id</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="nx">pvt</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">data</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">id</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-436" id="section-436">&#182;</a>
</div>
<p>Only DOM nodes need a new unique ID for each element since their data
ends up in the global cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">isNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">id</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">deletedIds</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">id</span> <span class="o">=</span> <span class="nx">internalKey</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-437" id="section-437">&#182;</a>
</div>
<p>Avoid exposing jQuery metadata on plain JS objects when the object
is serialized using JSON.stringify</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">isNode</span> <span class="o">?</span> <span class="p">{}</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">toJSON</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span> <span class="p">};</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-438" id="section-438">&#182;</a>
</div>
<p>An object can be passed to jQuery.data instead of a key/value pair; this gets
shallow copied over onto the existing cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">],</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nx">data</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">thisCache</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-439" id="section-439">&#182;</a>
</div>
<p>jQuery data() is stored in a separate object inside the object's internal data
cache in order to avoid key collisions between internal data and user-defined
data.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">thisCache</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">thisCache</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="p">}</span>

    <span class="nx">thisCache</span> <span class="o">=</span> <span class="nx">thisCache</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-440" id="section-440">&#182;</a>
</div>
<p>Check for both converted-to-camel and non-converted data property names
If a data property was specified</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-441" id="section-441">&#182;</a>
</div>
<p>First Try to find as-is property data</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">ret</span> <span class="o">=</span> <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-442" id="section-442">&#182;</a>
</div>
<p>Test for null|undefined property data</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-443" id="section-443">&#182;</a>
</div>
<p>Try to find the camelCased property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="nx">thisCache</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">internalRemoveData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">thisCache</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span>
    <span class="nx">isNode</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-444" id="section-444">&#182;</a>
</div>
<p>See jQuery.data for more information</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">cache</span> <span class="o">=</span> <span class="nx">isNode</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">,</span>
    <span class="nx">id</span> <span class="o">=</span> <span class="nx">isNode</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-445" id="section-445">&#182;</a>
</div>
<p>If there is already no cache entry for this object, there is no
purpose in continuing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">thisCache</span> <span class="o">=</span> <span class="nx">pvt</span> <span class="o">?</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nx">data</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">thisCache</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-446" id="section-446">&#182;</a>
</div>
<p>Support array or space separated string names for data keys</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-447" id="section-447">&#182;</a>
</div>
<p>try the string as a key before any manipulation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">thisCache</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">name</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-448" id="section-448">&#182;</a>
</div>
<p>split the camel cased version by spaces unless a key with the spaces exists</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">thisCache</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">name</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-449" id="section-449">&#182;</a>
</div>
<p>If "name" is an array of keys...
When data is initially created, via ("key", "val") signature,
keys will be converted to camelCase.
Since there is no way to tell <em>how</em> a key was added, remove
both plain key and camelCase key. #12786
This will only penalize the array argument path.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">i</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">name</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">];</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-450" id="section-450">&#182;</a>
</div>
<p>If there is no data left in the cache, we want to continue
and let the cache object itself get destroyed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">pvt</span> <span class="o">?</span> <span class="o">!</span><span class="nx">isEmptyDataObject</span><span class="p">(</span><span class="nx">thisCache</span><span class="p">)</span> <span class="o">:</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span><span class="nx">thisCache</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-451" id="section-451">&#182;</a>
</div>
<p>See jQuery.data for more information</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nx">data</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-452" id="section-452">&#182;</a>
</div>
<p>Don't destroy the parent cache unless the internal data object
had been the only thing left in it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isEmptyDataObject</span><span class="p">(</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-453" id="section-453">&#182;</a>
</div>
<p>Destroy the cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">isNode</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">],</span> <span class="kc">true</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-454" id="section-454">&#182;</a>
</div>
<p>Use delete when supported for expandos or <code>cache</code> is not a window per isWindow (#10080)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="cm">/* jshint eqeqeq: false */</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">||</span> <span class="nx">cache</span> <span class="o">!=</span> <span class="nx">cache</span><span class="p">.</span><span class="nb">window</span> <span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* jshint eqeqeq: true */</span>
    <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-455" id="section-455">&#182;</a>
</div>
<p>When all else fails, null</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">cache</span><span class="o">:</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-456" id="section-456">&#182;</a>
</div>
<p>The following elements (space-suffixed to avoid Object.prototype collisions)
throw uncatchable exceptions if you attempt to set expando properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">noData</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;applet &quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;embed &quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-457" id="section-457">&#182;</a>
</div>
<p>...but Flash objects (which have this classid) <em>can</em> handle expandos</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;object &quot;</span><span class="o">:</span> <span class="s2">&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&quot;</span>
  <span class="p">},</span>

  <span class="nx">hasData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>
    <span class="k">return</span> <span class="o">!!</span><span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isEmptyDataObject</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">internalData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">removeData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">internalRemoveData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-458" id="section-458">&#182;</a>
</div>
<p>For internal use only.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_data</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">internalData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">_removeData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">internalRemoveData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
      <span class="nx">attrs</span> <span class="o">=</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">attributes</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-459" id="section-459">&#182;</a>
</div>
<p>Special expections of .data basically thwart jQuery.access,
so implement the relevant behavior ourselves</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-460" id="section-460">&#182;</a>
</div>
<p>Gets all values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">key</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;parsedAttrs&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">i</span> <span class="o">=</span> <span class="nx">attrs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-461" id="section-461">&#182;</a>
</div>
<p>Support: IE11+
The attrs elements can be null (#14894)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">attrs</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">name</span> <span class="o">=</span> <span class="nx">attrs</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">name</span><span class="p">;</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot;data-&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">);</span>
                <span class="nx">dataAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;parsedAttrs&quot;</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-462" id="section-462">&#182;</a>
</div>
<p>Sets multiple values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-463" id="section-463">&#182;</a>
</div>
<p>Sets one value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">})</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-464" id="section-464">&#182;</a>
</div>
<p>Gets one value
Try to fetch any internally stored data first</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">elem</span> <span class="o">?</span> <span class="nx">dataAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">removeData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>


<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">queue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">queue</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span><span class="p">;</span>
      <span class="nx">queue</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-465" id="section-465">&#182;</a>
</div>
<p>Speed up dequeue by getting out quickly if this is just a lookup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">queue</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">queue</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">queue</span> <span class="o">||</span> <span class="p">[];</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">dequeue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">queue</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">),</span>
      <span class="nx">startLength</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span>
      <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_queueHooks</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">),</span>
      <span class="nx">next</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
      <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-466" id="section-466">&#182;</a>
</div>
<p>If the fx queue is dequeued, always remove the progress sentinel</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">===</span> <span class="s2">&quot;inprogress&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">startLength</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-467" id="section-467">&#182;</a>
</div>
<p>Add a progress sentinel to prevent the fx queue from being
automatically dequeued</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;fx&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">queue</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="s2">&quot;inprogress&quot;</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-468" id="section-468">&#182;</a>
</div>
<p>clear up the last queue stop function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">delete</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">stop</span><span class="p">;</span>
      <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">hooks</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">startLength</span> <span class="o">&amp;&amp;</span> <span class="nx">hooks</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">hooks</span><span class="p">.</span><span class="nx">empty</span><span class="p">.</span><span class="nx">fire</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-469" id="section-469">&#182;</a>
</div>
<p>not intended for public consumption - generates a queueHooks object, or returns the current one</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_queueHooks</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queueHooks&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">empty</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span><span class="s2">&quot;once memory&quot;</span><span class="p">).</span><span class="nx">add</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span> <span class="p">);</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
      <span class="p">})</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">queue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">setter</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>
      <span class="nx">setter</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">setter</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">type</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span>
      <span class="k">this</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">queue</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-470" id="section-470">&#182;</a>
</div>
<p>ensure a hooks for this queue</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_queueHooks</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;fx&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="s2">&quot;inprogress&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">dequeue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">clearQueue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">,</span> <span class="p">[]</span> <span class="p">);</span>
  <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-471" id="section-471">&#182;</a>
</div>
<p>Get a promise resolved when queues of a certain type
are emptied (fx is the type by default)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">promise</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">tmp</span><span class="p">,</span>
      <span class="nx">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">defer</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(),</span>
      <span class="nx">elements</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">resolve</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="o">--</span><span class="nx">count</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">defer</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="p">[</span> <span class="nx">elements</span> <span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">};</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">obj</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queueHooks&quot;</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">tmp</span> <span class="o">&amp;&amp;</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">empty</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">tmp</span><span class="p">.</span><span class="nx">empty</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">resolve</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">resolve</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">defer</span><span class="p">.</span><span class="nx">promise</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="kd">var</span> <span class="nx">pnum</span> <span class="o">=</span> <span class="p">(</span><span class="sr">/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/</span><span class="p">).</span><span class="nx">source</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">cssExpand</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;Top&quot;</span><span class="p">,</span> <span class="s2">&quot;Right&quot;</span><span class="p">,</span> <span class="s2">&quot;Bottom&quot;</span><span class="p">,</span> <span class="s2">&quot;Left&quot;</span> <span class="p">];</span>

<span class="kd">var</span> <span class="nx">isHidden</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">el</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-472" id="section-472">&#182;</a>
</div>
<p>isHidden might be called from jQuery#filter function;
in that case, element will be second argument</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">elem</span> <span class="o">=</span> <span class="nx">el</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">};</span>




</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-473" id="section-473">&#182;</a>
</div>
<p>Multifunctional method to get and set values of a collection
The value/s can optionally be executed if it's a function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">access</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">chainable</span><span class="p">,</span> <span class="nx">emptyGet</span><span class="p">,</span> <span class="nx">raw</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">length</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">bulk</span> <span class="o">=</span> <span class="nx">key</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-474" id="section-474">&#182;</a>
</div>
<p>Sets many values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">chainable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">key</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">emptyGet</span><span class="p">,</span> <span class="nx">raw</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-475" id="section-475">&#182;</a>
</div>
<p>Sets one value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">chainable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">raw</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">bulk</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-476" id="section-476">&#182;</a>
</div>
<p>Bulk operations run against the entire set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">raw</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="nx">fn</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-477" id="section-477">&#182;</a>
</div>
<p>...except when executing function values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">bulk</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
        <span class="nx">fn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">bulk</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="p">};</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">fn</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">raw</span> <span class="o">?</span> <span class="nx">value</span> <span class="o">:</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">fn</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">chainable</span> <span class="o">?</span>
    <span class="nx">elems</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-478" id="section-478">&#182;</a>
</div>
<p>Gets</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">bulk</span> <span class="o">?</span>
      <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="o">:</span>
      <span class="nx">length</span> <span class="o">?</span> <span class="nx">fn</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">emptyGet</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">rcheckableType</span> <span class="o">=</span> <span class="p">(</span><span class="sr">/^(?:checkbox|radio)$/i</span><span class="p">);</span>



<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-479" id="section-479">&#182;</a>
</div>
<p>Minified: var a,b,c</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;input&quot;</span> <span class="p">),</span>
    <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">),</span>
    <span class="nx">fragment</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-480" id="section-480">&#182;</a>
</div>
<p>Setup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;  &lt;link/&gt;&lt;table&gt;&lt;/table&gt;&lt;a href=&#39;/a&#39;&gt;a&lt;/a&gt;&lt;input type=&#39;checkbox&#39;/&gt;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-481" id="section-481">&#182;</a>
</div>
<p>IE strips leading whitespace when .innerHTML is used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">leadingWhitespace</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-482" id="section-482">&#182;</a>
</div>
<p>Make sure that tbody elements aren't automatically inserted
IE will insert them into empty tables</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">tbody</span> <span class="o">=</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;tbody&quot;</span> <span class="p">).</span><span class="nx">length</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-483" id="section-483">&#182;</a>
</div>
<p>Make sure that link elements get serialized correctly by innerHTML
This requires a wrapper element in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">htmlSerialize</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;link&quot;</span> <span class="p">).</span><span class="nx">length</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-484" id="section-484">&#182;</a>
</div>
<p>Makes sure cloning an html5 element does not cause problems
Where outerHTML is undefined, this still works</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">html5Clone</span> <span class="o">=</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;nav&quot;</span> <span class="p">).</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">outerHTML</span> <span class="o">!==</span> <span class="s2">&quot;&lt;:nav&gt;&lt;/:nav&gt;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-485" id="section-485">&#182;</a>
</div>
<p>Check if a disconnected checkbox will retain its checked
value of true after appended to the DOM (IE6/7)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">input</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">;</span>
  <span class="nx">input</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">input</span> <span class="p">);</span>
  <span class="nx">support</span><span class="p">.</span><span class="nx">appendChecked</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-486" id="section-486">&#182;</a>
</div>
<p>Make sure textarea (and checkbox) defaultValue is properly cloned
Support: IE6-IE11+</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;textarea&gt;x&lt;/textarea&gt;&quot;</span><span class="p">;</span>
  <span class="nx">support</span><span class="p">.</span><span class="nx">noCloneChecked</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">div</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="11217%20-%20webkit%20loses%20check%20when%20the%20name%20is%20after%20the%20checked%20attribute">
  <h1>
    <a href="#11217%20-%20webkit%20loses%20check%20when%20the%20name%20is%20after%20the%20checked%20attribute" name="11217%20-%20webkit%20loses%20check%20when%20the%20name%20is%20after%20the%20checked%20attribute" class="pilcrow">&#182;</a>
    11217 - WebKit loses check when the name is after the checked attribute
  </h1>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;input type=&#39;radio&#39; checked=&#39;checked&#39; name=&#39;t&#39;/&gt;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-488" id="section-488">&#182;</a>
</div>
<p>Support: Safari 5.1, iOS 5.1, Android 4.x, Android 2.3
old WebKit doesn't clone checked state correctly in fragments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">checkClone</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-489" id="section-489">&#182;</a>
</div>
<p>Support: IE&lt;9
Opera does not clone events (and typeof div.attachEvent === undefined).
IE9-10 clones events bound via attachEvent, but they don't trigger with .click()</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">noCloneEvent</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onclick&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">support</span><span class="p">.</span><span class="nx">noCloneEvent</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="nx">div</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">click</span><span class="p">();</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-490" id="section-490">&#182;</a>
</div>
<p>Execute the test only if not already executed in another module.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span><span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-491" id="section-491">&#182;</a>
</div>
<p>Support: IE&lt;9</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">div</span><span class="p">.</span><span class="nx">test</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})();</span>


<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">,</span>
    <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-492" id="section-492">&#182;</a>
</div>
<p>Support: IE&lt;9 (lack submit/change bubble), Firefox 23+ (lack focusin event)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">{</span> <span class="nx">submit</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">change</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">focusin</span><span class="o">:</span> <span class="kc">true</span> <span class="p">})</span> <span class="p">{</span>
    <span class="nx">eventName</span> <span class="o">=</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="nx">support</span><span class="p">[</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">&quot;Bubbles&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">eventName</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-493" id="section-493">&#182;</a>
</div>
<p>Beware of CSP restrictions (<a href='https://developer.mozilla.org/en/Security/CSP'>https://developer.mozilla.org/en/Security/CSP</a>)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">div</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">eventName</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span> <span class="p">);</span>
      <span class="nx">support</span><span class="p">[</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">&quot;Bubbles&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span> <span class="nx">eventName</span> <span class="p">].</span><span class="nx">expando</span> <span class="o">===</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-494" id="section-494">&#182;</a>
</div>
<p>Null elements to avoid leaks in IE.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">})();</span>


<span class="kd">var</span> <span class="nx">rformElems</span> <span class="o">=</span> <span class="sr">/^(?:input|select|textarea)$/i</span><span class="p">,</span>
  <span class="nx">rkeyEvent</span> <span class="o">=</span> <span class="sr">/^key/</span><span class="p">,</span>
  <span class="nx">rmouseEvent</span> <span class="o">=</span> <span class="sr">/^(?:mouse|pointer|contextmenu)|click/</span><span class="p">,</span>
  <span class="nx">rfocusMorph</span> <span class="o">=</span> <span class="sr">/^(?:focusinfocus|focusoutblur)$/</span><span class="p">,</span>
  <span class="nx">rtypenamespace</span> <span class="o">=</span> <span class="sr">/^([^.]*)(?:\.(.+)|)$/</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">returnTrue</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">returnFalse</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">safeActiveElement</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">err</span> <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-495" id="section-495">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Helper functions for managing events -- not part of the public interface.
Props to Dean Edwards' addEvent library for many of the ideas.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="p">{</span>

  <span class="nx">global</span><span class="o">:</span> <span class="p">{},</span>

  <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">tmp</span><span class="p">,</span> <span class="nx">events</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">handleObjIn</span><span class="p">,</span>
      <span class="nx">special</span><span class="p">,</span> <span class="nx">eventHandle</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">,</span>
      <span class="nx">handlers</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">origType</span><span class="p">,</span>
      <span class="nx">elemData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-496" id="section-496">&#182;</a>
</div>
<p>Don't attach events to noData or text/comment nodes (but allow plain objects)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elemData</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-497" id="section-497">&#182;</a>
</div>
<p>Caller can pass in an object of custom data in lieu of the handler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">handler</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handleObjIn</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">;</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">handleObjIn</span><span class="p">.</span><span class="nx">handler</span><span class="p">;</span>
      <span class="nx">selector</span> <span class="o">=</span> <span class="nx">handleObjIn</span><span class="p">.</span><span class="nx">selector</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-498" id="section-498">&#182;</a>
</div>
<p>Make sure that the handler has a unique ID, used to find/remove it later</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-499" id="section-499">&#182;</a>
</div>
<p>Init the element's event structure and main handler, if this is the first</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="nx">events</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">events</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="nx">eventHandle</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">eventHandle</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-500" id="section-500">&#182;</a>
</div>
<p>Discard the second event of a jQuery.event.trigger() and
when an event is called after a page has unloaded</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">jQuery</span> <span class="o">!==</span> <span class="nx">strundefined</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">e</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">!==</span> <span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="o">?</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">eventHandle</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">:</span>
          <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-501" id="section-501">&#182;</a>
</div>
<p>Add elem as a property of the handle fn to prevent a memory leak with IE non-native events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">eventHandle</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-502" id="section-502">&#182;</a>
</div>
<p>Handle multiple events separated by a space</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">types</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">types</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">match</span><span class="p">(</span> <span class="nx">rnotwhite</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span> <span class="p">];</span>
    <span class="nx">t</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">t</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">rtypenamespace</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">types</span><span class="p">[</span><span class="nx">t</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">origType</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">tmp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;.&quot;</span> <span class="p">).</span><span class="nx">sort</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-503" id="section-503">&#182;</a>
</div>
<p>There <em>must</em> be a type, no attaching namespace-only handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-504" id="section-504">&#182;</a>
</div>
<p>If event changes its type, use the special event handlers for the changed type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-505" id="section-505">&#182;</a>
</div>
<p>If selector defined, determine special event api type, otherwise given type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">type</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">selector</span> <span class="o">?</span> <span class="nx">special</span><span class="p">.</span><span class="nx">delegateType</span> <span class="o">:</span> <span class="nx">special</span><span class="p">.</span><span class="nx">bindType</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">type</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-506" id="section-506">&#182;</a>
</div>
<p>Update special based on newly reset type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-507" id="section-507">&#182;</a>
</div>
<p>handleObj is passed to all event handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span>
        <span class="nx">origType</span><span class="o">:</span> <span class="nx">origType</span><span class="p">,</span>
        <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
        <span class="nx">handler</span><span class="o">:</span> <span class="nx">handler</span><span class="p">,</span>
        <span class="nx">guid</span><span class="o">:</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">,</span>
        <span class="nx">selector</span><span class="o">:</span> <span class="nx">selector</span><span class="p">,</span>
        <span class="nx">needsContext</span><span class="o">:</span> <span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">needsContext</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">),</span>
        <span class="nx">namespace</span><span class="o">:</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
      <span class="p">},</span> <span class="nx">handleObjIn</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-508" id="section-508">&#182;</a>
</div>
<p>Init the event handler queue if we're the first</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="nx">handlers</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handlers</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">handlers</span><span class="p">.</span><span class="nx">delegateCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-509" id="section-509">&#182;</a>
</div>
<p>Only use addEventListener/attachEvent if the special events handler returns false</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">setup</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-510" id="section-510">&#182;</a>
</div>
<p>Bind the global event handler to the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">eventHandle</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">add</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">special</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-511" id="section-511">&#182;</a>
</div>
<p>Add to the element's handler list, delegates in front</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handlers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">delegateCount</span><span class="o">++</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">handlers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-512" id="section-512">&#182;</a>
</div>
<p>Keep track of which events have ever been used, for event optimization</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">global</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-513" id="section-513">&#182;</a>
</div>
<p>Nullify elem to prevent memory leaks in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">elem</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-514" id="section-514">&#182;</a>
</div>
<p>Detach an event or set of events from an element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">mappedTypes</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">,</span>
      <span class="nx">origCount</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">events</span><span class="p">,</span>
      <span class="nx">special</span><span class="p">,</span> <span class="nx">handlers</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span>
      <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">origType</span><span class="p">,</span>
      <span class="nx">elemData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">hasData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elemData</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="nx">events</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-515" id="section-515">&#182;</a>
</div>
<p>Once for each type.namespace in types; type may be omitted</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">types</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">types</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">match</span><span class="p">(</span> <span class="nx">rnotwhite</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span> <span class="p">];</span>
    <span class="nx">t</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">t</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">rtypenamespace</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">types</span><span class="p">[</span><span class="nx">t</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">origType</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">tmp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;.&quot;</span> <span class="p">).</span><span class="nx">sort</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-516" id="section-516">&#182;</a>
</div>
<p>Unbind all events (on this namespace, if provided) for the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">t</span> <span class="p">],</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">selector</span> <span class="o">?</span> <span class="nx">special</span><span class="p">.</span><span class="nx">delegateType</span> <span class="o">:</span> <span class="nx">special</span><span class="p">.</span><span class="nx">bindType</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">handlers</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.|)&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-517" id="section-517">&#182;</a>
</div>
<p>Remove matching events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">origCount</span> <span class="o">=</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">j</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">handlers</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">mappedTypes</span> <span class="o">||</span> <span class="nx">origType</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
          <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span> <span class="o">||</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
          <span class="p">(</span> <span class="o">!</span><span class="nx">tmp</span> <span class="o">||</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
          <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="o">||</span> <span class="nx">selector</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="o">||</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;**&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">handlers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">j</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">handlers</span><span class="p">.</span><span class="nx">delegateCount</span><span class="o">--</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">remove</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">special</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-518" id="section-518">&#182;</a>
</div>
<p>Remove generic event handler if we removed something and no more handlers exist
(avoids potential for endless recursion during removal of special event handlers)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">origCount</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">handlers</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">teardown</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">teardown</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">delete</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-519" id="section-519">&#182;</a>
</div>
<p>Remove the expando if it's no longer used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-520" id="section-520">&#182;</a>
</div>
<p>removeData also checks for emptiness and clears the expando if empty
so use it instead of delete</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">onlyHandlers</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">handle</span><span class="p">,</span> <span class="nx">ontype</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span>
      <span class="nx">bubbleType</span><span class="p">,</span> <span class="nx">special</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span>
      <span class="nx">eventPath</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">elem</span> <span class="o">||</span> <span class="nb">document</span> <span class="p">],</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">:</span> <span class="nx">event</span><span class="p">,</span>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="s2">&quot;namespace&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="p">[];</span>

    <span class="nx">cur</span> <span class="o">=</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-521" id="section-521">&#182;</a>
</div>
<p>Don't do events on text and comment nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-522" id="section-522">&#182;</a>
</div>
<p>focus/blur morphs to focusin/out; ensure we're not firing them right now</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">rfocusMorph</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">type</span> <span class="o">+</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-523" id="section-523">&#182;</a>
</div>
<p>Namespaced trigger; create a regexp to match event type in handle()</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">namespaces</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">ontype</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-524" id="section-524">&#182;</a>
</div>
<p>Caller can pass in a jQuery.Event object, Object, or just an event type string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">event</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">?</span>
      <span class="nx">event</span> <span class="o">:</span>
      <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="k">typeof</span> <span class="nx">event</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-525" id="section-525">&#182;</a>
</div>
<p>Trigger bitmask: &amp; 1 for native handlers; &amp; 2 for jQuery (always true)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">event</span><span class="p">.</span><span class="nx">isTrigger</span> <span class="o">=</span> <span class="nx">onlyHandlers</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">3</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">namespace_re</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">?</span>
      <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.|)&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span> <span class="p">)</span> <span class="o">:</span>
      <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-526" id="section-526">&#182;</a>
</div>
<p>Clean up the event in case it is being reused</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-527" id="section-527">&#182;</a>
</div>
<p>Clone any incoming data and prepend the event, creating the handler arg list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
      <span class="p">[</span> <span class="nx">event</span> <span class="p">]</span> <span class="o">:</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="p">[</span> <span class="nx">event</span> <span class="p">]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-528" id="section-528">&#182;</a>
</div>
<p>Allow special events to draw outside the lines</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">onlyHandlers</span> <span class="o">&amp;&amp;</span> <span class="nx">special</span><span class="p">.</span><span class="nx">trigger</span> <span class="o">&amp;&amp;</span> <span class="nx">special</span><span class="p">.</span><span class="nx">trigger</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-529" id="section-529">&#182;</a>
</div>
<p>Determine event propagation path in advance, per W3C events spec (#9951)
Bubble up to document, then to window; watch for a global ownerDocument var (#9724)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">onlyHandlers</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">noBubble</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">bubbleType</span> <span class="o">=</span> <span class="nx">special</span><span class="p">.</span><span class="nx">delegateType</span> <span class="o">||</span> <span class="nx">type</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rfocusMorph</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">bubbleType</span> <span class="o">+</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">cur</span><span class="p">;</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">eventPath</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
        <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-530" id="section-530">&#182;</a>
</div>
<p>Only add window if we got to document (e.g., not plain obj or detached DOM)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">tmp</span> <span class="o">===</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">eventPath</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">||</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">parentWindow</span> <span class="o">||</span> <span class="nb">window</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-531" id="section-531">&#182;</a>
</div>
<p>Fire handlers on the event path</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">cur</span> <span class="o">=</span> <span class="nx">eventPath</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isPropagationStopped</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span>
        <span class="nx">bubbleType</span> <span class="o">:</span>
        <span class="nx">special</span><span class="p">.</span><span class="nx">bindType</span> <span class="o">||</span> <span class="nx">type</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-532" id="section-532">&#182;</a>
</div>
<p>jQuery handler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">handle</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{}</span> <span class="p">)[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="s2">&quot;handle&quot;</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-533" id="section-533">&#182;</a>
</div>
<p>Native handler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">handle</span> <span class="o">=</span> <span class="nx">ontype</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="o">&amp;&amp;</span> <span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-534" id="section-534">&#182;</a>
</div>
<p>If nobody prevented the default action, do it now</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">onlyHandlers</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">_default</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">_default</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">eventPath</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-535" id="section-535">&#182;</a>
</div>
<p>Call a native DOM method on the target with the same name name as the event.
Can't use an .isFunction() check here because IE6/7 fails that test.
Don't do default actions on window, that's where global variables be (#6170)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">ontype</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-536" id="section-536">&#182;</a>
</div>
<p>Don't re-trigger an onFOO event when we call its FOO() method</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">tmp</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-537" id="section-537">&#182;</a>
</div>
<p>Prevent re-triggering of the same event, since we already bubbled it above</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
          <span class="k">try</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]();</span>
          <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-538" id="section-538">&#182;</a>
</div>
<p>IE&lt;9 dies on focus/blur to hidden element (#1486,#12518)
only reproducible on winXP IE8 native, not IE9 in IE8 mode</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="p">}</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">tmp</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">dispatch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-539" id="section-539">&#182;</a>
</div>
<p>Make a writable jQuery.Event from the native event object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">event</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fix</span><span class="p">(</span> <span class="nx">event</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">matched</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span>
      <span class="nx">handlerQueue</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">args</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">),</span>
      <span class="nx">handlers</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{}</span> <span class="p">)[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[],</span>
      <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-540" id="section-540">&#182;</a>
</div>
<p>Use the fix-ed jQuery.Event rather than the (read-only) native event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">delegateTarget</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-541" id="section-541">&#182;</a>
</div>
<p>Call the preDispatch hook for the mapped type, and let it bail if desired</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">preDispatch</span> <span class="o">&amp;&amp;</span> <span class="nx">special</span><span class="p">.</span><span class="nx">preDispatch</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">event</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-542" id="section-542">&#182;</a>
</div>
<p>Determine handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">handlerQueue</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handlers</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">handlers</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-543" id="section-543">&#182;</a>
</div>
<p>Run delegates first; they may want to stop propagation beneath us</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">matched</span> <span class="o">=</span> <span class="nx">handlerQueue</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isPropagationStopped</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">=</span> <span class="nx">matched</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>

      <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">matched</span><span class="p">.</span><span class="nx">handlers</span><span class="p">[</span> <span class="nx">j</span><span class="o">++</span> <span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isImmediatePropagationStopped</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-544" id="section-544">&#182;</a>
</div>
<p>Triggered event must either 1) have no namespace, or
2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">namespace_re</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace_re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nx">event</span><span class="p">.</span><span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">;</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>

          <span class="nx">ret</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{}).</span><span class="nx">handle</span> <span class="o">||</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span> <span class="p">)</span>
              <span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">matched</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
              <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-545" id="section-545">&#182;</a>
</div>
<p>Call the postDispatch hook for the mapped type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">postDispatch</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">special</span><span class="p">.</span><span class="nx">postDispatch</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">event</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">handlers</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">handlers</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sel</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">matches</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span>
      <span class="nx">handlerQueue</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">delegateCount</span> <span class="o">=</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">delegateCount</span><span class="p">,</span>
      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-546" id="section-546">&#182;</a>
</div>
<p>Find delegate handlers
Black-hole SVG <use> instance trees (#13180)
Avoid non-left-click bubbling in Firefox (#3861)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">delegateCount</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;click&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

      <span class="cm">/* jshint eqeqeq: false */</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">cur</span> <span class="o">!=</span> <span class="k">this</span><span class="p">;</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">||</span> <span class="k">this</span> <span class="p">)</span> <span class="p">{</span>
        <span class="cm">/* jshint eqeqeq: true */</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-547" id="section-547">&#182;</a>
</div>
<p>Don't check non-elements (#13208)
Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">cur</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">!==</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;click&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">matches</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">delegateCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">handlers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-548" id="section-548">&#182;</a>
</div>
<p>Don't conflict with Object.prototype properties (#13203)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">sel</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nx">matches</span><span class="p">[</span> <span class="nx">sel</span> <span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">matches</span><span class="p">[</span> <span class="nx">sel</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">needsContext</span> <span class="o">?</span>
                <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">sel</span><span class="p">,</span> <span class="k">this</span> <span class="p">).</span><span class="nx">index</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">:</span>
                <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">sel</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span> <span class="nx">cur</span> <span class="p">]</span> <span class="p">).</span><span class="nx">length</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">matches</span><span class="p">[</span> <span class="nx">sel</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">matches</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">matches</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">handlerQueue</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">elem</span><span class="o">:</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">handlers</span><span class="o">:</span> <span class="nx">matches</span> <span class="p">});</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-549" id="section-549">&#182;</a>
</div>
<p>Add the remaining (directly-bound) handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">delegateCount</span> <span class="o">&lt;</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handlerQueue</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">elem</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">handlers</span><span class="o">:</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">delegateCount</span> <span class="p">)</span> <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">handlerQueue</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">fix</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-550" id="section-550">&#182;</a>
</div>
<p>Create a writable copy of the event object and normalize some properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">copy</span><span class="p">,</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
      <span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">event</span><span class="p">,</span>
      <span class="nx">fixHook</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fixHooks</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">fixHook</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">fixHooks</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">fixHook</span> <span class="o">=</span>
        <span class="nx">rmouseEvent</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">mouseHooks</span> <span class="o">:</span>
        <span class="nx">rkeyEvent</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">keyHooks</span> <span class="o">:</span>
        <span class="p">{};</span>
    <span class="p">}</span>
    <span class="nx">copy</span> <span class="o">=</span> <span class="nx">fixHook</span><span class="p">.</span><span class="nx">props</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">fixHook</span><span class="p">.</span><span class="nx">props</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

    <span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">originalEvent</span> <span class="p">);</span>

    <span class="nx">i</span> <span class="o">=</span> <span class="nx">copy</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">prop</span> <span class="o">=</span> <span class="nx">copy</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
      <span class="nx">event</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">originalEvent</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-551" id="section-551">&#182;</a>
</div>
<p>Support: IE&lt;9
Fix target property (#1925)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">originalEvent</span><span class="p">.</span><span class="nx">srcElement</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-552" id="section-552">&#182;</a>
</div>
<p>Support: Chrome 23+, Safari?
Target should not be a text node (#504, #13143)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-553" id="section-553">&#182;</a>
</div>
<p>Support: IE&lt;9
For mouse/key events, metaKey==false if it's undefined (#3368, #11328)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">fixHook</span><span class="p">.</span><span class="nx">filter</span> <span class="o">?</span> <span class="nx">fixHook</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">originalEvent</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">event</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-554" id="section-554">&#182;</a>
</div>
<p>Includes some event props shared by KeyEvent and MouseEvent</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">props</span><span class="o">:</span> <span class="s2">&quot;altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span>

  <span class="nx">fixHooks</span><span class="o">:</span> <span class="p">{},</span>

  <span class="nx">keyHooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">props</span><span class="o">:</span> <span class="s2">&quot;char charCode key keyCode&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span>
    <span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">original</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-555" id="section-555">&#182;</a>
</div>
<p>Add which for key events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">=</span> <span class="nx">original</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">original</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">:</span> <span class="nx">original</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">mouseHooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">props</span><span class="o">:</span> <span class="s2">&quot;button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span>
    <span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">original</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">body</span><span class="p">,</span> <span class="nx">eventDoc</span><span class="p">,</span> <span class="nx">doc</span><span class="p">,</span>
        <span class="nx">button</span> <span class="o">=</span> <span class="nx">original</span><span class="p">.</span><span class="nx">button</span><span class="p">,</span>
        <span class="nx">fromElement</span> <span class="o">=</span> <span class="nx">original</span><span class="p">.</span><span class="nx">fromElement</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-556" id="section-556">&#182;</a>
</div>
<p>Calculate pageX/Y if missing and clientX/Y available</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">original</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">eventDoc</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
        <span class="nx">doc</span> <span class="o">=</span> <span class="nx">eventDoc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>
        <span class="nx">body</span> <span class="o">=</span> <span class="nx">eventDoc</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>

        <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">=</span> <span class="nx">original</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">);</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span> <span class="o">=</span> <span class="nx">original</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="mi">0</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-557" id="section-557">&#182;</a>
</div>
<p>Add relatedTarget, if necessary</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">&amp;&amp;</span> <span class="nx">fromElement</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">=</span> <span class="nx">fromElement</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">?</span> <span class="nx">original</span><span class="p">.</span><span class="nx">toElement</span> <span class="o">:</span> <span class="nx">fromElement</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-558" id="section-558">&#182;</a>
</div>
<p>Add which for click: 1 === left; 2 === middle; 3 === right
Note: button is not normalized, so don't use it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">&amp;&amp;</span> <span class="nx">button</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">2</span> <span class="o">?</span> <span class="mi">3</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">4</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">special</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">load</span><span class="o">:</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-559" id="section-559">&#182;</a>
</div>
<p>Prevent triggered image.load events from bubbling to window.load</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">noBubble</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nx">focus</span><span class="o">:</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-560" id="section-560">&#182;</a>
</div>
<p>Fire native event if possible so blur/focus sequence is correct</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span> <span class="o">!==</span> <span class="nx">safeActiveElement</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">focus</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">try</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-561" id="section-561">&#182;</a>
</div>
<p>Support: IE&lt;9
If we error on focus to hidden element (#1486, #12518),
let .trigger() run the handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nx">delegateType</span><span class="o">:</span> <span class="s2">&quot;focusin&quot;</span>
    <span class="p">},</span>
    <span class="nx">blur</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span> <span class="o">===</span> <span class="nx">safeActiveElement</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">blur</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">blur</span><span class="p">();</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nx">delegateType</span><span class="o">:</span> <span class="s2">&quot;focusout&quot;</span>
    <span class="p">},</span>
    <span class="nx">click</span><span class="o">:</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-562" id="section-562">&#182;</a>
</div>
<p>For checkbox, fire native event so checked state will be right</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">click</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-563" id="section-563">&#182;</a>
</div>
<p>For cross-browser consistency, don't fire native .click() on links</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">_default</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">beforeunload</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">postDispatch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-564" id="section-564">&#182;</a>
</div>
<p>Support: Firefox 20+
Firefox doesn't alert if the returnValue field is not set.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">simulate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">bubble</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-565" id="section-565">&#182;</a>
</div>
<p>Piggyback on a donor event to simulate a different one.
Fake originalEvent to avoid donor's stopPropagation, but if the
simulated event prevents default then we do the same on the donor.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span>
      <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(),</span>
      <span class="nx">event</span><span class="p">,</span>
      <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span>
        <span class="nx">isSimulated</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">originalEvent</span><span class="o">:</span> <span class="p">{}</span>
      <span class="p">}</span>
    <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">bubble</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">e</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="o">?</span>
  <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="o">:</span>
  <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">detachEvent</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="8545%2C%20%237054%2C%20preventing%20memory%20leaks%20for%20custom%20events%20in%20ie6-8">
  <h1>
    <a href="#8545%2C%20%237054%2C%20preventing%20memory%20leaks%20for%20custom%20events%20in%20ie6-8" name="8545%2C%20%237054%2C%20preventing%20memory%20leaks%20for%20custom%20events%20in%20ie6-8" class="pilcrow">&#182;</a>
    8545, #7054, preventing memory leaks for custom events in IE6-8
  </h1>
</div>


<p>detachEvent needed property on element, by name of that event, to properly expose it to GC</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">strundefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">elem</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-567" id="section-567">&#182;</a>
</div>
<p>Allow instantiation without the 'new' keyword</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="k">this</span> <span class="k">instanceof</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-568" id="section-568">&#182;</a>
</div>
<p>Event object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-569" id="section-569">&#182;</a>
</div>
<p>Events bubbling up the document may have been marked as prevented
by a handler lower down the tree; reflect the correct value.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">isDefaultPrevented</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">defaultPrevented</span> <span class="o">||</span>
        <span class="nx">src</span><span class="p">.</span><span class="nx">defaultPrevented</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-570" id="section-570">&#182;</a>
</div>
<p>Support: IE &lt; 9, Android &lt; 4.0</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">src</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">?</span>
      <span class="nx">returnTrue</span> <span class="o">:</span>
      <span class="nx">returnFalse</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-571" id="section-571">&#182;</a>
</div>
<p>Event type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-572" id="section-572">&#182;</a>
</div>
<p>Put explicitly provided properties onto the event object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-573" id="section-573">&#182;</a>
</div>
<p>Create a timestamp if incoming event doesn't have one</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">this</span><span class="p">.</span><span class="nx">timeStamp</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">timeStamp</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-574" id="section-574">&#182;</a>
</div>
<p>Mark it as fixed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">this</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-575" id="section-575">&#182;</a>
</div>
<p>jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
<a href='http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html'>http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">isDefaultPrevented</span><span class="o">:</span> <span class="nx">returnFalse</span><span class="p">,</span>
  <span class="nx">isPropagationStopped</span><span class="o">:</span> <span class="nx">returnFalse</span><span class="p">,</span>
  <span class="nx">isImmediatePropagationStopped</span><span class="o">:</span> <span class="nx">returnFalse</span><span class="p">,</span>

  <span class="nx">preventDefault</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">isDefaultPrevented</span> <span class="o">=</span> <span class="nx">returnTrue</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-576" id="section-576">&#182;</a>
</div>
<p>If preventDefault exists, run it on the original event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-577" id="section-577">&#182;</a>
</div>
<p>Support: IE
Otherwise set the returnValue property of the original event to false</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">stopPropagation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">isPropagationStopped</span> <span class="o">=</span> <span class="nx">returnTrue</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-578" id="section-578">&#182;</a>
</div>
<p>If stopPropagation exists, run it on the original event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-579" id="section-579">&#182;</a>
</div>
<p>Support: IE
Set the cancelBubble property of the original event to true</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">e</span><span class="p">.</span><span class="nx">cancelBubble</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">stopImmediatePropagation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">isImmediatePropagationStopped</span> <span class="o">=</span> <span class="nx">returnTrue</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-580" id="section-580">&#182;</a>
</div>
<p>Create mouseenter/leave events using mouseover/out and event-time checks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">mouseenter</span><span class="o">:</span> <span class="s2">&quot;mouseover&quot;</span><span class="p">,</span>
  <span class="nx">mouseleave</span><span class="o">:</span> <span class="s2">&quot;mouseout&quot;</span><span class="p">,</span>
  <span class="nx">pointerenter</span><span class="o">:</span> <span class="s2">&quot;pointerover&quot;</span><span class="p">,</span>
  <span class="nx">pointerleave</span><span class="o">:</span> <span class="s2">&quot;pointerout&quot;</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">orig</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">delegateType</span><span class="o">:</span> <span class="nx">fix</span><span class="p">,</span>
    <span class="nx">bindType</span><span class="o">:</span> <span class="nx">fix</span><span class="p">,</span>

    <span class="nx">handle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span>
        <span class="nx">target</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
        <span class="nx">related</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">,</span>
        <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-581" id="section-581">&#182;</a>
</div>
<p>For mousenter/leave call the handler if related is outside the target.
NB: No relatedTarget if the mouse left/entered the browser window</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">related</span> <span class="o">||</span> <span class="p">(</span><span class="nx">related</span> <span class="o">!==</span> <span class="nx">target</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">related</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span><span class="p">;</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">fix</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-582" id="section-582">&#182;</a>
</div>
<p>IE submit delegation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">submitBubbles</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">submit</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-583" id="section-583">&#182;</a>
</div>
<p>Only need this for delegated form submit events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;form&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-584" id="section-584">&#182;</a>
</div>
<p>Lazy-add a submit handler when a descendant form may potentially be submitted</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;click._submit keypress._submit&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-585" id="section-585">&#182;</a>
</div>
<p>Node name check avoids a VML-related crash in IE (#9807)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
          <span class="nx">form</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">form</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">form</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">form</span><span class="p">,</span> <span class="s2">&quot;submitBubbles&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">form</span><span class="p">,</span> <span class="s2">&quot;submit._submit&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">_submit_bubble</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">});</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">form</span><span class="p">,</span> <span class="s2">&quot;submitBubbles&quot;</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-586" id="section-586">&#182;</a>
</div>
<p>return undefined since we don't need an event listener</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">},</span>

    <span class="nx">postDispatch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-587" id="section-587">&#182;</a>
</div>
<p>If form was submitted by the user, bubble the event up the tree</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">_submit_bubble</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="nx">event</span><span class="p">.</span><span class="nx">_submit_bubble</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isTrigger</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span> <span class="s2">&quot;submit&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-588" id="section-588">&#182;</a>
</div>
<p>Only need this for delegated form submit events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;form&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-589" id="section-589">&#182;</a>
</div>
<p>Remove delegated handlers; cleanData eventually reaps submit handlers attached above</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;._submit&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-590" id="section-590">&#182;</a>
</div>
<p>IE change delegation and checkbox/radio fix</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">changeBubbles</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">change</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-591" id="section-591">&#182;</a>
</div>
<p>IE doesn't fire change on a check/radio until blur; trigger it on click
after a propertychange. Eat the blur-change in special.change.handle.
This still fires onchange a second time for check/radio after blur.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;propertychange._change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">propertyName</span> <span class="o">===</span> <span class="s2">&quot;checked&quot;</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">_just_changed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">});</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;click._change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">_just_changed</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isTrigger</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">_just_changed</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-592" id="section-592">&#182;</a>
</div>
<p>Allow triggered, simulated change events (#11500)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
          <span class="p">});</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-593" id="section-593">&#182;</a>
</div>
<p>Delegated event; lazy-add a change handler on descendant inputs</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;beforeactivate._change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;changeBubbles&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;change._change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isSimulated</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isTrigger</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">});</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;changeBubbles&quot;</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">},</span>

    <span class="nx">handle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-594" id="section-594">&#182;</a>
</div>
<p>Swallow native change events from checkbox/radio, we already triggered them above</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span> <span class="o">!==</span> <span class="nx">elem</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isSimulated</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isTrigger</span> <span class="o">||</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;radio&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;._change&quot;</span> <span class="p">);</span>

      <span class="k">return</span> <span class="o">!</span><span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-595" id="section-595">&#182;</a>
</div>
<p>Create "bubbling" focus and blur events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">focusinBubbles</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span> <span class="nx">focus</span><span class="o">:</span> <span class="s2">&quot;focusin&quot;</span><span class="p">,</span> <span class="nx">blur</span><span class="o">:</span> <span class="s2">&quot;focusout&quot;</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-596" id="section-596">&#182;</a>
</div>
<p>Attach a single capturing handler on the document while someone wants focusin/focusout</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">simulate</span><span class="p">(</span> <span class="nx">fix</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fix</span><span class="p">(</span> <span class="nx">event</span> <span class="p">),</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">};</span>

    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">fix</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="k">this</span><span class="p">,</span>
          <span class="nx">attaches</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">attaches</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">doc</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">fix</span><span class="p">,</span> <span class="p">(</span> <span class="nx">attaches</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="k">this</span><span class="p">,</span>
          <span class="nx">attaches</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">attaches</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">doc</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_removeData</span><span class="p">(</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">fix</span><span class="p">,</span> <span class="nx">attaches</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="nx">on</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="cm">/*INTERNAL*/</span> <span class="nx">one</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">origFn</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-597" id="section-597">&#182;</a>
</div>
<p>Types can be a map of types/handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">types</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-598" id="section-598">&#182;</a>
</div>
<p>( types-Object, selector, data )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-599" id="section-599">&#182;</a>
</div>
<p>( types-Object, data )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">||</span> <span class="nx">selector</span><span class="p">;</span>
        <span class="nx">selector</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">types</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">type</span> <span class="p">],</span> <span class="nx">one</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">fn</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-600" id="section-600">&#182;</a>
</div>
<p>( types, fn )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="nx">selector</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-601" id="section-601">&#182;</a>
</div>
<p>( types, selector, fn )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">fn</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-602" id="section-602">&#182;</a>
</div>
<p>( types, data, fn )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">fn</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
        <span class="nx">selector</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">returnFalse</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">one</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">origFn</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-603" id="section-603">&#182;</a>
</div>
<p>Can use an empty set, since event contains the info</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">jQuery</span><span class="p">().</span><span class="nx">off</span><span class="p">(</span> <span class="nx">event</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">origFn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-604" id="section-604">&#182;</a>
</div>
<p>Use same guid so caller can remove using origFn</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">origFn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">origFn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">one</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">off</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">type</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">types</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">handleObj</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-605" id="section-605">&#182;</a>
</div>
<p>( event )  dispatched jQuery.Event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">;</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">types</span><span class="p">.</span><span class="nx">delegateTarget</span> <span class="p">).</span><span class="nx">off</span><span class="p">(</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">?</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">:</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span><span class="p">,</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span>
      <span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">types</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-606" id="section-606">&#182;</a>
</div>
<p>( types-object [, selector] )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">types</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-607" id="section-607">&#182;</a>
</div>
<p>( types [, fn] )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
      <span class="nx">selector</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">returnFalse</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">triggerHandler</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>


<span class="kd">function</span> <span class="nx">createSafeFragment</span><span class="p">(</span> <span class="nb">document</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="nx">nodeNames</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;|&quot;</span> <span class="p">),</span>
    <span class="nx">safeFrag</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">safeFrag</span><span class="p">.</span><span class="nx">createElement</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">safeFrag</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span>
        <span class="nx">list</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">safeFrag</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">nodeNames</span> <span class="o">=</span> <span class="s2">&quot;abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|&quot;</span> <span class="o">+</span>
    <span class="s2">&quot;header|hgroup|mark|meter|nav|output|progress|section|summary|time|video&quot;</span><span class="p">,</span>
  <span class="nx">rinlinejQuery</span> <span class="o">=</span> <span class="sr">/ jQuery\d+=&quot;(?:null|\d+)&quot;/g</span><span class="p">,</span>
  <span class="nx">rnoshimcache</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;&lt;(?:&quot;</span> <span class="o">+</span> <span class="nx">nodeNames</span> <span class="o">+</span> <span class="s2">&quot;)[\\s/&gt;]&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">),</span>
  <span class="nx">rleadingWhitespace</span> <span class="o">=</span> <span class="sr">/^\s+/</span><span class="p">,</span>
  <span class="nx">rxhtmlTag</span> <span class="o">=</span> <span class="sr">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/gi</span><span class="p">,</span>
  <span class="nx">rtagName</span> <span class="o">=</span> <span class="sr">/&lt;([\w:]+)/</span><span class="p">,</span>
  <span class="nx">rtbody</span> <span class="o">=</span> <span class="sr">/&lt;tbody/i</span><span class="p">,</span>
  <span class="nx">rhtml</span> <span class="o">=</span> <span class="sr">/&lt;|&amp;#?\w+;/</span><span class="p">,</span>
  <span class="nx">rnoInnerhtml</span> <span class="o">=</span> <span class="sr">/&lt;(?:script|style|link)/i</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-608" id="section-608">&#182;</a>
</div>
<p>checked="checked" or checked</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rchecked</span> <span class="o">=</span> <span class="sr">/checked\s*(?:[^=]|=\s*.checked.)/i</span><span class="p">,</span>
  <span class="nx">rscriptType</span> <span class="o">=</span> <span class="sr">/^$|\/(?:java|ecma)script/i</span><span class="p">,</span>
  <span class="nx">rscriptTypeMasked</span> <span class="o">=</span> <span class="sr">/^true\/(.*)/</span><span class="p">,</span>
  <span class="nx">rcleanScript</span> <span class="o">=</span> <span class="sr">/^\s*&lt;!(?:\[CDATA\[|--)|(?:\]\]|--)&gt;\s*$/g</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-609" id="section-609">&#182;</a>
</div>
<p>We have to close these tags to support XHTML (#13200)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">wrapMap</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">option</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;select multiple=&#39;multiple&#39;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/select&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">legend</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;fieldset&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/fieldset&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">area</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;map&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/map&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">param</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;object&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/object&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">thead</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">tr</span><span class="o">:</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">col</span><span class="o">:</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/colgroup&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">td</span><span class="o">:</span> <span class="p">[</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-610" id="section-610">&#182;</a>
</div>
<p>IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,
unless wrapped in a div with non-breaking characters in front of it.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">_default</span><span class="o">:</span> <span class="nx">support</span><span class="p">.</span><span class="nx">htmlSerialize</span> <span class="o">?</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;X&lt;div&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span>  <span class="p">]</span>
  <span class="p">},</span>
  <span class="nx">safeFragment</span> <span class="o">=</span> <span class="nx">createSafeFragment</span><span class="p">(</span> <span class="nb">document</span> <span class="p">),</span>
  <span class="nx">fragmentDiv</span> <span class="o">=</span> <span class="nx">safeFragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span> <span class="p">);</span>

<span class="nx">wrapMap</span><span class="p">.</span><span class="nx">optgroup</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">option</span><span class="p">;</span>
<span class="nx">wrapMap</span><span class="p">.</span><span class="nx">tbody</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">tfoot</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">colgroup</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">caption</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">thead</span><span class="p">;</span>
<span class="nx">wrapMap</span><span class="p">.</span><span class="nx">th</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">td</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">tag</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">found</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">!==</span> <span class="nx">strundefined</span> <span class="o">?</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">tag</span> <span class="o">||</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">querySelectorAll</span> <span class="o">!==</span> <span class="nx">strundefined</span> <span class="o">?</span> <span class="nx">context</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="nx">tag</span> <span class="o">||</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="o">:</span>
      <span class="kc">undefined</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">found</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">found</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">elems</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">childNodes</span> <span class="o">||</span> <span class="nx">context</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">tag</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">tag</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">found</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">found</span><span class="p">,</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">tag</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">tag</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">tag</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">tag</span> <span class="p">)</span> <span class="o">?</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="p">[</span> <span class="nx">context</span> <span class="p">],</span> <span class="nx">found</span> <span class="p">)</span> <span class="o">:</span>
    <span class="nx">found</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-611" id="section-611">&#182;</a>
</div>
<p>Used in buildFragment, fixes the defaultChecked property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">fixDefaultChecked</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">rcheckableType</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">defaultChecked</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-612" id="section-612">&#182;</a>
</div>
<p>Support: IE&lt;8
Manipulating tables requires a tbody</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">manipulationTarget</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">content</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">content</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">11</span> <span class="o">?</span> <span class="nx">content</span> <span class="o">:</span> <span class="nx">content</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">,</span> <span class="s2">&quot;tr&quot;</span> <span class="p">)</span> <span class="o">?</span>

    <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">:</span>
    <span class="nx">elem</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-613" id="section-613">&#182;</a>
</div>
<p>Replace/restore the type attribute of script elements for safe DOM manipulation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">disableScript</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span> <span class="p">)</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">elem</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">restoreScript</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">rscriptTypeMasked</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">elem</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-614" id="section-614">&#182;</a>
</div>
<p>Mark scripts as having already been evaluated</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">setGlobalEval</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">refElements</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;globalEval&quot;</span><span class="p">,</span> <span class="o">!</span><span class="nx">refElements</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">refElements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s2">&quot;globalEval&quot;</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">hasData</span><span class="p">(</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span>
    <span class="nx">oldData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">src</span> <span class="p">),</span>
    <span class="nx">curData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">oldData</span> <span class="p">),</span>
    <span class="nx">events</span> <span class="o">=</span> <span class="nx">oldData</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">delete</span> <span class="nx">curData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>
    <span class="nx">curData</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-615" id="section-615">&#182;</a>
</div>
<p>make the cloned public data object a copy from the original</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">curData</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">curData</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">curData</span><span class="p">.</span><span class="nx">data</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">fixCloneNodeIssues</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">nodeName</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">data</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-616" id="section-616">&#182;</a>
</div>
<p>We do not need to do anything for non-Elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-617" id="section-617">&#182;</a>
</div>
<p>IE6-8 copies events bound via attachEvent when using cloneNode.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">noCloneEvent</span> <span class="o">&amp;&amp;</span> <span class="nx">dest</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">dest</span> <span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">e</span> <span class="k">in</span> <span class="nx">data</span><span class="p">.</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-618" id="section-618">&#182;</a>
</div>
<p>Event data gets referenced instead of copied if the expando gets copied too</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-619" id="section-619">&#182;</a>
</div>
<p>IE blanks contents when cloning scripts, and tries to evaluate newly-set text</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;script&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">text</span> <span class="o">!==</span> <span class="nx">src</span><span class="p">.</span><span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">disableScript</span><span class="p">(</span> <span class="nx">dest</span> <span class="p">).</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
    <span class="nx">restoreScript</span><span class="p">(</span> <span class="nx">dest</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-620" id="section-620">&#182;</a>
</div>
<p>IE6-10 improperly clones children of object elements using classid.
IE10 throws NoModificationAllowedError if parent is null, #12132.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dest</span><span class="p">.</span><span class="nx">outerHTML</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-621" id="section-621">&#182;</a>
</div>
<p>This path appears unavoidable for IE9. When cloning an object
element in IE9, the outerHTML strategy above is not sufficient.
If the src has innerHTML and the destination does not,
copy the src.innerHTML into the dest.innerHTML. #10324</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">html5Clone</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">src</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">dest</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dest</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
    <span class="p">}</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">rcheckableType</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-622" id="section-622">&#182;</a>
</div>
<p>IE6-8 fails to persist the checked state of a cloned checkbox
or radio button. Worse, IE6-7 fail to give the cloned element
a checked appearance if the defaultChecked value isn't also set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">dest</span><span class="p">.</span><span class="nx">defaultChecked</span> <span class="o">=</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-623" id="section-623">&#182;</a>
</div>
<p>IE6-7 get confused and end up setting the value of a cloned
checkbox/radio button to an empty string instead of "on"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">value</span> <span class="o">!==</span> <span class="nx">src</span><span class="p">.</span><span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dest</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-624" id="section-624">&#182;</a>
</div>
<p>IE6-8 fails to return the selected option to the default selected
state when cloning options</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;option&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">defaultSelected</span> <span class="o">=</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">defaultSelected</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-625" id="section-625">&#182;</a>
</div>
<p>IE6-8 fails to set the defaultValue to the correct value when
cloning other types of input fields</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">||</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;textarea&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">defaultValue</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">clone</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">destElements</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">clone</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">srcElements</span><span class="p">,</span>
      <span class="nx">inPage</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">html5Clone</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rnoshimcache</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">clone</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-626" id="section-626">&#182;</a>
</div>
<p>IE&lt;=8 does not properly clone detached, unknown element nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">fragmentDiv</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">;</span>
      <span class="nx">fragmentDiv</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">clone</span> <span class="o">=</span> <span class="nx">fragmentDiv</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">noCloneEvent</span> <span class="o">||</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">noCloneChecked</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-627" id="section-627">&#182;</a>
</div>
<p>We eschew Sizzle here for performance reasons: <a href='http://jsperf.com/getall-vs-sizzle/2'>http://jsperf.com/getall-vs-sizzle/2</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">destElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">clone</span> <span class="p">);</span>
      <span class="nx">srcElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-628" id="section-628">&#182;</a>
</div>
<p>Fix all IE cloning issues</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-629" id="section-629">&#182;</a>
</div>
<p>Ensure that the destination node is not null; Fixes #9587</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">fixCloneNodeIssues</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-630" id="section-630">&#182;</a>
</div>
<p>Copy the events from the original to the clone</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">dataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">srcElements</span> <span class="o">=</span> <span class="nx">srcElements</span> <span class="o">||</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="nx">destElements</span> <span class="o">=</span> <span class="nx">destElements</span> <span class="o">||</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">clone</span> <span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">clone</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-631" id="section-631">&#182;</a>
</div>
<p>Preserve script evaluation history</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">destElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">clone</span><span class="p">,</span> <span class="s2">&quot;script&quot;</span> <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">destElements</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">setGlobalEval</span><span class="p">(</span> <span class="nx">destElements</span><span class="p">,</span> <span class="o">!</span><span class="nx">inPage</span> <span class="o">&amp;&amp;</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;script&quot;</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">destElements</span> <span class="o">=</span> <span class="nx">srcElements</span> <span class="o">=</span> <span class="nx">node</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-632" id="section-632">&#182;</a>
</div>
<p>Return the cloned set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">clone</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">buildFragment</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">scripts</span><span class="p">,</span> <span class="nx">selection</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">contains</span><span class="p">,</span>
      <span class="nx">tmp</span><span class="p">,</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">tbody</span><span class="p">,</span> <span class="nx">wrap</span><span class="p">,</span>
      <span class="nx">l</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-633" id="section-633">&#182;</a>
</div>
<p>Ensure a safe fragment</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">safe</span> <span class="o">=</span> <span class="nx">createSafeFragment</span><span class="p">(</span> <span class="nx">context</span> <span class="p">),</span>

      <span class="nx">nodes</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">||</span> <span class="nx">elem</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-634" id="section-634">&#182;</a>
</div>
<p>Add nodes directly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">nodes</span><span class="p">,</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-635" id="section-635">&#182;</a>
</div>
<p>Convert non-html into a text node</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rhtml</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">nodes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-636" id="section-636">&#182;</a>
</div>
<p>Convert html into DOM nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">tmp</span> <span class="o">||</span> <span class="nx">safe</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-637" id="section-637">&#182;</a>
</div>
<p>Deserialize a standard representation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">tag</span> <span class="o">=</span> <span class="p">(</span><span class="nx">rtagName</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">])[</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">toLowerCase</span><span class="p">();</span>
          <span class="nx">wrap</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">[</span> <span class="nx">tag</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">_default</span><span class="p">;</span>

          <span class="nx">tmp</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rxhtmlTag</span><span class="p">,</span> <span class="s2">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-638" id="section-638">&#182;</a>
</div>
<p>Descend through wrappers to the right content</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">j</span> <span class="o">=</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
          <span class="k">while</span> <span class="p">(</span> <span class="nx">j</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">;</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-639" id="section-639">&#182;</a>
</div>
<p>Manually add leading whitespace removed by IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">leadingWhitespace</span> <span class="o">&amp;&amp;</span> <span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">nodes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">);</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-640" id="section-640">&#182;</a>
</div>
<p>Remove IE's autoinserted <tbody> from table fragments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">tbody</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-641" id="section-641">&#182;</a>
</div>
<p>String was a <table>, <em>may</em> have spurious <tbody></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">elem</span> <span class="o">=</span> <span class="nx">tag</span> <span class="o">===</span> <span class="s2">&quot;table&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rtbody</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">?</span>
              <span class="nx">tmp</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-642" id="section-642">&#182;</a>
</div>
<p>String was a bare <thead> or <tfoot></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">wrap</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;&lt;table&gt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rtbody</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">?</span>
                <span class="nx">tmp</span> <span class="o">:</span>
                <span class="mi">0</span><span class="p">;</span>

            <span class="nx">j</span> <span class="o">=</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
            <span class="k">while</span> <span class="p">(</span> <span class="nx">j</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="p">(</span><span class="nx">tbody</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="nx">j</span><span class="p">]),</span> <span class="s2">&quot;tbody&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">tbody</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">elem</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">tbody</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">nodes</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-643" id="section-643">&#182;</a>
</div>
<p>Fix #12392 for WebKit and IE > 9</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">tmp</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-644" id="section-644">&#182;</a>
</div>
<p>Fix #12392 for oldIE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">while</span> <span class="p">(</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">tmp</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-645" id="section-645">&#182;</a>
</div>
<p>Remember the top-level container for proper cleanup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">safe</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-646" id="section-646">&#182;</a>
</div>
<p>Fix #11356: Clear elements from fragment</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">tmp</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">safe</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">tmp</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-647" id="section-647">&#182;</a>
</div>
<p>Reset defaultChecked for any radios and checkboxes
about to be appended to the DOM in IE 6/7 (#8060)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">appendChecked</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">nodes</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">),</span> <span class="nx">fixDefaultChecked</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="4087%20-%20if%20origin%20and%20destination%20elements%20are%20the%20same%2C%20and%20this%20is">
  <h1>
    <a href="#4087%20-%20if%20origin%20and%20destination%20elements%20are%20the%20same%2C%20and%20this%20is" name="4087%20-%20if%20origin%20and%20destination%20elements%20are%20the%20same%2C%20and%20this%20is" class="pilcrow">&#182;</a>
    4087 - If origin and destination elements are the same, and this is
  </h1>
</div>


<p>that element, do not do anything</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">selection</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">selection</span> <span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">contains</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-649" id="section-649">&#182;</a>
</div>
<p>Append to fragment</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">safe</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span> <span class="s2">&quot;script&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-650" id="section-650">&#182;</a>
</div>
<p>Preserve script evaluation history</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">contains</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">setGlobalEval</span><span class="p">(</span> <span class="nx">tmp</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-651" id="section-651">&#182;</a>
</div>
<p>Capture executables</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">scripts</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">[</span> <span class="nx">j</span><span class="o">++</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">rscriptType</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">scripts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">tmp</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">safe</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">cleanData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="cm">/* internal */</span> <span class="nx">acceptData</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span>
      <span class="nx">cache</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">,</span>
      <span class="nx">deleteExpando</span> <span class="o">=</span> <span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span><span class="p">,</span>
      <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">acceptData</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nx">id</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">];</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">data</span><span class="p">.</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-652" id="section-652">&#182;</a>
</div>
<p>This is a shortcut to avoid jQuery.event.remove's overhead</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-653" id="section-653">&#182;</a>
</div>
<p>Remove cache only if it was not already removed by jQuery.event.remove</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

            <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-654" id="section-654">&#182;</a>
</div>
<p>IE does not allow us to delete expando properties from nodes,
nor does it have a removeAttribute function on Document nodes;
we must handle all of these cases</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">deleteExpando</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">delete</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">];</span>

            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span> <span class="o">!==</span> <span class="nx">strundefined</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">internalKey</span> <span class="p">);</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">elem</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">deletedIds</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">id</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="k">this</span> <span class="p">)</span> <span class="o">:</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span> <span class="p">).</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">append</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">manipulationTarget</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="nx">target</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">prepend</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">manipulationTarget</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="nx">target</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">target</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">before</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">after</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">keepData</span> <span class="cm">/* Internal Use Only */</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span>
      <span class="nx">elems</span> <span class="o">=</span> <span class="nx">selector</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="k">this</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">keepData</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">keepData</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">setGlobalEval</span><span class="p">(</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;script&quot;</span> <span class="p">)</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-655" id="section-655">&#182;</a>
</div>
<p>Remove element nodes and prevent memory leaks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-656" id="section-656">&#182;</a>
</div>
<p>Remove any remaining nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-657" id="section-657">&#182;</a>
</div>
<p>If this is a select, ensure that it displays empty (#12336)
Support: IE&lt;9</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">options</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;select&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">clone</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dataAndEvents</span> <span class="o">=</span> <span class="nx">dataAndEvents</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="nx">dataAndEvents</span><span class="p">;</span>
    <span class="nx">deepDataAndEvents</span> <span class="o">=</span> <span class="nx">deepDataAndEvents</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">dataAndEvents</span> <span class="o">:</span> <span class="nx">deepDataAndEvents</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">html</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{},</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rinlinejQuery</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">:</span>
          <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-658" id="section-658">&#182;</a>
</div>
<p>See if we can take a shortcut and just use innerHTML</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rnoInnerhtml</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">htmlSerialize</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rnoshimcache</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span>  <span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">leadingWhitespace</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">wrapMap</span><span class="p">[</span> <span class="p">(</span><span class="nx">rtagName</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">])[</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rxhtmlTag</span><span class="p">,</span> <span class="s2">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span> <span class="p">);</span>

        <span class="k">try</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-659" id="section-659">&#182;</a>
</div>
<p>Remove element nodes and prevent memory leaks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">);</span>
              <span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="nx">elem</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-660" id="section-660">&#182;</a>
</div>
<p>If using innerHTML throws an exception, use the fallback method</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">replaceWith</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">arg</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-661" id="section-661">&#182;</a>
</div>
<p>Make the changes, replacing each context element with the new content</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">arg</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>

      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">getAll</span><span class="p">(</span> <span class="k">this</span> <span class="p">)</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">arg</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">arg</span><span class="p">.</span><span class="nx">replaceChild</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-662" id="section-662">&#182;</a>
</div>
<p>Force removal if there was no new content (e.g., from empty arguments)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">arg</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="nx">detach</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">domManip</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-663" id="section-663">&#182;</a>
</div>
<p>Flatten any nested arrays</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">args</span> <span class="o">=</span> <span class="nx">concat</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="p">[],</span> <span class="nx">args</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">hasScripts</span><span class="p">,</span>
      <span class="nx">scripts</span><span class="p">,</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">set</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
      <span class="nx">iNoClone</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
      <span class="nx">isFunction</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-664" id="section-664">&#182;</a>
</div>
<p>We can't cloneNode fragments that contain checked, in WebKit</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">isFunction</span> <span class="o">||</span>
        <span class="p">(</span> <span class="nx">l</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span>
          <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkClone</span> <span class="o">&amp;&amp;</span> <span class="nx">rchecked</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">index</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">set</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span> <span class="nx">index</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">isFunction</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">l</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">buildFragment</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
      <span class="nx">first</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">first</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">first</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">scripts</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">fragment</span><span class="p">,</span> <span class="s2">&quot;script&quot;</span> <span class="p">),</span> <span class="nx">disableScript</span> <span class="p">);</span>
        <span class="nx">hasScripts</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-665" id="section-665">&#182;</a>
</div>
<p>Use the original fragment for the last item instead of the first because it can end up
being emptied incorrectly in certain situations (#8070).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">node</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">!==</span> <span class="nx">iNoClone</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">node</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-666" id="section-666">&#182;</a>
</div>
<p>Keep references to cloned scripts for later restoration</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">hasScripts</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">scripts</span><span class="p">,</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;script&quot;</span> <span class="p">)</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">i</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">hasScripts</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">doc</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">[</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">ownerDocument</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-667" id="section-667">&#182;</a>
</div>
<p>Reenable scripts</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">scripts</span><span class="p">,</span> <span class="nx">restoreScript</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-668" id="section-668">&#182;</a>
</div>
<p>Evaluate executable scripts on first document insertion</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">hasScripts</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">node</span> <span class="o">=</span> <span class="nx">scripts</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">rscriptType</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
              <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;globalEval&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">node</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

              <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-669" id="section-669">&#182;</a>
</div>
<p>Optional AJAX dependency, but won't run scripts if not present</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_evalUrl</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_evalUrl</span><span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">src</span> <span class="p">);</span>
                <span class="p">}</span>
              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">jQuery</span><span class="p">.</span><span class="nx">globalEval</span><span class="p">(</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">text</span> <span class="o">||</span> <span class="nx">node</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">||</span> <span class="nx">node</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rcleanScript</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-670" id="section-670">&#182;</a>
</div>
<p>Fix #11809: Avoid leaking memory</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">first</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">appendTo</span><span class="o">:</span> <span class="s2">&quot;append&quot;</span><span class="p">,</span>
  <span class="nx">prependTo</span><span class="o">:</span> <span class="s2">&quot;prepend&quot;</span><span class="p">,</span>
  <span class="nx">insertBefore</span><span class="o">:</span> <span class="s2">&quot;before&quot;</span><span class="p">,</span>
  <span class="nx">insertAfter</span><span class="o">:</span> <span class="s2">&quot;after&quot;</span><span class="p">,</span>
  <span class="nx">replaceAll</span><span class="o">:</span> <span class="s2">&quot;replaceWith&quot;</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">original</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elems</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">insert</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">),</span>
      <span class="nx">last</span> <span class="o">=</span> <span class="nx">insert</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">last</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elems</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">===</span> <span class="nx">last</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">insert</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)[</span> <span class="nx">original</span> <span class="p">](</span> <span class="nx">elems</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-671" id="section-671">&#182;</a>
</div>
<p>Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">get</span><span class="p">()</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>


<span class="kd">var</span> <span class="nx">iframe</span><span class="p">,</span>
  <span class="nx">elemdisplay</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-672" id="section-672">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Retrieve the actual display of a element</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span class="dox_type">String</span>
      <span>nodeName of the element</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">doc</span>
      <span class="dox_type">Object</span>
      <span>Document object</span>
    </div>
  </div>
</div>

<p>Called only from within defaultDisplay</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">actualDisplay</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">doc</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">style</span><span class="p">,</span>
    <span class="nx">elem</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">body</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-673" id="section-673">&#182;</a>
</div>
<p>getDefaultComputedStyle might be reliably used only on attached element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">display</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getDefaultComputedStyle</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">style</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getDefaultComputedStyle</span><span class="p">(</span> <span class="nx">elem</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-674" id="section-674">&#182;</a>
</div>
<p>Use of this method is a temporary fix (more like optmization) until something better comes along,
since it was removed from specification and supported only in FF</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span> <span class="s2">&quot;display&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-675" id="section-675">&#182;</a>
</div>
<p>We don't have any data stored on the element,
so use "detach" method as fast way to get rid of the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">elem</span><span class="p">.</span><span class="nx">detach</span><span class="p">();</span>

  <span class="k">return</span> <span class="nx">display</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-676" id="section-676">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Try to determine the default display value of an element</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">nodeName
</span>
      <span class="dox_type">String</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">defaultDisplay</span><span class="p">(</span> <span class="nx">nodeName</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nb">document</span><span class="p">,</span>
    <span class="nx">display</span> <span class="o">=</span> <span class="nx">elemdisplay</span><span class="p">[</span> <span class="nx">nodeName</span> <span class="p">];</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">display</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">display</span> <span class="o">=</span> <span class="nx">actualDisplay</span><span class="p">(</span> <span class="nx">nodeName</span><span class="p">,</span> <span class="nx">doc</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-677" id="section-677">&#182;</a>
</div>
<p>If the simple way fails, read from inside an iframe</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">display</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-678" id="section-678">&#182;</a>
</div>
<p>Use the already-created iframe if possible</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">iframe</span> <span class="o">=</span> <span class="p">(</span><span class="nx">iframe</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="s2">&quot;&lt;iframe frameborder=&#39;0&#39; width=&#39;0&#39; height=&#39;0&#39;/&gt;&quot;</span> <span class="p">)).</span><span class="nx">appendTo</span><span class="p">(</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-679" id="section-679">&#182;</a>
</div>
<p>Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">doc</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">iframe</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">contentWindow</span> <span class="o">||</span> <span class="nx">iframe</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">contentDocument</span> <span class="p">).</span><span class="nb">document</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-680" id="section-680">&#182;</a>
</div>
<p>Support: IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">doc</span><span class="p">.</span><span class="nx">write</span><span class="p">();</span>
      <span class="nx">doc</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>

      <span class="nx">display</span> <span class="o">=</span> <span class="nx">actualDisplay</span><span class="p">(</span> <span class="nx">nodeName</span><span class="p">,</span> <span class="nx">doc</span> <span class="p">);</span>
      <span class="nx">iframe</span><span class="p">.</span><span class="nx">detach</span><span class="p">();</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-681" id="section-681">&#182;</a>
</div>
<p>Store the correct default display</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">elemdisplay</span><span class="p">[</span> <span class="nx">nodeName</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">display</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">display</span><span class="p">;</span>
<span class="p">}</span>


<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">shrinkWrapBlocksVal</span><span class="p">;</span>

  <span class="nx">support</span><span class="p">.</span><span class="nx">shrinkWrapBlocks</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">shrinkWrapBlocksVal</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">shrinkWrapBlocksVal</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-682" id="section-682">&#182;</a>
</div>
<p>Will be changed later if needed.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">shrinkWrapBlocksVal</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-683" id="section-683">&#182;</a>
</div>
<p>Minified: var b,c,d</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">div</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="nx">container</span><span class="p">;</span>

    <span class="nx">body</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;body&quot;</span> <span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">body</span> <span class="o">||</span> <span class="o">!</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-684" id="section-684">&#182;</a>
</div>
<p>Test fired too early or in an unsupported environment, exit.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-685" id="section-685">&#182;</a>
</div>
<p>Setup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
    <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
    <span class="nx">container</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">&quot;position:absolute;border:0;width:0;height:0;top:0;left:-9999px&quot;</span><span class="p">;</span>
    <span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">container</span> <span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-686" id="section-686">&#182;</a>
</div>
<p>Support: IE6
Check if elements with layout shrink-wrap their children</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">!==</span> <span class="nx">strundefined</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-687" id="section-687">&#182;</a>
</div>
<p>Reset CSS: box-sizing; display; margin; border</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-688" id="section-688">&#182;</a>
</div>
<p>Support: Firefox&lt;29, Android 2.3
Vendor-prefix box-sizing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="s2">&quot;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;&quot;</span> <span class="o">+</span>
        <span class="s2">&quot;box-sizing:content-box;display:block;margin:0;border:0;&quot;</span> <span class="o">+</span>
        <span class="s2">&quot;padding:1px;width:1px;zoom:1&quot;</span><span class="p">;</span>
      <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">)</span> <span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="s2">&quot;5px&quot;</span><span class="p">;</span>
      <span class="nx">shrinkWrapBlocksVal</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">!==</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">container</span> <span class="p">);</span>

    <span class="k">return</span> <span class="nx">shrinkWrapBlocksVal</span><span class="p">;</span>
  <span class="p">};</span>

<span class="p">})();</span>
<span class="kd">var</span> <span class="nx">rmargin</span> <span class="o">=</span> <span class="p">(</span><span class="sr">/^margin/</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">rnumnonpx</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^(&quot;</span> <span class="o">+</span> <span class="nx">pnum</span> <span class="o">+</span> <span class="s2">&quot;)(?!px)[a-z%]+$&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span> <span class="p">);</span>



<span class="kd">var</span> <span class="nx">getStyles</span><span class="p">,</span> <span class="nx">curCSS</span><span class="p">,</span>
  <span class="nx">rposition</span> <span class="o">=</span> <span class="sr">/^(top|right|bottom|left)$/</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">getStyles</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-689" id="section-689">&#182;</a>
</div>
<p>Support: IE&lt;=11+, Firefox&lt;=30+ (#15098, #14150)
IE throws on elements created in popups
FF meanwhile throws on frame elements through "defaultView.getComputedStyle"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">opener</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">null</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">null</span> <span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">curCSS</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">minWidth</span><span class="p">,</span> <span class="nx">maxWidth</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span>
      <span class="nx">style</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span>

    <span class="nx">computed</span> <span class="o">=</span> <span class="nx">computed</span> <span class="o">||</span> <span class="nx">getStyles</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-690" id="section-690">&#182;</a>
</div>
<p>getPropertyValue is only needed for .css('filter') in IE9, see #12537</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">ret</span> <span class="o">=</span> <span class="nx">computed</span> <span class="o">?</span> <span class="nx">computed</span><span class="p">.</span><span class="nx">getPropertyValue</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">computed</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-691" id="section-691">&#182;</a>
</div>
<p>A tribute to the "awesome hack by Dean Edwards"
Chrome &lt; 17 and Safari 5.0 uses "computed value" instead of "used value" for margin-right
Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
this is against the CSSOM draft spec: <a href='http://dev.w3.org/csswg/cssom/#resolved-values'>http://dev.w3.org/csswg/cssom/#resolved-values</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rnumnonpx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">rmargin</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-692" id="section-692">&#182;</a>
</div>
<p>Remember the original values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">width</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
        <span class="nx">minWidth</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">minWidth</span><span class="p">;</span>
        <span class="nx">maxWidth</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">maxWidth</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-693" id="section-693">&#182;</a>
</div>
<p>Put in the new values to get a computed value out</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">style</span><span class="p">.</span><span class="nx">minWidth</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">maxWidth</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">;</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">computed</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-694" id="section-694">&#182;</a>
</div>
<p>Revert the changed values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
        <span class="nx">style</span><span class="p">.</span><span class="nx">minWidth</span> <span class="o">=</span> <span class="nx">minWidth</span><span class="p">;</span>
        <span class="nx">style</span><span class="p">.</span><span class="nx">maxWidth</span> <span class="o">=</span> <span class="nx">maxWidth</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-695" id="section-695">&#182;</a>
</div>
<p>Support: IE
IE returns zIndex value as an integer.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span>
      <span class="nx">ret</span> <span class="o">:</span>
      <span class="nx">ret</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">getStyles</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">curCSS</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">rs</span><span class="p">,</span> <span class="nx">rsLeft</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span>
      <span class="nx">style</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span>

    <span class="nx">computed</span> <span class="o">=</span> <span class="nx">computed</span> <span class="o">||</span> <span class="nx">getStyles</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="nx">computed</span> <span class="o">?</span> <span class="nx">computed</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-696" id="section-696">&#182;</a>
</div>
<p>Avoid setting ret to empty string here
so we don't default to auto</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">style</span> <span class="o">&amp;&amp;</span> <span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-697" id="section-697">&#182;</a>
</div>
<p>From the awesome hack by Dean Edwards
<a href='http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291'>http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-698" id="section-698">&#182;</a>
</div>
<p>If we're not dealing with a regular pixel number
but a number that has a weird ending, we need to convert it to pixels
but not position css attributes, as those are proportional to the parent element instead
and we can't measure the parent instead because it might trigger a "stacking dolls" problem</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">rnumnonpx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rposition</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-699" id="section-699">&#182;</a>
</div>
<p>Remember the original values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">left</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
      <span class="nx">rs</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">runtimeStyle</span><span class="p">;</span>
      <span class="nx">rsLeft</span> <span class="o">=</span> <span class="nx">rs</span> <span class="o">&amp;&amp;</span> <span class="nx">rs</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-700" id="section-700">&#182;</a>
</div>
<p>Put in the new values to get a computed value out</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rsLeft</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">rs</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;fontSize&quot;</span> <span class="o">?</span> <span class="s2">&quot;1em&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">pixelLeft</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-701" id="section-701">&#182;</a>
</div>
<p>Revert the changed values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rsLeft</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">rs</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">rsLeft</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-702" id="section-702">&#182;</a>
</div>
<p>Support: IE
IE returns zIndex value as an integer.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span>
      <span class="nx">ret</span> <span class="o">:</span>
      <span class="nx">ret</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="o">||</span> <span class="s2">&quot;auto&quot;</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>




<span class="kd">function</span> <span class="nx">addGetHookIf</span><span class="p">(</span> <span class="nx">conditionFn</span><span class="p">,</span> <span class="nx">hookFn</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-703" id="section-703">&#182;</a>
</div>
<p>Define the hook, we'll check on the first run if it's really needed.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">condition</span> <span class="o">=</span> <span class="nx">conditionFn</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">condition</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-704" id="section-704">&#182;</a>
</div>
<p>The test was not ready at this point; screw the hook this time
but check again when needed next time.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">condition</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-705" id="section-705">&#182;</a>
</div>
<p>Hook not needed (or it's not possible to use it due to missing dependency),
remove it.
Since there are no other hooks for marginRight, remove the whole object.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-706" id="section-706">&#182;</a>
</div>
<p>Hook needed; redefine it so that the support test is not executed again.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

      <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span> <span class="o">=</span> <span class="nx">hookFn</span><span class="p">).</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-707" id="section-707">&#182;</a>
</div>
<p>Minified: var b,c,d,e,f,g, h,i</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">div</span><span class="p">,</span> <span class="nx">style</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">pixelPositionVal</span><span class="p">,</span> <span class="nx">boxSizingReliableVal</span><span class="p">,</span>
    <span class="nx">reliableHiddenOffsetsVal</span><span class="p">,</span> <span class="nx">reliableMarginRightVal</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-708" id="section-708">&#182;</a>
</div>
<p>Setup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;  &lt;link/&gt;&lt;table&gt;&lt;/table&gt;&lt;a href=&#39;/a&#39;&gt;a&lt;/a&gt;&lt;input type=&#39;checkbox&#39;/&gt;&quot;</span><span class="p">;</span>
  <span class="nx">a</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;a&quot;</span> <span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>
  <span class="nx">style</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-709" id="section-709">&#182;</a>
</div>
<p>Finish early in limited (non-browser) environments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">&quot;float:left;opacity:.5&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-710" id="section-710">&#182;</a>
</div>
<p>Support: IE&lt;9
Make sure that element opacity exists (as opposed to filter)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">===</span> <span class="s2">&quot;0.5&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-711" id="section-711">&#182;</a>
</div>
<p>Verify style float existence
(IE uses styleFloat instead of cssFloat)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">cssFloat</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssFloat</span><span class="p">;</span>

  <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundClip</span> <span class="o">=</span> <span class="s2">&quot;content-box&quot;</span><span class="p">;</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundClip</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="nx">support</span><span class="p">.</span><span class="nx">clearCloneStyle</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundClip</span> <span class="o">===</span> <span class="s2">&quot;content-box&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-712" id="section-712">&#182;</a>
</div>
<p>Support: Firefox&lt;29, Android 2.3
Vendor-prefix box-sizing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">boxSizing</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">boxSizing</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">||</span> <span class="nx">style</span><span class="p">.</span><span class="nx">MozBoxSizing</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">||</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">WebkitBoxSizing</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">support</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">reliableHiddenOffsets</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">reliableHiddenOffsetsVal</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">computeStyleTests</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">reliableHiddenOffsetsVal</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">boxSizingReliable</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">boxSizingReliableVal</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">computeStyleTests</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">boxSizingReliableVal</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">pixelPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">pixelPositionVal</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">computeStyleTests</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">pixelPositionVal</span><span class="p">;</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-713" id="section-713">&#182;</a>
</div>
<p>Support: Android 2.3</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">reliableMarginRight</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">reliableMarginRightVal</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">computeStyleTests</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">reliableMarginRightVal</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">computeStyleTests</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-714" id="section-714">&#182;</a>
</div>
<p>Minified: var b,c,d,j</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">div</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">contents</span><span class="p">;</span>

    <span class="nx">body</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;body&quot;</span> <span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">body</span> <span class="o">||</span> <span class="o">!</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-715" id="section-715">&#182;</a>
</div>
<p>Test fired too early or in an unsupported environment, exit.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-716" id="section-716">&#182;</a>
</div>
<p>Setup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
    <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
    <span class="nx">container</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">&quot;position:absolute;border:0;width:0;height:0;top:0;left:-9999px&quot;</span><span class="p">;</span>
    <span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">container</span> <span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>

    <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-717" id="section-717">&#182;</a>
</div>
<p>Support: Firefox&lt;29, Android 2.3
Vendor-prefix box-sizing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="s2">&quot;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;&quot;</span> <span class="o">+</span>
      <span class="s2">&quot;box-sizing:border-box;display:block;margin-top:1%;top:1%;&quot;</span> <span class="o">+</span>
      <span class="s2">&quot;border:1px;padding:1px;width:4px;position:absolute&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-718" id="section-718">&#182;</a>
</div>
<p>Support: IE&lt;9
Assume reasonable values in the absence of getComputedStyle</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">pixelPositionVal</span> <span class="o">=</span> <span class="nx">boxSizingReliableVal</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">reliableMarginRightVal</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-719" id="section-719">&#182;</a>
</div>
<p>Check for getComputedStyle so that this code is not run in IE&lt;9.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">pixelPositionVal</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">div</span><span class="p">,</span> <span class="kc">null</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{}</span> <span class="p">).</span><span class="nx">top</span> <span class="o">!==</span> <span class="s2">&quot;1%&quot;</span><span class="p">;</span>
      <span class="nx">boxSizingReliableVal</span> <span class="o">=</span>
        <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">div</span><span class="p">,</span> <span class="kc">null</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{</span> <span class="nx">width</span><span class="o">:</span> <span class="s2">&quot;4px&quot;</span> <span class="p">}</span> <span class="p">).</span><span class="nx">width</span> <span class="o">===</span> <span class="s2">&quot;4px&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-720" id="section-720">&#182;</a>
</div>
<p>Support: Android 2.3
Div with explicit width and no margin-right incorrectly
gets computed margin-right based on width of container (#3333)
WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">contents</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-721" id="section-721">&#182;</a>
</div>
<p>Reset CSS: box-sizing; display; margin; border; padding</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">contents</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-722" id="section-722">&#182;</a>
</div>
<p>Support: Firefox&lt;29, Android 2.3
Vendor-prefix box-sizing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="s2">&quot;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;&quot;</span> <span class="o">+</span>
        <span class="s2">&quot;box-sizing:content-box;display:block;margin:0;border:0;padding:0&quot;</span><span class="p">;</span>
      <span class="nx">contents</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginRight</span> <span class="o">=</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">;</span>
      <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="s2">&quot;1px&quot;</span><span class="p">;</span>

      <span class="nx">reliableMarginRightVal</span> <span class="o">=</span>
        <span class="o">!</span><span class="nb">parseFloat</span><span class="p">(</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">contents</span><span class="p">,</span> <span class="kc">null</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{}</span> <span class="p">).</span><span class="nx">marginRight</span> <span class="p">);</span>

      <span class="nx">div</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">contents</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-723" id="section-723">&#182;</a>
</div>
<p>Support: IE8
Check if table cells still have offsetWidth/Height when they are set
to display:none and there are still other visible table cells in a
table row; if so, offsetWidth/Height are not reliable for use when
determining if an element has been hidden directly using
display:none (it is still safe to use offsets if a parent element is
hidden; don safety goggles and see bug #4512 for more information).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;t&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span><span class="p">;</span>
    <span class="nx">contents</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;td&quot;</span> <span class="p">);</span>
    <span class="nx">contents</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">&quot;margin:0;border:0;padding:0;display:none&quot;</span><span class="p">;</span>
    <span class="nx">reliableHiddenOffsetsVal</span> <span class="o">=</span> <span class="nx">contents</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">offsetHeight</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">reliableHiddenOffsetsVal</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">contents</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="nx">contents</span><span class="p">[</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">;</span>
      <span class="nx">reliableHiddenOffsetsVal</span> <span class="o">=</span> <span class="nx">contents</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">offsetHeight</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">container</span> <span class="p">);</span>
  <span class="p">}</span>

<span class="p">})();</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-724" id="section-724">&#182;</a>
</div>
<p>A method for quickly swapping in/out CSS properties to get correct calculations.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">swap</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span>
    <span class="nx">old</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-725" id="section-725">&#182;</a>
</div>
<p>Remember the old values, and insert the new ones</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">old</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
  <span class="p">}</span>

  <span class="nx">ret</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">args</span> <span class="o">||</span> <span class="p">[]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-726" id="section-726">&#182;</a>
</div>
<p>Revert the old values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">old</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">};</span>


<span class="kd">var</span>
    <span class="nx">ralpha</span> <span class="o">=</span> <span class="sr">/alpha\([^)]*\)/i</span><span class="p">,</span>
  <span class="nx">ropacity</span> <span class="o">=</span> <span class="sr">/opacity\s*=\s*([^)]*)/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-727" id="section-727">&#182;</a>
</div>
<p>swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
see here for display values: <a href='https://developer.mozilla.org/en-US/docs/CSS/display'>https://developer.mozilla.org/en-US/docs/CSS/display</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rdisplayswap</span> <span class="o">=</span> <span class="sr">/^(none|table(?!-c[ea]).+)/</span><span class="p">,</span>
  <span class="nx">rnumsplit</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^(&quot;</span> <span class="o">+</span> <span class="nx">pnum</span> <span class="o">+</span> <span class="s2">&quot;)(.*)$&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span> <span class="p">),</span>
  <span class="nx">rrelNum</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^([+-])=(&quot;</span> <span class="o">+</span> <span class="nx">pnum</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span> <span class="p">),</span>

  <span class="nx">cssShow</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">position</span><span class="o">:</span> <span class="s2">&quot;absolute&quot;</span><span class="p">,</span> <span class="nx">visibility</span><span class="o">:</span> <span class="s2">&quot;hidden&quot;</span><span class="p">,</span> <span class="nx">display</span><span class="o">:</span> <span class="s2">&quot;block&quot;</span> <span class="p">},</span>
  <span class="nx">cssNormalTransform</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">letterSpacing</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
    <span class="nx">fontWeight</span><span class="o">:</span> <span class="s2">&quot;400&quot;</span>
  <span class="p">},</span>

  <span class="nx">cssPrefixes</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;Webkit&quot;</span><span class="p">,</span> <span class="s2">&quot;O&quot;</span><span class="p">,</span> <span class="s2">&quot;Moz&quot;</span><span class="p">,</span> <span class="s2">&quot;ms&quot;</span> <span class="p">];</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-728" id="section-728">&#182;</a>
</div>
<p>return a css property mapped to a potentially vendor prefixed property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">vendorPropName</span><span class="p">(</span> <span class="nx">style</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-729" id="section-729">&#182;</a>
</div>
<p>shortcut for names that are not vendor prefixed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-730" id="section-730">&#182;</a>
</div>
<p>check for vendor prefixed names</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">capName</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">name</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
    <span class="nx">origName</span> <span class="o">=</span> <span class="nx">name</span><span class="p">,</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="nx">cssPrefixes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">cssPrefixes</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">+</span> <span class="nx">capName</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">origName</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">showHide</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="nx">show</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">display</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">hidden</span><span class="p">,</span>
    <span class="nx">values</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">length</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">index</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">index</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">values</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span> <span class="p">);</span>
    <span class="nx">display</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">show</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-731" id="section-731">&#182;</a>
</div>
<p>Reset the inline display of this element to learn if it is
being hidden by cascaded rules or not</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">values</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-732" id="section-732">&#182;</a>
</div>
<p>Set elements which have been overridden with display: none
in a stylesheet to whatever the default browser style is
for such an element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">isHidden</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">values</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span><span class="p">,</span> <span class="nx">defaultDisplay</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">hidden</span> <span class="o">=</span> <span class="nx">isHidden</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">&amp;&amp;</span> <span class="nx">display</span> <span class="o">!==</span> <span class="s2">&quot;none&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">hidden</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span><span class="p">,</span> <span class="nx">hidden</span> <span class="o">?</span> <span class="nx">display</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-733" id="section-733">&#182;</a>
</div>
<p>Set the display of most of the elements in a second loop
to avoid the constant reflow</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">index</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">index</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">show</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="nx">show</span> <span class="o">?</span> <span class="nx">values</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">elements</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">setPositiveNumber</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">subtract</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">matches</span> <span class="o">=</span> <span class="nx">rnumsplit</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
  <span class="k">return</span> <span class="nx">matches</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-734" id="section-734">&#182;</a>
</div>
<p>Guard against undefined "subtract", e.g., when used as in cssHooks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">matches</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">subtract</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">matches</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;px&quot;</span> <span class="p">)</span> <span class="o">:</span>
    <span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">augmentWidthOrHeight</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">isBorderBox</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">extra</span> <span class="o">===</span> <span class="p">(</span> <span class="nx">isBorderBox</span> <span class="o">?</span> <span class="s2">&quot;border&quot;</span> <span class="o">:</span> <span class="s2">&quot;content&quot;</span> <span class="p">)</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-735" id="section-735">&#182;</a>
</div>
<p>If we already have the right measurement, avoid augmentation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="mi">4</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-736" id="section-736">&#182;</a>
</div>
<p>Otherwise initialize for horizontal or vertical properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>

    <span class="nx">val</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-737" id="section-737">&#182;</a>
</div>
<p>both box models exclude margin, so add it if we want it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">===</span> <span class="s2">&quot;margin&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">+=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">extra</span> <span class="o">+</span> <span class="nx">cssExpand</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">isBorderBox</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-738" id="section-738">&#182;</a>
</div>
<p>border-box includes padding, so remove it if we want content</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">===</span> <span class="s2">&quot;content&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">-=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span> <span class="o">+</span> <span class="nx">cssExpand</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-739" id="section-739">&#182;</a>
</div>
<p>at this point, extra isn't border nor margin, so remove border</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">!==</span> <span class="s2">&quot;margin&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">-=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span> <span class="o">+</span> <span class="nx">cssExpand</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;Width&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-740" id="section-740">&#182;</a>
</div>
<p>at this point, extra isn't content, so add padding</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">val</span> <span class="o">+=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span> <span class="o">+</span> <span class="nx">cssExpand</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-741" id="section-741">&#182;</a>
</div>
<p>at this point, extra isn't content nor padding, so add border</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">!==</span> <span class="s2">&quot;padding&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span> <span class="o">+</span> <span class="nx">cssExpand</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;Width&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">getWidthOrHeight</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-742" id="section-742">&#182;</a>
</div>
<p>Start with offset property, which is equivalent to the border-box value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">valueIsBorderBox</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">val</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">,</span>
    <span class="nx">styles</span> <span class="o">=</span> <span class="nx">getStyles</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span>
    <span class="nx">isBorderBox</span> <span class="o">=</span> <span class="nx">support</span><span class="p">.</span><span class="nx">boxSizing</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;boxSizing&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;border-box&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-743" id="section-743">&#182;</a>
</div>
<p>some non-html elements return undefined for offsetWidth, so check for null/undefined
svg - <a href='https://bugzilla.mozilla.org/show_bug.cgi?id=649285'>https://bugzilla.mozilla.org/show_bug.cgi?id=649285</a>
MathML - <a href='https://bugzilla.mozilla.org/show_bug.cgi?id=491668'>https://bugzilla.mozilla.org/show_bug.cgi?id=491668</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-744" id="section-744">&#182;</a>
</div>
<p>Fall back to computed then uncomputed css if necessary</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">val</span> <span class="o">=</span> <span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-745" id="section-745">&#182;</a>
</div>
<p>Computed unit is not pixels. Stop here and return.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">rnumnonpx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-746" id="section-746">&#182;</a>
</div>
<p>we need the check for style in case a browser which returns unreliable values
for getComputedStyle silently falls back to the reliable elem.style</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">valueIsBorderBox</span> <span class="o">=</span> <span class="nx">isBorderBox</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">boxSizingReliable</span><span class="p">()</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-747" id="section-747">&#182;</a>
</div>
<p>Normalize "", auto, and prepare for extra</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">val</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-748" id="section-748">&#182;</a>
</div>
<p>use the active box-sizing model to add/subtract irrelevant styles</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">+</span>
    <span class="nx">augmentWidthOrHeight</span><span class="p">(</span>
      <span class="nx">elem</span><span class="p">,</span>
      <span class="nx">name</span><span class="p">,</span>
      <span class="nx">extra</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">isBorderBox</span> <span class="o">?</span> <span class="s2">&quot;border&quot;</span> <span class="o">:</span> <span class="s2">&quot;content&quot;</span> <span class="p">),</span>
      <span class="nx">valueIsBorderBox</span><span class="p">,</span>
      <span class="nx">styles</span>
    <span class="p">)</span>
  <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-749" id="section-749">&#182;</a>
</div>
<p>Add in style property hooks for overriding the default
behavior of getting and setting a style property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">cssHooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">opacity</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-750" id="section-750">&#182;</a>
</div>
<p>We should always get a number back from opacity</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;opacity&quot;</span> <span class="p">);</span>
          <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="s2">&quot;1&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-751" id="section-751">&#182;</a>
</div>
<p>Don't automatically add "px" to these possibly-unitless properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">cssNumber</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;columnCount&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;fillOpacity&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;flexGrow&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;flexShrink&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;fontWeight&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;lineHeight&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;opacity&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;order&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;orphans&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;widows&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;zIndex&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;zoom&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-752" id="section-752">&#182;</a>
</div>
<p>Add in properties whose names you wish to fix before
setting or getting the value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">cssProps</span><span class="o">:</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-753" id="section-753">&#182;</a>
</div>
<p>normalize float css property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;float&quot;</span><span class="o">:</span> <span class="nx">support</span><span class="p">.</span><span class="nx">cssFloat</span> <span class="o">?</span> <span class="s2">&quot;cssFloat&quot;</span> <span class="o">:</span> <span class="s2">&quot;styleFloat&quot;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-754" id="section-754">&#182;</a>
</div>
<p>Get and set the style property on a DOM Node</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">style</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-755" id="section-755">&#182;</a>
</div>
<p>Don't set styles on text and comment nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-756" id="section-756">&#182;</a>
</div>
<p>Make sure that we're working with the right name</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">,</span>
      <span class="nx">origName</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">),</span>
      <span class="nx">style</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span>

    <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssProps</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssProps</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">vendorPropName</span><span class="p">(</span> <span class="nx">style</span><span class="p">,</span> <span class="nx">origName</span> <span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-757" id="section-757">&#182;</a>
</div>
<p>gets hook for the prefixed version
followed by the unprefixed version</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-758" id="section-758">&#182;</a>
</div>
<p>Check if we're setting a value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">value</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-759" id="section-759">&#182;</a>
</div>
<p>convert relative number strings (+= or -=) to relative numbers. #7345</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">rrelNum</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">value</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">*</span> <span class="nx">ret</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-760" id="section-760">&#182;</a>
</div>
<p>Fixes bug #9237</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;number&quot;</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-761" id="section-761">&#182;</a>
</div>
<p>Make sure that null and NaN values aren't set. See: #7116</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">!==</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-762" id="section-762">&#182;</a>
</div>
<p>If a number was passed in, add 'px' to the (except for certain CSS properties)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">+=</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-763" id="section-763">&#182;</a>
</div>
<p>Fixes #8908, it can be done more correctly by specifing setters in cssHooks,
but it would mean to define eight (for every problematic property) identical functions</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">clearCloneStyle</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;background&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;inherit&quot;</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-764" id="section-764">&#182;</a>
</div>
<p>If a hook was provided, use that value, otherwise just set the specified value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hooks</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-765" id="section-765">&#182;</a>
</div>
<p>Support: IE
Swallow errors from 'invalid' CSS values (#5509)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-766" id="section-766">&#182;</a>
</div>
<p>If a hook was provided get the non-computed value from there</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-767" id="section-767">&#182;</a>
</div>
<p>Otherwise just get the value from the style object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">css</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">num</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">,</span>
      <span class="nx">origName</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-768" id="section-768">&#182;</a>
</div>
<p>Make sure that we're working with the right name</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssProps</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssProps</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">vendorPropName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span> <span class="nx">origName</span> <span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-769" id="section-769">&#182;</a>
</div>
<p>gets hook for the prefixed version
followed by the unprefixed version</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-770" id="section-770">&#182;</a>
</div>
<p>If a hook was provided get the computed value from there</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-771" id="section-771">&#182;</a>
</div>
<p>Otherwise, if a way to get the computed value exists, use that</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-772" id="section-772">&#182;</a>
</div>
<p>convert "normal" to computed value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;normal&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">cssNormalTransform</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">cssNormalTransform</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-773" id="section-773">&#182;</a>
</div>
<p>Return, converting to number if forced or a qualifier was provided and val looks numeric</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">||</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">num</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">val</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">extra</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isNumeric</span><span class="p">(</span> <span class="nx">num</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">num</span> <span class="o">||</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">val</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-774" id="section-774">&#182;</a>
</div>
<p>certain elements can have dimension info if we invisibly show them
however, it must have a current display style that would benefit from this</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span> <span class="nx">rdisplayswap</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">swap</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">cssShow</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">getWidthOrHeight</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">);</span>
          <span class="p">})</span> <span class="o">:</span>
          <span class="nx">getWidthOrHeight</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">styles</span> <span class="o">=</span> <span class="nx">extra</span> <span class="o">&amp;&amp;</span> <span class="nx">getStyles</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">setPositiveNumber</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">extra</span> <span class="o">?</span>
        <span class="nx">augmentWidthOrHeight</span><span class="p">(</span>
          <span class="nx">elem</span><span class="p">,</span>
          <span class="nx">name</span><span class="p">,</span>
          <span class="nx">extra</span><span class="p">,</span>
          <span class="nx">support</span><span class="p">.</span><span class="nx">boxSizing</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;boxSizing&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;border-box&quot;</span><span class="p">,</span>
          <span class="nx">styles</span>
        <span class="p">)</span> <span class="o">:</span> <span class="mi">0</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">opacity</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-775" id="section-775">&#182;</a>
</div>
<p>IE uses filters for opacity</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">ropacity</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="p">(</span><span class="nx">computed</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">.</span><span class="nx">filter</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">filter</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">?</span>
        <span class="p">(</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nb">RegExp</span><span class="p">.</span><span class="nx">$1</span> <span class="p">)</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span>
        <span class="nx">computed</span> <span class="o">?</span> <span class="s2">&quot;1&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">style</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span>
        <span class="nx">currentStyle</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">,</span>
        <span class="nx">opacity</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isNumeric</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;alpha(opacity=&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nx">filter</span> <span class="o">=</span> <span class="nx">currentStyle</span> <span class="o">&amp;&amp;</span> <span class="nx">currentStyle</span><span class="p">.</span><span class="nx">filter</span> <span class="o">||</span> <span class="nx">style</span><span class="p">.</span><span class="nx">filter</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-776" id="section-776">&#182;</a>
</div>
<p>IE has trouble with opacity if it does not have layout
Force it by setting the zoom level</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-777" id="section-777">&#182;</a>
</div>
<p>if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652
if value === "", then remove inline opacity #12685</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">ralpha</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span>
          <span class="nx">style</span><span class="p">.</span><span class="nx">removeAttribute</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-778" id="section-778">&#182;</a>
</div>
<p>Setting style.filter to null, "" &amp; " " still leave "filter:" in the cssText
if "filter:" is present at all, clearType is disabled, we want to avoid this
style.removeAttribute is IE Only, but so apparently is this code path...</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">style</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="s2">&quot;filter&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-779" id="section-779">&#182;</a>
</div>
<p>if there is no filter style applied in a css rule or unset inline opacity, we are done</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">||</span> <span class="nx">currentStyle</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">currentStyle</span><span class="p">.</span><span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-780" id="section-780">&#182;</a>
</div>
<p>otherwise, set new filter values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">style</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="nx">ralpha</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">filter</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nx">filter</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">ralpha</span><span class="p">,</span> <span class="nx">opacity</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">filter</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">opacity</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">.</span><span class="nx">marginRight</span> <span class="o">=</span> <span class="nx">addGetHookIf</span><span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">reliableMarginRight</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-781" id="section-781">&#182;</a>
</div>
<p>WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
Work around by temporarily setting element display to inline-block</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">swap</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="p">{</span> <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;inline-block&quot;</span> <span class="p">},</span>
        <span class="nx">curCSS</span><span class="p">,</span> <span class="p">[</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;marginRight&quot;</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-782" id="section-782">&#182;</a>
</div>
<p>These hooks are used by animate to expand properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">margin</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nx">padding</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="nx">border</span><span class="o">:</span> <span class="s2">&quot;Width&quot;</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">suffix</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="nx">suffix</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">expand</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">expanded</span> <span class="o">=</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-783" id="section-783">&#182;</a>
</div>
<p>assumes a single number if not a string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">parts</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">value</span> <span class="p">];</span>

      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">expanded</span><span class="p">[</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="nx">cssExpand</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">+</span> <span class="nx">suffix</span> <span class="p">]</span> <span class="o">=</span>
          <span class="nx">parts</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">parts</span><span class="p">[</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">expanded</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rmargin</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">prefix</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="nx">suffix</span> <span class="p">].</span><span class="nx">set</span> <span class="o">=</span> <span class="nx">setPositiveNumber</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">css</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">styles</span><span class="p">,</span> <span class="nx">len</span><span class="p">,</span>
        <span class="nx">map</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">styles</span> <span class="o">=</span> <span class="nx">getStyles</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="nx">len</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">map</span><span class="p">[</span> <span class="nx">name</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">styles</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">map</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">},</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">showHide</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">showHide</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">state</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">state</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">state</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">show</span><span class="p">()</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isHidden</span><span class="p">(</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">show</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>


<span class="kd">function</span> <span class="nx">Tween</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">easing</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">Tween</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">easing</span> <span class="p">);</span>
<span class="p">}</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">Tween</span> <span class="o">=</span> <span class="nx">Tween</span><span class="p">;</span>

<span class="nx">Tween</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="o">:</span> <span class="nx">Tween</span><span class="p">,</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">unit</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">easing</span> <span class="o">=</span> <span class="nx">easing</span> <span class="o">||</span> <span class="s2">&quot;swing&quot;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">now</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cur</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">end</span> <span class="o">=</span> <span class="nx">end</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unit</span> <span class="o">=</span> <span class="nx">unit</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;px&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">cur</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">Tween</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">];</span>

    <span class="k">return</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span> <span class="o">?</span>
      <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="k">this</span> <span class="p">)</span> <span class="o">:</span>
      <span class="nx">Tween</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">.</span><span class="nx">_default</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">run</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">percent</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">eased</span><span class="p">,</span>
      <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">Tween</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="nx">eased</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">easing</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">easing</span> <span class="p">](</span>
        <span class="nx">percent</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="o">*</span> <span class="nx">percent</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="nx">eased</span> <span class="o">=</span> <span class="nx">percent</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">now</span> <span class="o">=</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">end</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span> <span class="p">)</span> <span class="o">*</span> <span class="nx">eased</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">step</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">step</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">now</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">Tween</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">.</span><span class="nx">_default</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Tween</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">Tween</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>

<span class="nx">Tween</span><span class="p">.</span><span class="nx">propHooks</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">_default</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">tween</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span><span class="o">!</span><span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">||</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span> <span class="p">];</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-784" id="section-784">&#182;</a>
</div>
<p>passing an empty string as a 3rd parameter to .css will automatically
attempt a parseFloat and fallback to a string if the parse fails
so, simple values such as "10px" are parsed to Float.
complex values such as "rotate(1rad)" are returned as is.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">result</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-785" id="section-785">&#182;</a>
</div>
<p>Empty strings, null, undefined and "auto" are converted to 0.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="o">!</span><span class="nx">result</span> <span class="o">||</span> <span class="nx">result</span> <span class="o">===</span> <span class="s2">&quot;auto&quot;</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">tween</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-786" id="section-786">&#182;</a>
</div>
<p>use step hook for back compat - use cssHook if its there - use .style if its
available and use plain properties where available</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">step</span><span class="p">[</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">step</span><span class="p">[</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span> <span class="p">](</span> <span class="nx">tween</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssProps</span><span class="p">[</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span><span class="p">,</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">now</span> <span class="o">+</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">unit</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">now</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-787" id="section-787">&#182;</a>
</div>
<p>Support: IE &lt;=9
Panic based approach to setting things on disconnected nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Tween</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">Tween</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">tween</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">&amp;&amp;</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">now</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">easing</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">linear</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">p</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">p</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">swing</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">p</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span> <span class="nx">p</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span> <span class="o">=</span> <span class="nx">Tween</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-788" id="section-788">&#182;</a>
</div>
<p>Back Compat &lt;1.8 extension point</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">step</span> <span class="o">=</span> <span class="p">{};</span>




<span class="kd">var</span>
  <span class="nx">fxNow</span><span class="p">,</span> <span class="nx">timerId</span><span class="p">,</span>
  <span class="nx">rfxtypes</span> <span class="o">=</span> <span class="sr">/^(?:toggle|show|hide)$/</span><span class="p">,</span>
  <span class="nx">rfxnum</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s2">&quot;^(?:([+-])=|)(&quot;</span> <span class="o">+</span> <span class="nx">pnum</span> <span class="o">+</span> <span class="s2">&quot;)([a-z%]*)$&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span> <span class="p">),</span>
  <span class="nx">rrun</span> <span class="o">=</span> <span class="sr">/queueHooks$/</span><span class="p">,</span>
  <span class="nx">animationPrefilters</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">defaultPrefilter</span> <span class="p">],</span>
  <span class="nx">tweeners</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;*&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">tween</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createTween</span><span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span> <span class="p">),</span>
        <span class="nx">target</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">cur</span><span class="p">(),</span>
        <span class="nx">parts</span> <span class="o">=</span> <span class="nx">rfxnum</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">value</span> <span class="p">),</span>
        <span class="nx">unit</span> <span class="o">=</span> <span class="nx">parts</span> <span class="o">&amp;&amp;</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;px&quot;</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-789" id="section-789">&#182;</a>
</div>
<p>Starting value computation is required for potential unit mismatches</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">start</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">unit</span> <span class="o">!==</span> <span class="s2">&quot;px&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">+</span><span class="nx">target</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
          <span class="nx">rfxnum</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">),</span>
        <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">maxIterations</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">start</span> <span class="o">&amp;&amp;</span> <span class="nx">start</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">!==</span> <span class="nx">unit</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-790" id="section-790">&#182;</a>
</div>
<p>Trust units reported by jQuery.css</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">unit</span> <span class="o">=</span> <span class="nx">unit</span> <span class="o">||</span> <span class="nx">start</span><span class="p">[</span> <span class="mi">3</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-791" id="section-791">&#182;</a>
</div>
<p>Make sure we update the tween properties later on</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">parts</span> <span class="o">=</span> <span class="nx">parts</span> <span class="o">||</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-792" id="section-792">&#182;</a>
</div>
<p>Iteratively approximate from a nonzero starting point</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">start</span> <span class="o">=</span> <span class="o">+</span><span class="nx">target</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>

        <span class="k">do</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-793" id="section-793">&#182;</a>
</div>
<p>If previous iteration zeroed out, double until we get <em>something</em>
Use a string for doubling factor so we don't accidentally see scale as unchanged below</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">scale</span> <span class="o">=</span> <span class="nx">scale</span> <span class="o">||</span> <span class="s2">&quot;.5&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-794" id="section-794">&#182;</a>
</div>
<p>Adjust and apply</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">start</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">/</span> <span class="nx">scale</span><span class="p">;</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">unit</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-795" id="section-795">&#182;</a>
</div>
<p>Update scale, tolerating zero or NaN from tween.cur()
And breaking the loop if scale is unchanged or perfect, or if we've just had enough</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span> <span class="nx">scale</span> <span class="o">!==</span> <span class="p">(</span><span class="nx">scale</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">cur</span><span class="p">()</span> <span class="o">/</span> <span class="nx">target</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">scale</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">--</span><span class="nx">maxIterations</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-796" id="section-796">&#182;</a>
</div>
<p>Update tween properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">start</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="o">+</span><span class="nx">start</span> <span class="o">||</span> <span class="o">+</span><span class="nx">target</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">tween</span><span class="p">.</span><span class="nx">unit</span> <span class="o">=</span> <span class="nx">unit</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-797" id="section-797">&#182;</a>
</div>
<p>If a +=/-= token was provided, we're doing a relative animation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">tween</span><span class="p">.</span><span class="nx">end</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">?</span>
          <span class="nx">start</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">*</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">:</span>
          <span class="o">+</span><span class="nx">parts</span><span class="p">[</span> <span class="mi">2</span> <span class="p">];</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">tween</span><span class="p">;</span>
    <span class="p">}</span> <span class="p">]</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-798" id="section-798">&#182;</a>
</div>
<p>Animations created synchronously will run synchronously</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">createFxNow</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">fxNow</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="p">(</span> <span class="nx">fxNow</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="p">);</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-799" id="section-799">&#182;</a>
</div>
<p>Generate parameters to create a standard animation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">genFx</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">includeWidth</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">which</span><span class="p">,</span>
    <span class="nx">attrs</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">type</span> <span class="p">},</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-800" id="section-800">&#182;</a>
</div>
<p>if we include width, step value is 1 to do all cssExpand values,
if we don't include width, step value is 2 to skip over Left and Right</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">includeWidth</span> <span class="o">=</span> <span class="nx">includeWidth</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span> <span class="o">-</span> <span class="nx">includeWidth</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">which</span> <span class="o">=</span> <span class="nx">cssExpand</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
    <span class="nx">attrs</span><span class="p">[</span> <span class="s2">&quot;margin&quot;</span> <span class="o">+</span> <span class="nx">which</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">attrs</span><span class="p">[</span> <span class="s2">&quot;padding&quot;</span> <span class="o">+</span> <span class="nx">which</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">includeWidth</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">attrs</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="nx">attrs</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">attrs</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">createTween</span><span class="p">(</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">animation</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">tween</span><span class="p">,</span>
    <span class="nx">collection</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">tweeners</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[]</span> <span class="p">).</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">tweeners</span><span class="p">[</span> <span class="s2">&quot;*&quot;</span> <span class="p">]</span> <span class="p">),</span>
    <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">length</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">index</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">tween</span> <span class="o">=</span> <span class="nx">collection</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">call</span><span class="p">(</span> <span class="nx">animation</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-801" id="section-801">&#182;</a>
</div>
<p>we're done with this property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">tween</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">defaultPrefilter</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">opts</span> <span class="p">)</span> <span class="p">{</span>
  <span class="cm">/* jshint validthis: true */</span>
  <span class="kd">var</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">toggle</span><span class="p">,</span> <span class="nx">tween</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">,</span> <span class="nx">oldfire</span><span class="p">,</span> <span class="nx">display</span><span class="p">,</span> <span class="nx">checkDisplay</span><span class="p">,</span>
    <span class="nx">anim</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
    <span class="nx">orig</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">style</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span>
    <span class="nx">hidden</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">&amp;&amp;</span> <span class="nx">isHidden</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span>
    <span class="nx">dataShow</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fxshow&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-802" id="section-802">&#182;</a>
</div>
<p>handle queue: false promises</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">opts</span><span class="p">.</span><span class="nx">queue</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_queueHooks</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fx&quot;</span> <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">unqueued</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">hooks</span><span class="p">.</span><span class="nx">unqueued</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">oldfire</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">empty</span><span class="p">.</span><span class="nx">fire</span><span class="p">;</span>
      <span class="nx">hooks</span><span class="p">.</span><span class="nx">empty</span><span class="p">.</span><span class="nx">fire</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hooks</span><span class="p">.</span><span class="nx">unqueued</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">oldfire</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">hooks</span><span class="p">.</span><span class="nx">unqueued</span><span class="o">++</span><span class="p">;</span>

    <span class="nx">anim</span><span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-803" id="section-803">&#182;</a>
</div>
<p>doing this makes sure that the complete handler will be called
before this completes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">anim</span><span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">hooks</span><span class="p">.</span><span class="nx">unqueued</span><span class="o">--</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fx&quot;</span> <span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">hooks</span><span class="p">.</span><span class="nx">empty</span><span class="p">.</span><span class="nx">fire</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-804" id="section-804">&#182;</a>
</div>
<p>height/width overflow pass</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="s2">&quot;height&quot;</span> <span class="k">in</span> <span class="nx">props</span> <span class="o">||</span> <span class="s2">&quot;width&quot;</span> <span class="k">in</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-805" id="section-805">&#182;</a>
</div>
<p>Make sure that nothing sneaks out
Record all 3 overflow attributes because IE does not
change the overflow attribute when overflowX and
overflowY are set to the same value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">opts</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">style</span><span class="p">.</span><span class="nx">overflow</span><span class="p">,</span> <span class="nx">style</span><span class="p">.</span><span class="nx">overflowX</span><span class="p">,</span> <span class="nx">style</span><span class="p">.</span><span class="nx">overflowY</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-806" id="section-806">&#182;</a>
</div>
<p>Set display property to inline-block for height/width
animations on inline elements that are having width/height animated</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">display</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-807" id="section-807">&#182;</a>
</div>
<p>Test default display if display is currently "none"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">checkDisplay</span> <span class="o">=</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="o">?</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">defaultDisplay</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">display</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">checkDisplay</span> <span class="o">===</span> <span class="s2">&quot;inline&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-808" id="section-808">&#182;</a>
</div>
<p>inline-level elements accept inline-block;
block-level elements need to be inline with layout</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">inlineBlockNeedsLayout</span> <span class="o">||</span> <span class="nx">defaultDisplay</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;inline&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;inline-block&quot;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">overflow</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">shrinkWrapBlocks</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">anim</span><span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">style</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">overflow</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
        <span class="nx">style</span><span class="p">.</span><span class="nx">overflowX</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">overflow</span><span class="p">[</span> <span class="mi">1</span> <span class="p">];</span>
        <span class="nx">style</span><span class="p">.</span><span class="nx">overflowY</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">overflow</span><span class="p">[</span> <span class="mi">2</span> <span class="p">];</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-809" id="section-809">&#182;</a>
</div>
<p>show/hide pass</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">value</span> <span class="o">=</span> <span class="nx">props</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">rfxtypes</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">props</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span>
      <span class="nx">toggle</span> <span class="o">=</span> <span class="nx">toggle</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;toggle&quot;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="p">(</span> <span class="nx">hidden</span> <span class="o">?</span> <span class="s2">&quot;hide&quot;</span> <span class="o">:</span> <span class="s2">&quot;show&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-810" id="section-810">&#182;</a>
</div>
<p>If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;show&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">dataShow</span> <span class="o">&amp;&amp;</span> <span class="nx">dataShow</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">hidden</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">orig</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">dataShow</span> <span class="o">&amp;&amp;</span> <span class="nx">dataShow</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-811" id="section-811">&#182;</a>
</div>
<p>Any non-fx value stops us from restoring the original display value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">display</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">orig</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">dataShow</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;hidden&quot;</span> <span class="k">in</span> <span class="nx">dataShow</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">hidden</span> <span class="o">=</span> <span class="nx">dataShow</span><span class="p">.</span><span class="nx">hidden</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">dataShow</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fxshow&quot;</span><span class="p">,</span> <span class="p">{}</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-812" id="section-812">&#182;</a>
</div>
<p>store state if its toggle - enables .stop().toggle() to "reverse"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">toggle</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dataShow</span><span class="p">.</span><span class="nx">hidden</span> <span class="o">=</span> <span class="o">!</span><span class="nx">hidden</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">hidden</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">anim</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">anim</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">prop</span><span class="p">;</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;fxshow&quot;</span> <span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">orig</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">orig</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">orig</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">tween</span> <span class="o">=</span> <span class="nx">createTween</span><span class="p">(</span> <span class="nx">hidden</span> <span class="o">?</span> <span class="nx">dataShow</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">anim</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">dataShow</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">dataShow</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">start</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">hidden</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">tween</span><span class="p">.</span><span class="nx">end</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">start</span><span class="p">;</span>
          <span class="nx">tween</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="nx">prop</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">||</span> <span class="nx">prop</span> <span class="o">===</span> <span class="s2">&quot;height&quot;</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-813" id="section-813">&#182;</a>
</div>
<p>If this is a noop like .hide().hide(), restore an overwritten display value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="o">?</span> <span class="nx">defaultDisplay</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">display</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;inline&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="nx">display</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">propFilter</span><span class="p">(</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">specialEasing</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-814" id="section-814">&#182;</a>
</div>
<p>camelCase, specialEasing and expand cssHook pass</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">index</span> <span class="p">);</span>
    <span class="nx">easing</span> <span class="o">=</span> <span class="nx">specialEasing</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="nx">value</span> <span class="o">=</span> <span class="nx">props</span><span class="p">[</span> <span class="nx">index</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">easing</span> <span class="o">=</span> <span class="nx">value</span><span class="p">[</span> <span class="mi">1</span> <span class="p">];</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">props</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">!==</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">props</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="k">delete</span> <span class="nx">props</span><span class="p">[</span> <span class="nx">index</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;expand&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">expand</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="k">delete</span> <span class="nx">props</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-815" id="section-815">&#182;</a>
</div>
<p>not quite $.extend, this wont overwrite keys already present.
also - reusing 'index' from above because we have the correct "name"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">props</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">[</span> <span class="nx">index</span> <span class="p">];</span>
          <span class="nx">specialEasing</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">easing</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">specialEasing</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">easing</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Animation</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">properties</span><span class="p">,</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">result</span><span class="p">,</span>
    <span class="nx">stopped</span><span class="p">,</span>
    <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">length</span> <span class="o">=</span> <span class="nx">animationPrefilters</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">().</span><span class="nx">always</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-816" id="section-816">&#182;</a>
</div>
<p>don't match elem in the :animated selector</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">delete</span> <span class="nx">tick</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>
    <span class="p">}),</span>
    <span class="nx">tick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">stopped</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">currentTime</span> <span class="o">=</span> <span class="nx">fxNow</span> <span class="o">||</span> <span class="nx">createFxNow</span><span class="p">(),</span>
        <span class="nx">remaining</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">startTime</span> <span class="o">+</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">duration</span> <span class="o">-</span> <span class="nx">currentTime</span> <span class="p">),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-817" id="section-817">&#182;</a>
</div>
<p>archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">temp</span> <span class="o">=</span> <span class="nx">remaining</span> <span class="o">/</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">duration</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">percent</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">temp</span><span class="p">,</span>
        <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">length</span> <span class="o">=</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">tweens</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">length</span> <span class="p">;</span> <span class="nx">index</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">animation</span><span class="p">.</span><span class="nx">tweens</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">run</span><span class="p">(</span> <span class="nx">percent</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">deferred</span><span class="p">.</span><span class="nx">notifyWith</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="p">[</span> <span class="nx">animation</span><span class="p">,</span> <span class="nx">percent</span><span class="p">,</span> <span class="nx">remaining</span> <span class="p">]);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">percent</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">remaining</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="p">[</span> <span class="nx">animation</span> <span class="p">]</span> <span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">animation</span> <span class="o">=</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">({</span>
      <span class="nx">elem</span><span class="o">:</span> <span class="nx">elem</span><span class="p">,</span>
      <span class="nx">props</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">properties</span> <span class="p">),</span>
      <span class="nx">opts</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="kc">true</span><span class="p">,</span> <span class="p">{</span> <span class="nx">specialEasing</span><span class="o">:</span> <span class="p">{}</span> <span class="p">},</span> <span class="nx">options</span> <span class="p">),</span>
      <span class="nx">originalProperties</span><span class="o">:</span> <span class="nx">properties</span><span class="p">,</span>
      <span class="nx">originalOptions</span><span class="o">:</span> <span class="nx">options</span><span class="p">,</span>
      <span class="nx">startTime</span><span class="o">:</span> <span class="nx">fxNow</span> <span class="o">||</span> <span class="nx">createFxNow</span><span class="p">(),</span>
      <span class="nx">duration</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
      <span class="nx">tweens</span><span class="o">:</span> <span class="p">[],</span>
      <span class="nx">createTween</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">end</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">tween</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Tween</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span>
            <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">specialEasing</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">easing</span> <span class="p">);</span>
        <span class="nx">animation</span><span class="p">.</span><span class="nx">tweens</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">tween</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">tween</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-818" id="section-818">&#182;</a>
</div>
<p>if we are going to the end, we want to run all the tweens
otherwise we skip this part</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">length</span> <span class="o">=</span> <span class="nx">gotoEnd</span> <span class="o">?</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">tweens</span><span class="p">.</span><span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">stopped</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">stopped</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">length</span> <span class="p">;</span> <span class="nx">index</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">animation</span><span class="p">.</span><span class="nx">tweens</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">run</span><span class="p">(</span> <span class="mi">1</span> <span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-819" id="section-819">&#182;</a>
</div>
<p>resolve when we played the last frame
otherwise, reject</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="p">[</span> <span class="nx">animation</span><span class="p">,</span> <span class="nx">gotoEnd</span> <span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">deferred</span><span class="p">.</span><span class="nx">rejectWith</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="p">[</span> <span class="nx">animation</span><span class="p">,</span> <span class="nx">gotoEnd</span> <span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}),</span>
    <span class="nx">props</span> <span class="o">=</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

  <span class="nx">propFilter</span><span class="p">(</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">specialEasing</span> <span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">length</span> <span class="p">;</span> <span class="nx">index</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="nx">animationPrefilters</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">call</span><span class="p">(</span> <span class="nx">animation</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span> <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">createTween</span><span class="p">,</span> <span class="nx">animation</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">start</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">start</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">animation</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">timer</span><span class="p">(</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">tick</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="o">:</span> <span class="nx">elem</span><span class="p">,</span>
      <span class="nx">anim</span><span class="o">:</span> <span class="nx">animation</span><span class="p">,</span>
      <span class="nx">queue</span><span class="o">:</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">queue</span>
    <span class="p">})</span>
  <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-820" id="section-820">&#182;</a>
</div>
<p>attach callbacks from options</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">progress</span><span class="p">(</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">progress</span> <span class="p">)</span>
    <span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">done</span><span class="p">,</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">complete</span> <span class="p">)</span>
    <span class="p">.</span><span class="nx">fail</span><span class="p">(</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">fail</span> <span class="p">)</span>
    <span class="p">.</span><span class="nx">always</span><span class="p">(</span> <span class="nx">animation</span><span class="p">.</span><span class="nx">opts</span><span class="p">.</span><span class="nx">always</span> <span class="p">);</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">Animation</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">Animation</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">tweener</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">callback</span> <span class="o">=</span> <span class="nx">props</span><span class="p">;</span>
      <span class="nx">props</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;*&quot;</span> <span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">props</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">prop</span><span class="p">,</span>
      <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">length</span> <span class="p">;</span> <span class="nx">index</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">prop</span> <span class="o">=</span> <span class="nx">props</span><span class="p">[</span> <span class="nx">index</span> <span class="p">];</span>
      <span class="nx">tweeners</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">tweeners</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="nx">tweeners</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">].</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">prefilter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">prepend</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">prepend</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">animationPrefilters</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">animationPrefilters</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">speed</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">opt</span> <span class="o">=</span> <span class="nx">speed</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">speed</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">speed</span> <span class="p">)</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">complete</span><span class="o">:</span> <span class="nx">fn</span> <span class="o">||</span> <span class="o">!</span><span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">easing</span> <span class="o">||</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">speed</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">speed</span><span class="p">,</span>
    <span class="nx">duration</span><span class="o">:</span> <span class="nx">speed</span><span class="p">,</span>
    <span class="nx">easing</span><span class="o">:</span> <span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">easing</span> <span class="o">||</span> <span class="nx">easing</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">easing</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">easing</span>
  <span class="p">};</span>

  <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">off</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="o">:</span>
    <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="k">in</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span><span class="p">[</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span><span class="p">.</span><span class="nx">_default</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-821" id="section-821">&#182;</a>
</div>
<p>normalize opt.queue - true/undefined/null -> "fx"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="o">=</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-822" id="section-822">&#182;</a>
</div>
<p>Queueing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">opt</span><span class="p">.</span><span class="nx">old</span> <span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">complete</span><span class="p">;</span>

  <span class="nx">opt</span><span class="p">.</span><span class="nx">complete</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">old</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">opt</span><span class="p">.</span><span class="nx">old</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">opt</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">fadeTo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-823" id="section-823">&#182;</a>
</div>
<p>show any hidden elements after setting opacity to 0</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">isHidden</span> <span class="p">).</span><span class="nx">css</span><span class="p">(</span> <span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mi">0</span> <span class="p">).</span><span class="nx">show</span><span class="p">()</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-824" id="section-824">&#182;</a>
</div>
<p>animate to the value specified</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">.</span><span class="nx">end</span><span class="p">().</span><span class="nx">animate</span><span class="p">({</span> <span class="nx">opacity</span><span class="o">:</span> <span class="nx">to</span> <span class="p">},</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">animate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">empty</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">prop</span> <span class="p">),</span>
      <span class="nx">optall</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">speed</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">),</span>
      <span class="nx">doAnimation</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-825" id="section-825">&#182;</a>
</div>
<p>Operate on a copy of prop so per-property easing won't be lost</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">anim</span> <span class="o">=</span> <span class="nx">Animation</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">prop</span> <span class="p">),</span> <span class="nx">optall</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-826" id="section-826">&#182;</a>
</div>
<p>Empty animations, or finishing resolves immediately</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">empty</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;finish&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">anim</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="nx">doAnimation</span><span class="p">.</span><span class="nx">finish</span> <span class="o">=</span> <span class="nx">doAnimation</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">empty</span> <span class="o">||</span> <span class="nx">optall</span><span class="p">.</span><span class="nx">queue</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">?</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">doAnimation</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">optall</span><span class="p">.</span><span class="nx">queue</span><span class="p">,</span> <span class="nx">doAnimation</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">clearQueue</span><span class="p">,</span> <span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">stopQueue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">hooks</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">stop</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">stop</span><span class="p">;</span>
      <span class="k">delete</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">stop</span><span class="p">;</span>
      <span class="nx">stop</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">);</span>
    <span class="p">};</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">gotoEnd</span> <span class="o">=</span> <span class="nx">clearQueue</span><span class="p">;</span>
      <span class="nx">clearQueue</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">clearQueue</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">,</span> <span class="p">[]</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">dequeue</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">index</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queueHooks&quot;</span><span class="p">,</span>
        <span class="nx">timers</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">,</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">index</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">stop</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">stopQueue</span><span class="p">(</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">stop</span> <span class="o">&amp;&amp;</span> <span class="nx">rrun</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">index</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">stopQueue</span><span class="p">(</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">timers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">index</span><span class="o">--</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">elem</span> <span class="o">===</span> <span class="k">this</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">queue</span> <span class="o">===</span> <span class="nx">type</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">anim</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">);</span>
          <span class="nx">dequeue</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="nx">timers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">index</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-827" id="section-827">&#182;</a>
</div>
<p>start the next in the queue if the last step wasn't forced
timers currently will call their complete callbacks, which will dequeue
but only if they were gotoEnd</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">dequeue</span> <span class="o">||</span> <span class="o">!</span><span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">finish</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">!==</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">index</span><span class="p">,</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
        <span class="nx">queue</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span> <span class="p">],</span>
        <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queueHooks&quot;</span> <span class="p">],</span>
        <span class="nx">timers</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">,</span>
        <span class="nx">length</span> <span class="o">=</span> <span class="nx">queue</span> <span class="o">?</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-828" id="section-828">&#182;</a>
</div>
<p>enable finishing flag on private data</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">data</span><span class="p">.</span><span class="nx">finish</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-829" id="section-829">&#182;</a>
</div>
<p>empty the queue first</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="p">[]</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">stop</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">hooks</span><span class="p">.</span><span class="nx">stop</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-830" id="section-830">&#182;</a>
</div>
<p>look for any active animations, and finish them</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">timers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">index</span><span class="o">--</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">elem</span> <span class="o">===</span> <span class="k">this</span> <span class="o">&amp;&amp;</span> <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">queue</span> <span class="o">===</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">timers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">anim</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>
          <span class="nx">timers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">index</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-831" id="section-831">&#182;</a>
</div>
<p>look for any animations in the old queue and finish them</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">index</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">queue</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">queue</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">finish</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">queue</span><span class="p">[</span> <span class="nx">index</span> <span class="p">].</span><span class="nx">finish</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-832" id="section-832">&#182;</a>
</div>
<p>turn off finishing flag</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">delete</span> <span class="nx">data</span><span class="p">.</span><span class="nx">finish</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;toggle&quot;</span><span class="p">,</span> <span class="s2">&quot;show&quot;</span><span class="p">,</span> <span class="s2">&quot;hide&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">cssFn</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">speed</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">speed</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="o">?</span>
      <span class="nx">cssFn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">genFx</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="kc">true</span> <span class="p">),</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-833" id="section-833">&#182;</a>
</div>
<p>Generate shortcuts for custom animations</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">slideDown</span><span class="o">:</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;show&quot;</span><span class="p">),</span>
  <span class="nx">slideUp</span><span class="o">:</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;hide&quot;</span><span class="p">),</span>
  <span class="nx">slideToggle</span><span class="o">:</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;toggle&quot;</span><span class="p">),</span>
  <span class="nx">fadeIn</span><span class="o">:</span> <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="s2">&quot;show&quot;</span> <span class="p">},</span>
  <span class="nx">fadeOut</span><span class="o">:</span> <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="s2">&quot;hide&quot;</span> <span class="p">},</span>
  <span class="nx">fadeToggle</span><span class="o">:</span> <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="s2">&quot;toggle&quot;</span> <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">tick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">timer</span><span class="p">,</span>
    <span class="nx">timers</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">,</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nx">fxNow</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">timers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">timer</span> <span class="o">=</span> <span class="nx">timers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-834" id="section-834">&#182;</a>
</div>
<p>Checks the timer has not already been removed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">timer</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">timers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">timer</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">timers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">i</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">timers</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="nx">fxNow</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">timer</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">timer</span> <span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">timer</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">interval</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">timerId</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">timerId</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">tick</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">interval</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">clearInterval</span><span class="p">(</span> <span class="nx">timerId</span> <span class="p">);</span>
  <span class="nx">timerId</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">slow</span><span class="o">:</span> <span class="mi">600</span><span class="p">,</span>
  <span class="nx">fast</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-835" id="section-835">&#182;</a>
</div>
<p>Default speed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_default</span><span class="o">:</span> <span class="mi">400</span>
<span class="p">};</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-836" id="section-836">&#182;</a>
</div>
<p>Based off of the plugin by Clint Helfers, with permission.
<a href='http://blindsignals.com/index.php/2009/07/jquery-delay/'>http://blindsignals.com/index.php/2009/07/jquery-delay/</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">delay</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">time</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span><span class="p">[</span> <span class="nx">time</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">time</span> <span class="o">:</span> <span class="nx">time</span><span class="p">;</span>
  <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">hooks</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">timeout</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">time</span> <span class="p">);</span>
    <span class="nx">hooks</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">timeout</span> <span class="p">);</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">};</span>


<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-837" id="section-837">&#182;</a>
</div>
<p>Minified: var a,b,c,d,e</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">input</span><span class="p">,</span> <span class="nx">div</span><span class="p">,</span> <span class="nx">select</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">opt</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-838" id="section-838">&#182;</a>
</div>
<p>Setup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;className&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span> <span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;  &lt;link/&gt;&lt;table&gt;&lt;/table&gt;&lt;a href=&#39;/a&#39;&gt;a&lt;/a&gt;&lt;input type=&#39;checkbox&#39;/&gt;&quot;</span><span class="p">;</span>
  <span class="nx">a</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-839" id="section-839">&#182;</a>
</div>
<p>First batch of tests.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">select</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">);</span>
  <span class="nx">opt</span> <span class="o">=</span> <span class="nx">select</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;option&quot;</span><span class="p">)</span> <span class="p">);</span>
  <span class="nx">input</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>

  <span class="nx">a</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">&quot;top:1px&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-840" id="section-840">&#182;</a>
</div>
<p>Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">getSetAttribute</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">className</span> <span class="o">!==</span> <span class="s2">&quot;t&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-841" id="section-841">&#182;</a>
</div>
<p>Get the style information from getAttribute
(IE uses .cssText instead)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">style</span> <span class="o">=</span> <span class="sr">/top/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;style&quot;</span><span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-842" id="section-842">&#182;</a>
</div>
<p>Make sure that URLs aren't manipulated
(IE normalizes it by default)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">hrefNormalized</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;/a&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-843" id="section-843">&#182;</a>
</div>
<p>Check the default checkbox/radio value ("" on WebKit; "on" elsewhere)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">checkOn</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">input</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-844" id="section-844">&#182;</a>
</div>
<p>Make sure that a selected-by-default option has a working selected property.
(WebKit defaults to false instead of true, IE too, if it's in an optgroup)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">optSelected</span> <span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">selected</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-845" id="section-845">&#182;</a>
</div>
<p>Tests for enctype support on a form (#6743)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">enctype</span> <span class="o">=</span> <span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">).</span><span class="nx">enctype</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-846" id="section-846">&#182;</a>
</div>
<p>Make sure that the options inside disabled selects aren't marked as disabled
(WebKit marks them as disabled)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">select</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">support</span><span class="p">.</span><span class="nx">optDisabled</span> <span class="o">=</span> <span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">disabled</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-847" id="section-847">&#182;</a>
</div>
<p>Support: IE8 only
Check if we can trust getAttribute("value")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;input&quot;</span> <span class="p">);</span>
  <span class="nx">input</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
  <span class="nx">support</span><span class="p">.</span><span class="nx">input</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;value&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-848" id="section-848">&#182;</a>
</div>
<p>Check if an input maintains its value after becoming a radio</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">input</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;t&quot;</span><span class="p">;</span>
  <span class="nx">input</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;radio&quot;</span> <span class="p">);</span>
  <span class="nx">support</span><span class="p">.</span><span class="nx">radioValue</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;t&quot;</span><span class="p">;</span>
<span class="p">})();</span>


<span class="kd">var</span> <span class="nx">rreturn</span> <span class="o">=</span> <span class="sr">/\r/g</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">val</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hooks</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">isFunction</span><span class="p">,</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-849" id="section-849">&#182;</a>
</div>
<p>handle most common string cases</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rreturn</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-850" id="section-850">&#182;</a>
</div>
<p>handle cases where value is null/undef or number</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">ret</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">isFunction</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">val</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isFunction</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-851" id="section-851">&#182;</a>
</div>
<p>Treat null/undefined as ""; convert numbers to string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">val</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-852" id="section-852">&#182;</a>
</div>
<p>If set returns undefined, fall back to normal setting</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hooks</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span><span class="p">)</span> <span class="o">||</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">valHooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">option</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">val</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span>
          <span class="nx">val</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-853" id="section-853">&#182;</a>
</div>
<p>Support: IE10-11+
option.text throws exceptions (#14686, #14858)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">select</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">option</span><span class="p">,</span>
          <span class="nx">options</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
          <span class="nx">index</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">,</span>
          <span class="nx">one</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;select-one&quot;</span> <span class="o">||</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">values</span> <span class="o">=</span> <span class="nx">one</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="p">[],</span>
          <span class="nx">max</span> <span class="o">=</span> <span class="nx">one</span> <span class="o">?</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
          <span class="nx">i</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span>
            <span class="nx">max</span> <span class="o">:</span>
            <span class="nx">one</span> <span class="o">?</span> <span class="nx">index</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-854" id="section-854">&#182;</a>
</div>
<p>Loop through all the selected options</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">option</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-855" id="section-855">&#182;</a>
</div>
<p>oldIE doesn't update selected after form reset (#2551)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">option</span><span class="p">.</span><span class="nx">selected</span> <span class="o">||</span> <span class="nx">i</span> <span class="o">===</span> <span class="nx">index</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-856" id="section-856">&#182;</a>
</div>
<p>Don't return options that are disabled or in a disabled optgroup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">optDisabled</span> <span class="o">?</span> <span class="o">!</span><span class="nx">option</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">:</span> <span class="nx">option</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
              <span class="p">(</span> <span class="o">!</span><span class="nx">option</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">option</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="s2">&quot;optgroup&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-857" id="section-857">&#182;</a>
</div>
<p>Get the specific value for the option</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">value</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">option</span> <span class="p">).</span><span class="nx">val</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-858" id="section-858">&#182;</a>
</div>
<p>We don't need an array for one selects</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">one</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-859" id="section-859">&#182;</a>
</div>
<p>Multi-Selects return an array</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
      <span class="p">},</span>

      <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">optionSet</span><span class="p">,</span> <span class="nx">option</span><span class="p">,</span>
          <span class="nx">options</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
          <span class="nx">values</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">value</span> <span class="p">),</span>
          <span class="nx">i</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">option</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">.</span><span class="nx">option</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">option</span> <span class="p">),</span> <span class="nx">values</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-860" id="section-860">&#182;</a>
</div>
<p>Support: IE6
When new option element is added to select box we need to
force reflow of newly added node in order to workaround delay
of initialization properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">try</span> <span class="p">{</span>
              <span class="nx">option</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="nx">optionSet</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">_</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-861" id="section-861">&#182;</a>
</div>
<p>Will be executed only in IE6</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">option</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">;</span>
            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">option</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-862" id="section-862">&#182;</a>
</div>
<p>Force browsers to behave consistently when non-matching value is set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">optionSet</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">selectedIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">options</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-863" id="section-863">&#182;</a>
</div>
<p>Radios and checkboxes getter/setter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span> <span class="s2">&quot;checkbox&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">elem</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkOn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span> <span class="p">].</span><span class="nx">get</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-864" id="section-864">&#182;</a>
</div>
<p>Support: Webkit
"" is returned instead of "on" if a value isn't specified</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;on&quot;</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">});</span>




<span class="kd">var</span> <span class="nx">nodeHook</span><span class="p">,</span> <span class="nx">boolHook</span><span class="p">,</span>
  <span class="nx">attrHandle</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">attrHandle</span><span class="p">,</span>
  <span class="nx">ruseDefault</span> <span class="o">=</span> <span class="sr">/^(?:checked|selected)$/i</span><span class="p">,</span>
  <span class="nx">getSetAttribute</span> <span class="o">=</span> <span class="nx">support</span><span class="p">.</span><span class="nx">getSetAttribute</span><span class="p">,</span>
  <span class="nx">getSetInput</span> <span class="o">=</span> <span class="nx">support</span><span class="p">.</span><span class="nx">input</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">attr</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attr</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">removeAttr</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">attr</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hooks</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span>
      <span class="nx">nType</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-865" id="section-865">&#182;</a>
</div>
<p>don't get/set attributes on text, comment and attribute nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-866" id="section-866">&#182;</a>
</div>
<p>Fallback to prop when attributes are not supported</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span> <span class="o">===</span> <span class="nx">strundefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-867" id="section-867">&#182;</a>
</div>
<p>All attributes are lowercase
Grab necessary hook if one is defined</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">nType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span>
        <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">bool</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">boolHook</span> <span class="o">:</span> <span class="nx">nodeHook</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-868" id="section-868">&#182;</a>
</div>
<p>Non-existent attributes return null, we normalize to undefined</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">ret</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="kc">undefined</span> <span class="o">:</span>
        <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">removeAttr</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">propName</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">attrNames</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span> <span class="nx">rnotwhite</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">attrNames</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">attrNames</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">propName</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-869" id="section-869">&#182;</a>
</div>
<p>Boolean attributes get special treatment (#10870)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">bool</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-870" id="section-870">&#182;</a>
</div>
<p>Set corresponding property to false</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">getSetInput</span> <span class="o">&amp;&amp;</span> <span class="nx">getSetAttribute</span> <span class="o">||</span> <span class="o">!</span><span class="nx">ruseDefault</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">propName</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-871" id="section-871">&#182;</a>
</div>
<p>Support: IE&lt;9
Also clear defaultChecked/defaultSelected (if appropriate)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="s2">&quot;default-&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">]</span> <span class="o">=</span>
              <span class="nx">elem</span><span class="p">[</span> <span class="nx">propName</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-872" id="section-872">&#182;</a>
</div>
<p>See #9699 for explanation of this approach (setting first, then removal)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">getSetAttribute</span> <span class="o">?</span> <span class="nx">name</span> <span class="o">:</span> <span class="nx">propName</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">attrHooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">radioValue</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-873" id="section-873">&#182;</a>
</div>
<p>Setting the type on a radio button after the value resets the value in IE6-9
Reset value to default in case type is set after value during creation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-874" id="section-874">&#182;</a>
</div>
<p>Hook for boolean attributes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">boolHook</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-875" id="section-875">&#182;</a>
</div>
<p>Remove boolean attributes when set to false</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">getSetInput</span> <span class="o">&amp;&amp;</span> <span class="nx">getSetAttribute</span> <span class="o">||</span> <span class="o">!</span><span class="nx">ruseDefault</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-876" id="section-876">&#182;</a>
</div>
<p>IE&lt;8 needs the <em>property</em> name</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="o">!</span><span class="nx">getSetAttribute</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-877" id="section-877">&#182;</a>
</div>
<p>Use defaultChecked and defaultSelected for oldIE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="s2">&quot;default-&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-878" id="section-878">&#182;</a>
</div>
<p>Retrieve booleans specially</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">bool</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span> <span class="sr">/\w+/g</span> <span class="p">),</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">getter</span> <span class="o">=</span> <span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">attr</span><span class="p">;</span>

  <span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">getSetInput</span> <span class="o">&amp;&amp;</span> <span class="nx">getSetAttribute</span> <span class="o">||</span> <span class="o">!</span><span class="nx">ruseDefault</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">?</span>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">handle</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-879" id="section-879">&#182;</a>
</div>
<p>Avoid an infinite loop by temporarily removing this function from the getter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">handle</span> <span class="o">=</span> <span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
        <span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">;</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">getter</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span>
          <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">:</span>
          <span class="kc">null</span><span class="p">;</span>
        <span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">handle</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span> <span class="o">:</span>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="s2">&quot;default-&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">]</span> <span class="o">?</span>
          <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">:</span>
          <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-880" id="section-880">&#182;</a>
</div>
<p>fix oldIE attroperties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">getSetInput</span> <span class="o">||</span> <span class="o">!</span><span class="nx">getSetAttribute</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-881" id="section-881">&#182;</a>
</div>
<p>Does not return so that setAttribute is also used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">defaultValue</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-882" id="section-882">&#182;</a>
</div>
<p>Use nodeHook if defined (#1954); otherwise setAttribute is fine</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span> <span class="nx">nodeHook</span> <span class="o">&amp;&amp;</span> <span class="nx">nodeHook</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-883" id="section-883">&#182;</a>
</div>
<p>IE6/7 do not support getting/setting some attributes with get/setAttribute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">getSetAttribute</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-884" id="section-884">&#182;</a>
</div>
<p>Use this for any attribute in IE6/7
This fixes almost every IE6/7 issue</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">nodeHook</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-885" id="section-885">&#182;</a>
</div>
<p>Set the existing or create a new attribute node</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">ret</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttributeNode</span><span class="p">(</span>
          <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">createAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">))</span>
        <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">ret</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-886" id="section-886">&#182;</a>
</div>
<p>Break association with cloned elements by also using setAttribute (#9646)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;value&quot;</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-887" id="section-887">&#182;</a>
</div>
<p>Some attributes are constructed with empty-string values when not defined</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">attrHandle</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">attrHandle</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">attrHandle</span><span class="p">.</span><span class="nx">coords</span> <span class="o">=</span>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">value</span> <span class="o">!==</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">value</span> <span class="o">:</span>
          <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-888" id="section-888">&#182;</a>
</div>
<p>Fixing value retrieval on a button requires this module</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">.</span><span class="nx">button</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">&amp;&amp;</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">specified</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="nx">nodeHook</span><span class="p">.</span><span class="nx">set</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-889" id="section-889">&#182;</a>
</div>
<p>Set contenteditable to false on removals(#10429)
Setting to empty string throws an error as an invalid value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">.</span><span class="nx">contenteditable</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">nodeHook</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-890" id="section-890">&#182;</a>
</div>
<p>Set width and height to auto instead of 0 on empty string( Bug #8150 )
This is for removals</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span> <span class="p">);</span>
          <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">.</span><span class="nx">style</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-891" id="section-891">&#182;</a>
</div>
<p>Return undefined in the case of empty string
Note: IE uppercases css property names, but if we were to .toLowerCase()
.cssText, that would destroy case senstitivity in URL's, like in "background"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">||</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>




<span class="kd">var</span> <span class="nx">rfocusable</span> <span class="o">=</span> <span class="sr">/^(?:input|select|textarea|button|object)$/i</span><span class="p">,</span>
  <span class="nx">rclickable</span> <span class="o">=</span> <span class="sr">/^(?:a|area)$/i</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">prop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prop</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">removeProp</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-892" id="section-892">&#182;</a>
</div>
<p>try/catch handles cases where IE balks (such as removing a property on window)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">try</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">propFix</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;for&quot;</span><span class="o">:</span> <span class="s2">&quot;htmlFor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;className&quot;</span>
  <span class="p">},</span>

  <span class="nx">prop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">,</span> <span class="nx">notxml</span><span class="p">,</span>
      <span class="nx">nType</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-893" id="section-893">&#182;</a>
</div>
<p>don't get/set properties on text, comment and attribute nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">notxml</span> <span class="o">=</span> <span class="nx">nType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">notxml</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-894" id="section-894">&#182;</a>
</div>
<p>Fix name and attach hooks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
      <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">?</span>
        <span class="nx">ret</span> <span class="o">:</span>
        <span class="p">(</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="nx">ret</span> <span class="o">:</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">propHooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">tabIndex</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-895" id="section-895">&#182;</a>
</div>
<p>elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set
<a href='http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/'>http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/</a>
Use proper attribute retrieval(#12072)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">tabindex</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;tabindex&quot;</span> <span class="p">);</span>

        <span class="k">return</span> <span class="nx">tabindex</span> <span class="o">?</span>
          <span class="nb">parseInt</span><span class="p">(</span> <span class="nx">tabindex</span><span class="p">,</span> <span class="mi">10</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">rfocusable</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">rclickable</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">href</span> <span class="o">?</span>
            <span class="mi">0</span> <span class="o">:</span>
            <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-896" id="section-896">&#182;</a>
</div>
<p>Some attributes require a special call on IE
<a href='http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx'>http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">hrefNormalized</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-897" id="section-897">&#182;</a>
</div>
<p>href/src property should get the full normalized URL (#10299/#12915)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="s2">&quot;src&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="mi">4</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-898" id="section-898">&#182;</a>
</div>
<p>Support: Safari, IE9+
mis-reports the default selected property of an option
Accessing the parent's selectedIndex property fixes it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">optSelected</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">parent</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-899" id="section-899">&#182;</a>
</div>
<p>Make sure that it also works with optgroups, see #5701</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">parent</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span>
  <span class="s2">&quot;tabIndex&quot;</span><span class="p">,</span>
  <span class="s2">&quot;readOnly&quot;</span><span class="p">,</span>
  <span class="s2">&quot;maxLength&quot;</span><span class="p">,</span>
  <span class="s2">&quot;cellSpacing&quot;</span><span class="p">,</span>
  <span class="s2">&quot;cellPadding&quot;</span><span class="p">,</span>
  <span class="s2">&quot;rowSpan&quot;</span><span class="p">,</span>
  <span class="s2">&quot;colSpan&quot;</span><span class="p">,</span>
  <span class="s2">&quot;useMap&quot;</span><span class="p">,</span>
  <span class="s2">&quot;frameBorder&quot;</span><span class="p">,</span>
  <span class="s2">&quot;contentEditable&quot;</span>
<span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-900" id="section-900">&#182;</a>
</div>
<p>IE6/7 call enctype encoding</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">enctype</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">.</span><span class="nx">enctype</span> <span class="o">=</span> <span class="s2">&quot;encoding&quot;</span><span class="p">;</span>
<span class="p">}</span>




<span class="kd">var</span> <span class="nx">rclass</span> <span class="o">=</span> <span class="sr">/[\t\r\n\f]/g</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">addClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">classes</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">clazz</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">finalValue</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">proceed</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">j</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">addClass</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">proceed</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-901" id="section-901">&#182;</a>
</div>
<p>The disjunction here is for better compressibility (see removeClass)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">classes</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">match</span><span class="p">(</span> <span class="nx">rnotwhite</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>

      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
        <span class="nx">cur</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">?</span>
          <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rclass</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="o">:</span>
          <span class="s2">&quot; &quot;</span>
        <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">clazz</span> <span class="o">=</span> <span class="nx">classes</span><span class="p">[</span><span class="nx">j</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">clazz</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">cur</span> <span class="o">+=</span> <span class="nx">clazz</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-902" id="section-902">&#182;</a>
</div>
<p>only assign if different to avoid unneeded rendering.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">finalValue</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">!==</span> <span class="nx">finalValue</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">finalValue</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">removeClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">classes</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">clazz</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">finalValue</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">proceed</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">j</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">proceed</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">classes</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">match</span><span class="p">(</span> <span class="nx">rnotwhite</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>

      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-903" id="section-903">&#182;</a>
</div>
<p>This expression is here for better compressibility (see addClass)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">cur</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">?</span>
          <span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rclass</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="o">:</span>
          <span class="s2">&quot;&quot;</span>
        <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">clazz</span> <span class="o">=</span> <span class="nx">classes</span><span class="p">[</span><span class="nx">j</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-904" id="section-904">&#182;</a>
</div>
<p>Remove <em>all</em> instances</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">clazz</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">clazz</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-905" id="section-905">&#182;</a>
</div>
<p>only assign if different to avoid unneeded rendering.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">finalValue</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">!==</span> <span class="nx">finalValue</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">finalValue</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">toggleClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">stateVal</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">value</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">stateVal</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">stateVal</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span> <span class="nx">stateVal</span><span class="p">),</span> <span class="nx">stateVal</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-906" id="section-906">&#182;</a>
</div>
<p>toggle individual class names</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">className</span><span class="p">,</span>
          <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
          <span class="nx">classNames</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span> <span class="nx">rnotwhite</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>

        <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">classNames</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-907" id="section-907">&#182;</a>
</div>
<p>check each className given, space separated list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">self</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span> <span class="nx">className</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span> <span class="nx">className</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span> <span class="nx">className</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-908" id="section-908">&#182;</a>
</div>
<p>Toggle whole class name</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="nx">strundefined</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-909" id="section-909">&#182;</a>
</div>
<p>store className if set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;__className__&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-910" id="section-910">&#182;</a>
</div>
<p>If the element has a class name or if we're passed "false",
then remove the whole classname (if there was one, the above saved it).
Otherwise bring back whatever was previously saved (if anything),
falling back to the empty string if nothing was stored.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;__className__&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">hasClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rclass</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">className</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>





</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-911" id="section-911">&#182;</a>
</div>
<p>Return jQuery for attributes-only inclusion</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">(</span><span class="s2">&quot;blur focus focusin focusout load resize scroll unload click dblclick &quot;</span> <span class="o">+</span>
  <span class="s2">&quot;mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave &quot;</span> <span class="o">+</span>
  <span class="s2">&quot;change select submit keydown keypress keyup error contextmenu&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-912" id="section-912">&#182;</a>
</div>
<p>Handle event binding</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">hover</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fnOver</span><span class="p">,</span> <span class="nx">fnOut</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">mouseenter</span><span class="p">(</span> <span class="nx">fnOver</span> <span class="p">).</span><span class="nx">mouseleave</span><span class="p">(</span> <span class="nx">fnOut</span> <span class="o">||</span> <span class="nx">fnOver</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">bind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">unbind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">delegate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">undelegate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-913" id="section-913">&#182;</a>
</div>
<p>( namespace ) or ( selector, types [, fn] )</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="s2">&quot;**&quot;</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">selector</span> <span class="o">||</span> <span class="s2">&quot;**&quot;</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>


<span class="kd">var</span> <span class="nx">nonce</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">rquery</span> <span class="o">=</span> <span class="p">(</span><span class="sr">/\?/</span><span class="p">);</span>



<span class="kd">var</span> <span class="nx">rvalidtokens</span> <span class="o">=</span> <span class="sr">/(,)|(\[|{)|(}|])|&quot;(?:[^&quot;\\\r\n]|\\[&quot;\\\/bfnrt]|\\u[\da-fA-F]{4})*&quot;\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseJSON</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-914" id="section-914">&#182;</a>
</div>
<p>Attempt to parse using the native JSON parser first</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-915" id="section-915">&#182;</a>
</div>
<p>Support: Android 2.3
Workaround failure to string-cast null input</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">data</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">requireNonComma</span><span class="p">,</span>
    <span class="nx">depth</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">str</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">data</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-916" id="section-916">&#182;</a>
</div>
<p>Guard against invalid (and possibly dangerous) input by ensuring that nothing remains
after removing valid tokens</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">str</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rvalidtokens</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">token</span><span class="p">,</span> <span class="nx">comma</span><span class="p">,</span> <span class="nx">open</span><span class="p">,</span> <span class="nx">close</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-917" id="section-917">&#182;</a>
</div>
<p>Force termination if we see a misplaced comma</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">requireNonComma</span> <span class="o">&amp;&amp;</span> <span class="nx">comma</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">depth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-918" id="section-918">&#182;</a>
</div>
<p>Perform no more replacements after returning to outermost depth</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">depth</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">token</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-919" id="section-919">&#182;</a>
</div>
<p>Commas must not follow "[", "{", or ","</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">requireNonComma</span> <span class="o">=</span> <span class="nx">open</span> <span class="o">||</span> <span class="nx">comma</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-920" id="section-920">&#182;</a>
</div>
<p>Determine new depth
array/object open ("[" or "{"): depth += true - false (increment)
array/object close ("]" or "}"): depth += false - true (decrement)
other cases ("," or primitive): depth += true - true (numeric cast)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">depth</span> <span class="o">+=</span> <span class="o">!</span><span class="nx">close</span> <span class="o">-</span> <span class="o">!</span><span class="nx">open</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-921" id="section-921">&#182;</a>
</div>
<p>Remove this token</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="p">})</span> <span class="p">)</span> <span class="o">?</span>
    <span class="p">(</span> <span class="nb">Function</span><span class="p">(</span> <span class="s2">&quot;return &quot;</span> <span class="o">+</span> <span class="nx">str</span> <span class="p">)</span> <span class="p">)()</span> <span class="o">:</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;Invalid JSON: &quot;</span> <span class="o">+</span> <span class="nx">data</span> <span class="p">);</span>
<span class="p">};</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-922" id="section-922">&#182;</a>
</div>
<p>Cross-browser xml parsing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseXML</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">xml</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">data</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">data</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">DOMParser</span> <span class="p">)</span> <span class="p">{</span> <span class="c1">// Standard</span>
      <span class="nx">tmp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DOMParser</span><span class="p">();</span>
      <span class="nx">xml</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">parseFromString</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="s2">&quot;text/xml&quot;</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// IE</span>
      <span class="nx">xml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span> <span class="s2">&quot;Microsoft.XMLDOM&quot;</span> <span class="p">);</span>
      <span class="nx">xml</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="s2">&quot;false&quot;</span><span class="p">;</span>
      <span class="nx">xml</span><span class="p">.</span><span class="nx">loadXML</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">xml</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">xml</span> <span class="o">||</span> <span class="o">!</span><span class="nx">xml</span><span class="p">.</span><span class="nx">documentElement</span> <span class="o">||</span> <span class="nx">xml</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;parsererror&quot;</span> <span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;Invalid XML: &quot;</span> <span class="o">+</span> <span class="nx">data</span> <span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">xml</span><span class="p">;</span>
<span class="p">};</span>


<span class="kd">var</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-923" id="section-923">&#182;</a>
</div>
<p>Document location</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ajaxLocParts</span><span class="p">,</span>
  <span class="nx">ajaxLocation</span><span class="p">,</span>

  <span class="nx">rhash</span> <span class="o">=</span> <span class="sr">/#.*$/</span><span class="p">,</span>
  <span class="nx">rts</span> <span class="o">=</span> <span class="sr">/([?&amp;])_=[^&amp;]*/</span><span class="p">,</span>
  <span class="nx">rheaders</span> <span class="o">=</span> <span class="sr">/^(.*?):[ \t]*([^\r\n]*)\r?$/mg</span><span class="p">,</span> <span class="c1">// IE leaves an \r character at EOL</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="7653%2C%20%238125%2C%20%238152%3A%20local%20protocol%20detection">
  <h1>
    <a href="#7653%2C%20%238125%2C%20%238152%3A%20local%20protocol%20detection" name="7653%2C%20%238125%2C%20%238152%3A%20local%20protocol%20detection" class="pilcrow">&#182;</a>
    7653, #8125, #8152: local protocol detection
  </h1>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rlocalProtocol</span> <span class="o">=</span> <span class="sr">/^(?:about|app|app-storage|.+-extension|file|res|widget):$/</span><span class="p">,</span>
  <span class="nx">rnoContent</span> <span class="o">=</span> <span class="sr">/^(?:GET|HEAD)$/</span><span class="p">,</span>
  <span class="nx">rprotocol</span> <span class="o">=</span> <span class="sr">/^\/\//</span><span class="p">,</span>
  <span class="nx">rurl</span> <span class="o">=</span> <span class="sr">/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-925" id="section-925">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Prefilters
1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
2) These are called:
   - BEFORE asking for a transport
   - AFTER param serialization (s.data is a string if s.processData is true)
3) key is the dataType
4) the catchall symbol "<em>" can be used
5) execution will start with transport dataType and THEN continue down to "</em>" if needed</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">prefilters</span> <span class="o">=</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-926" id="section-926">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Transports bindings
1) key is the dataType
2) the catchall symbol "<em>" can be used
3) selection will start with transport dataType and THEN go to "</em>" if needed</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">transports</span> <span class="o">=</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-927" id="section-927">&#182;</a>
</div>
<p>Avoid comment-prolog char sequence (#10098); must appease lint and evade compression</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">allTypes</span> <span class="o">=</span> <span class="s2">&quot;*/&quot;</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="8138%2C%20ie%20may%20throw%20an%20exception%20when%20accessing">
  <h1>
    <a href="#8138%2C%20ie%20may%20throw%20an%20exception%20when%20accessing" name="8138%2C%20ie%20may%20throw%20an%20exception%20when%20accessing" class="pilcrow">&#182;</a>
    8138, IE may throw an exception when accessing
  </h1>
</div>


<p>a field from window.location if document.domain has been set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">try</span> <span class="p">{</span>
  <span class="nx">ajaxLocation</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-929" id="section-929">&#182;</a>
</div>
<p>Use the href attribute of an A element
since IE will modify it given document.location</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ajaxLocation</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;a&quot;</span> <span class="p">);</span>
  <span class="nx">ajaxLocation</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="nx">ajaxLocation</span> <span class="o">=</span> <span class="nx">ajaxLocation</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-930" id="section-930">&#182;</a>
</div>
<p>Segment location into parts</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">ajaxLocParts</span> <span class="o">=</span> <span class="nx">rurl</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ajaxLocation</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-931" id="section-931">&#182;</a>
</div>
<p>Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">addToPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">structure</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-932" id="section-932">&#182;</a>
</div>
<p>dataTypeExpression is optional and defaults to "*"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">dataTypeExpression</span><span class="p">,</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">dataTypeExpression</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">func</span> <span class="o">=</span> <span class="nx">dataTypeExpression</span><span class="p">;</span>
      <span class="nx">dataTypeExpression</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">dataType</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">dataTypes</span> <span class="o">=</span> <span class="nx">dataTypeExpression</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span> <span class="nx">rnotwhite</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-933" id="section-933">&#182;</a>
</div>
<p>For each dataType in the dataTypeExpression</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">dataType</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-934" id="section-934">&#182;</a>
</div>
<p>Prepend if requested</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">dataType</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;+&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">dataType</span> <span class="o">=</span> <span class="nx">dataType</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;*&quot;</span><span class="p">;</span>
          <span class="p">(</span><span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">func</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-935" id="section-935">&#182;</a>
</div>
<p>Otherwise append</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="p">(</span><span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">push</span><span class="p">(</span> <span class="nx">func</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-936" id="section-936">&#182;</a>
</div>
<p>Base inspection function for prefilters and transports</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">structure</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">inspected</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">seekingTransport</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">structure</span> <span class="o">===</span> <span class="nx">transports</span> <span class="p">);</span>

  <span class="kd">function</span> <span class="nx">inspect</span><span class="p">(</span> <span class="nx">dataType</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">selected</span><span class="p">;</span>
    <span class="nx">inspected</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">prefilterOrFactory</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">dataTypeOrTransport</span> <span class="o">=</span> <span class="nx">prefilterOrFactory</span><span class="p">(</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">dataTypeOrTransport</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">seekingTransport</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">inspected</span><span class="p">[</span> <span class="nx">dataTypeOrTransport</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">dataTypeOrTransport</span> <span class="p">);</span>
        <span class="nx">inspect</span><span class="p">(</span> <span class="nx">dataTypeOrTransport</span> <span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">seekingTransport</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="p">(</span> <span class="nx">selected</span> <span class="o">=</span> <span class="nx">dataTypeOrTransport</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">selected</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">inspect</span><span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nx">inspected</span><span class="p">[</span> <span class="s2">&quot;*&quot;</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">inspect</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">);</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-937" id="section-937">&#182;</a>
</div>
<p>A special extend for ajax options
that takes "flat" options (not to be deep extended)
Fixes #9887</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">ajaxExtend</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">deep</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span>
    <span class="nx">flatOptions</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">flatOptions</span> <span class="o">||</span> <span class="p">{};</span>

  <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="p">(</span> <span class="nx">flatOptions</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">?</span> <span class="nx">target</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">deep</span> <span class="o">||</span> <span class="p">(</span><span class="nx">deep</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">)</span> <span class="p">)[</span> <span class="nx">key</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">src</span><span class="p">[</span> <span class="nx">key</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">deep</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">deep</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-938" id="section-938">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Handles responses to an ajax request:
- finds the right dataType (mediates between content-type and expected dataType)
- returns the corresponding response</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">ajaxHandleResponses</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">firstDataType</span><span class="p">,</span> <span class="nx">ct</span><span class="p">,</span> <span class="nx">finalDataType</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span>
    <span class="nx">contents</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contents</span><span class="p">,</span>
    <span class="nx">dataTypes</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-939" id="section-939">&#182;</a>
</div>
<p>Remove auto dataType and get content-type in the process</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">while</span> <span class="p">(</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">ct</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ct</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mimeType</span> <span class="o">||</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-940" id="section-940">&#182;</a>
</div>
<p>Check if we're dealing with a known content-type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">ct</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">contents</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">contents</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">contents</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ct</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">type</span> <span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-941" id="section-941">&#182;</a>
</div>
<p>Check to see if we have a response for the expected dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="k">in</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">finalDataType</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-942" id="section-942">&#182;</a>
</div>
<p>Try convertible dataTypes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span><span class="p">[</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">dataTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">finalDataType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">firstDataType</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">firstDataType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-943" id="section-943">&#182;</a>
</div>
<p>Or just use first one</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">finalDataType</span> <span class="o">=</span> <span class="nx">finalDataType</span> <span class="o">||</span> <span class="nx">firstDataType</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-944" id="section-944">&#182;</a>
</div>
<p>If we found a dataType
We add the dataType to the list if needed
and return the corresponding response</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">finalDataType</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">finalDataType</span> <span class="o">!==</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">finalDataType</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">responses</span><span class="p">[</span> <span class="nx">finalDataType</span> <span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-945" id="section-945">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Chain conversions given the request and the original response
Also sets the responseXXX fields on the jqXHR instance</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">ajaxConvert</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">isSuccess</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">conv2</span><span class="p">,</span> <span class="nx">current</span><span class="p">,</span> <span class="nx">conv</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">,</span> <span class="nx">prev</span><span class="p">,</span>
    <span class="nx">converters</span> <span class="o">=</span> <span class="p">{},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-946" id="section-946">&#182;</a>
</div>
<p>Work with a copy of dataTypes in case we need to modify it for conversion</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">dataTypes</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-947" id="section-947">&#182;</a>
</div>
<p>Create converters map with lowercased keys</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">conv</span> <span class="k">in</span> <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">converters</span><span class="p">[</span> <span class="nx">conv</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span><span class="p">[</span> <span class="nx">conv</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">current</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-948" id="section-948">&#182;</a>
</div>
<p>Convert to each sequential dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">while</span> <span class="p">(</span> <span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">responseFields</span><span class="p">[</span> <span class="nx">current</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">responseFields</span><span class="p">[</span> <span class="nx">current</span> <span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-949" id="section-949">&#182;</a>
</div>
<p>Apply the dataFilter if provided</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">prev</span> <span class="o">&amp;&amp;</span> <span class="nx">isSuccess</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataFilter</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">response</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataFilter</span><span class="p">(</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataType</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">prev</span> <span class="o">=</span> <span class="nx">current</span><span class="p">;</span>
    <span class="nx">current</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-950" id="section-950">&#182;</a>
</div>
<p>There's only work to do if current dataType is non-auto</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">current</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nx">current</span> <span class="o">=</span> <span class="nx">prev</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-951" id="section-951">&#182;</a>
</div>
<p>Convert response if prev dataType is non-auto and differs from current</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">prev</span> <span class="o">!==</span> <span class="s2">&quot;*&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">prev</span> <span class="o">!==</span> <span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-952" id="section-952">&#182;</a>
</div>
<p>Seek a direct converter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">conv</span> <span class="o">=</span> <span class="nx">converters</span><span class="p">[</span> <span class="nx">prev</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">current</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">converters</span><span class="p">[</span> <span class="s2">&quot;* &quot;</span> <span class="o">+</span> <span class="nx">current</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-953" id="section-953">&#182;</a>
</div>
<p>If none found, seek a pair</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">conv</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">conv2</span> <span class="k">in</span> <span class="nx">converters</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-954" id="section-954">&#182;</a>
</div>
<p>If conv2 outputs current</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">conv2</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">tmp</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-955" id="section-955">&#182;</a>
</div>
<p>If prev can be converted to accepted input</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">conv</span> <span class="o">=</span> <span class="nx">converters</span><span class="p">[</span> <span class="nx">prev</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">tmp</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">]</span> <span class="o">||</span>
                <span class="nx">converters</span><span class="p">[</span> <span class="s2">&quot;* &quot;</span> <span class="o">+</span> <span class="nx">tmp</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">];</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">conv</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-956" id="section-956">&#182;</a>
</div>
<p>Condense equivalence converters</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">conv</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">conv</span> <span class="o">=</span> <span class="nx">converters</span><span class="p">[</span> <span class="nx">conv2</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-957" id="section-957">&#182;</a>
</div>
<p>Otherwise, insert the intermediate dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">converters</span><span class="p">[</span> <span class="nx">conv2</span> <span class="p">]</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">current</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
                  <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">tmp</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">);</span>
                <span class="p">}</span>
                <span class="k">break</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-958" id="section-958">&#182;</a>
</div>
<p>Apply converter (if not an equivalence)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">conv</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-959" id="section-959">&#182;</a>
</div>
<p>Unless errors are allowed to bubble, catch and return them</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">conv</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">[</span> <span class="s2">&quot;throws&quot;</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">response</span> <span class="o">=</span> <span class="nx">conv</span><span class="p">(</span> <span class="nx">response</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">try</span> <span class="p">{</span>
              <span class="nx">response</span> <span class="o">=</span> <span class="nx">conv</span><span class="p">(</span> <span class="nx">response</span> <span class="p">);</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="p">{</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">&quot;parsererror&quot;</span><span class="p">,</span> <span class="nx">error</span><span class="o">:</span> <span class="nx">conv</span> <span class="o">?</span> <span class="nx">e</span> <span class="o">:</span> <span class="s2">&quot;No conversion from &quot;</span> <span class="o">+</span> <span class="nx">prev</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="nx">current</span> <span class="p">};</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">response</span> <span class="p">};</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-960" id="section-960">&#182;</a>
</div>
<p>Counter for holding the number of active queries</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">active</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-961" id="section-961">&#182;</a>
</div>
<p>Last-Modified header cache for next request</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">lastModified</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">etag</span><span class="o">:</span> <span class="p">{},</span>

  <span class="nx">ajaxSettings</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">url</span><span class="o">:</span> <span class="nx">ajaxLocation</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
    <span class="nx">isLocal</span><span class="o">:</span> <span class="nx">rlocalProtocol</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">),</span>
    <span class="nx">global</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">processData</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">async</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">contentType</span><span class="o">:</span> <span class="s2">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-962" id="section-962">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>timeout: 0,
data: null,
dataType: null,
username: null,
password: null,
cache: null,
throws: false,
traditional: false,
headers: {},</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">accepts</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;*&quot;</span><span class="o">:</span> <span class="nx">allTypes</span><span class="p">,</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
      <span class="nx">html</span><span class="o">:</span> <span class="s2">&quot;text/html&quot;</span><span class="p">,</span>
      <span class="nx">xml</span><span class="o">:</span> <span class="s2">&quot;application/xml, text/xml&quot;</span><span class="p">,</span>
      <span class="nx">json</span><span class="o">:</span> <span class="s2">&quot;application/json, text/javascript&quot;</span>
    <span class="p">},</span>

    <span class="nx">contents</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">xml</span><span class="o">:</span> <span class="sr">/xml/</span><span class="p">,</span>
      <span class="nx">html</span><span class="o">:</span> <span class="sr">/html/</span><span class="p">,</span>
      <span class="nx">json</span><span class="o">:</span> <span class="sr">/json/</span>
    <span class="p">},</span>

    <span class="nx">responseFields</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">xml</span><span class="o">:</span> <span class="s2">&quot;responseXML&quot;</span><span class="p">,</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;responseText&quot;</span><span class="p">,</span>
      <span class="nx">json</span><span class="o">:</span> <span class="s2">&quot;responseJSON&quot;</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-963" id="section-963">&#182;</a>
</div>
<p>Data converters
Keys separate source (or catchall "*") and destination types with a single space</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">converters</span><span class="o">:</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-964" id="section-964">&#182;</a>
</div>
<p>Convert anything to text</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="s2">&quot;* text&quot;</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-965" id="section-965">&#182;</a>
</div>
<p>Text to html (true = no transformation)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="s2">&quot;text html&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-966" id="section-966">&#182;</a>
</div>
<p>Evaluate text as a json expression</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="s2">&quot;text json&quot;</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseJSON</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-967" id="section-967">&#182;</a>
</div>
<p>Parse text as xml</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="s2">&quot;text xml&quot;</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseXML</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-968" id="section-968">&#182;</a>
</div>
<p>For options that shouldn't be deep extended:
you can add your own custom options here if
and when you create one that shouldn't be
deep extended (see ajaxExtend)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">flatOptions</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">url</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">context</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-969" id="section-969">&#182;</a>
</div>
<p>Creates a full fledged settings object into target
with both ajaxSettings and settings fields.
If target is omitted, writes into ajaxSettings.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ajaxSetup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">settings</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-970" id="section-970">&#182;</a>
</div>
<p>Building a settings object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">ajaxExtend</span><span class="p">(</span> <span class="nx">ajaxExtend</span><span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span> <span class="p">),</span> <span class="nx">settings</span> <span class="p">)</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-971" id="section-971">&#182;</a>
</div>
<p>Extending ajaxSettings</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">ajaxExtend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">,</span> <span class="nx">target</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">ajaxPrefilter</span><span class="o">:</span> <span class="nx">addToPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">prefilters</span> <span class="p">),</span>
  <span class="nx">ajaxTransport</span><span class="o">:</span> <span class="nx">addToPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">transports</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-972" id="section-972">&#182;</a>
</div>
<p>Main method</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ajax</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-973" id="section-973">&#182;</a>
</div>
<p>If url is an object, simulate pre-1.5 signature</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">url</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">options</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
      <span class="nx">url</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-974" id="section-974">&#182;</a>
</div>
<p>Force options to be an object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>

    <span class="kd">var</span> <span class="c1">// Cross-domain detection vars</span>
      <span class="nx">parts</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-975" id="section-975">&#182;</a>
</div>
<p>Loop variable</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">i</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-976" id="section-976">&#182;</a>
</div>
<p>URL without anti-cache param</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">cacheURL</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-977" id="section-977">&#182;</a>
</div>
<p>Response headers as string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">responseHeadersString</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-978" id="section-978">&#182;</a>
</div>
<p>timeout handle</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">timeoutTimer</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-979" id="section-979">&#182;</a>
</div>
<p>To know if global events are to be dispatched</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">fireGlobals</span><span class="p">,</span>

      <span class="nx">transport</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-980" id="section-980">&#182;</a>
</div>
<p>Response headers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">responseHeaders</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-981" id="section-981">&#182;</a>
</div>
<p>Create the final options object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">s</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">options</span> <span class="p">),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-982" id="section-982">&#182;</a>
</div>
<p>Callbacks context</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">callbackContext</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">context</span> <span class="o">||</span> <span class="nx">s</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-983" id="section-983">&#182;</a>
</div>
<p>Context for global events is callbackContext if it is a DOM node or jQuery collection</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">globalEventContext</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">callbackContext</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">||</span> <span class="nx">callbackContext</span><span class="p">.</span><span class="nx">jquery</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">callbackContext</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-984" id="section-984">&#182;</a>
</div>
<p>Deferreds</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(),</span>
      <span class="nx">completeDeferred</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Callbacks</span><span class="p">(</span><span class="s2">&quot;once memory&quot;</span><span class="p">),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-985" id="section-985">&#182;</a>
</div>
<p>Status-dependent callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">statusCode</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span> <span class="p">{},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-986" id="section-986">&#182;</a>
</div>
<p>Headers (they are sent all at once)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">requestHeaders</span> <span class="o">=</span> <span class="p">{},</span>
      <span class="nx">requestHeadersNames</span> <span class="o">=</span> <span class="p">{},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-987" id="section-987">&#182;</a>
</div>
<p>The jqXHR state</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-988" id="section-988">&#182;</a>
</div>
<p>Default abort message</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">strAbort</span> <span class="o">=</span> <span class="s2">&quot;canceled&quot;</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-989" id="section-989">&#182;</a>
</div>
<p>Fake xhr</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jqXHR</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">readyState</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-990" id="section-990">&#182;</a>
</div>
<p>Builds headers hashtable if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">getResponseHeader</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">match</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">responseHeaders</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">responseHeaders</span> <span class="o">=</span> <span class="p">{};</span>
              <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">rheaders</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">responseHeadersString</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">responseHeaders</span><span class="p">[</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span> <span class="mi">2</span> <span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">match</span> <span class="o">=</span> <span class="nx">responseHeaders</span><span class="p">[</span> <span class="nx">key</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">];</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">match</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">match</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-991" id="section-991">&#182;</a>
</div>
<p>Raw string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">getAllResponseHeaders</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">responseHeadersString</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-992" id="section-992">&#182;</a>
</div>
<p>Caches the header</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">setRequestHeader</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">lname</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">state</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">name</span> <span class="o">=</span> <span class="nx">requestHeadersNames</span><span class="p">[</span> <span class="nx">lname</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">requestHeadersNames</span><span class="p">[</span> <span class="nx">lname</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
            <span class="nx">requestHeaders</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-993" id="section-993">&#182;</a>
</div>
<p>Overrides response content-type header</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">overrideMimeType</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">state</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">mimeType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-994" id="section-994">&#182;</a>
</div>
<p>Status-dependent callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">statusCode</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">code</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">for</span> <span class="p">(</span> <span class="nx">code</span> <span class="k">in</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-995" id="section-995">&#182;</a>
</div>
<p>Lazy-add the new callback in a way that preserves old ones</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">statusCode</span><span class="p">[</span> <span class="nx">code</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">statusCode</span><span class="p">[</span> <span class="nx">code</span> <span class="p">],</span> <span class="nx">map</span><span class="p">[</span> <span class="nx">code</span> <span class="p">]</span> <span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-996" id="section-996">&#182;</a>
</div>
<p>Execute the appropriate callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">always</span><span class="p">(</span> <span class="nx">map</span><span class="p">[</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">status</span> <span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-997" id="section-997">&#182;</a>
</div>
<p>Cancel the request</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">abort</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">statusText</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">finalText</span> <span class="o">=</span> <span class="nx">statusText</span> <span class="o">||</span> <span class="nx">strAbort</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">transport</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">transport</span><span class="p">.</span><span class="nx">abort</span><span class="p">(</span> <span class="nx">finalText</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">done</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">finalText</span> <span class="p">);</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-998" id="section-998">&#182;</a>
</div>
<p>Attach deferreds</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">(</span> <span class="nx">jqXHR</span> <span class="p">).</span><span class="nx">complete</span> <span class="o">=</span> <span class="nx">completeDeferred</span><span class="p">.</span><span class="nx">add</span><span class="p">;</span>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">success</span> <span class="o">=</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">fail</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-999" id="section-999">&#182;</a>
</div>
<p>Remove hash character (#7531: and string promotion)
Add protocol if not provided (#5866: IE7 issue with protocol-less urls)
Handle falsy url in the settings object (#10093: consistency with old signature)
We also use the url parameter if available</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">url</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">||</span> <span class="nx">ajaxLocation</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rhash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rprotocol</span><span class="p">,</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;//&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1000" id="section-1000">&#182;</a>
</div>
<p>Alias method option to type as per ticket #12004</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">method</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">method</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1001" id="section-1001">&#182;</a>
</div>
<p>Extract dataTypes list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataType</span> <span class="o">||</span> <span class="s2">&quot;*&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span> <span class="nx">rnotwhite</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1002" id="section-1002">&#182;</a>
</div>
<p>A cross-domain request is in order when we have a protocol:host:port mismatch</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">parts</span> <span class="o">=</span> <span class="nx">rurl</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">);</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">=</span> <span class="o">!!</span><span class="p">(</span> <span class="nx">parts</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">!==</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">!==</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">||</span>
          <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;http:&quot;</span> <span class="o">?</span> <span class="s2">&quot;80&quot;</span> <span class="o">:</span> <span class="s2">&quot;443&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">!==</span>
            <span class="p">(</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;http:&quot;</span> <span class="o">?</span> <span class="s2">&quot;80&quot;</span> <span class="o">:</span> <span class="s2">&quot;443&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
      <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1003" id="section-1003">&#182;</a>
</div>
<p>Convert data if not already a string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">processData</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">traditional</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1004" id="section-1004">&#182;</a>
</div>
<p>Apply prefilters</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">prefilters</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1005" id="section-1005">&#182;</a>
</div>
<p>If request was aborted inside a prefilter, stop there</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jqXHR</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1006" id="section-1006">&#182;</a>
</div>
<p>We can fire global events as of now if asked to
Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">fireGlobals</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">global</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1007" id="section-1007">&#182;</a>
</div>
<p>Watch for a new set of requests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">active</span><span class="o">++</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;ajaxStart&quot;</span><span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1008" id="section-1008">&#182;</a>
</div>
<p>Uppercase the type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1009" id="section-1009">&#182;</a>
</div>
<p>Determine if request has content</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="o">=</span> <span class="o">!</span><span class="nx">rnoContent</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">type</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1010" id="section-1010">&#182;</a>
</div>
<p>Save the URL in case we're toying with the If-Modified-Since
and/or If-None-Match header later on</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">cacheURL</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1011" id="section-1011">&#182;</a>
</div>
<p>More options handling for requests with no content</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1012" id="section-1012">&#182;</a>
</div>
<p>If data is available, append data to url</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cacheURL</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">+=</span> <span class="p">(</span> <span class="nx">rquery</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">cacheURL</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;&quot;</span> <span class="o">:</span> <span class="s2">&quot;?&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="9682%3A%20remove%20data%20so%20that%20it's%20not%20used%20in%20an%20eventual%20retry">
  <h1>
    <a href="#9682%3A%20remove%20data%20so%20that%20it's%20not%20used%20in%20an%20eventual%20retry" name="9682%3A%20remove%20data%20so%20that%20it's%20not%20used%20in%20an%20eventual%20retry" class="pilcrow">&#182;</a>
    9682: remove data so that it's not used in an eventual retry
  </h1>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">delete</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1014" id="section-1014">&#182;</a>
</div>
<p>Add anti-cache in url if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">cache</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">rts</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">cacheURL</span> <span class="p">)</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1015" id="section-1015">&#182;</a>
</div>
<p>If there is already a '_' parameter, set its value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">cacheURL</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rts</span><span class="p">,</span> <span class="s2">&quot;$1_=&quot;</span> <span class="o">+</span> <span class="nx">nonce</span><span class="o">++</span> <span class="p">)</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1016" id="section-1016">&#182;</a>
</div>
<p>Otherwise add one to the end</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">cacheURL</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">rquery</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">cacheURL</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;&quot;</span> <span class="o">:</span> <span class="s2">&quot;?&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_=&quot;</span> <span class="o">+</span> <span class="nx">nonce</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1017" id="section-1017">&#182;</a>
</div>
<p>Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">ifModified</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">lastModified</span><span class="p">[</span> <span class="nx">cacheURL</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="s2">&quot;If-Modified-Since&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">lastModified</span><span class="p">[</span> <span class="nx">cacheURL</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">etag</span><span class="p">[</span> <span class="nx">cacheURL</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="s2">&quot;If-None-Match&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">etag</span><span class="p">[</span> <span class="nx">cacheURL</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1018" id="section-1018">&#182;</a>
</div>
<p>Set the correct header, if data is being sent</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contentType</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">contentType</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="s2">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contentType</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1019" id="section-1019">&#182;</a>
</div>
<p>Set the Accepts header for the server, depending on the dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span>
      <span class="s2">&quot;Accept&quot;</span><span class="p">,</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">accepts</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">?</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">accepts</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">!==</span> <span class="s2">&quot;*&quot;</span> <span class="o">?</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="nx">allTypes</span> <span class="o">+</span> <span class="s2">&quot;; q=0.01&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">accepts</span><span class="p">[</span> <span class="s2">&quot;*&quot;</span> <span class="p">]</span>
    <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1020" id="section-1020">&#182;</a>
</div>
<p>Check for headers option</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">s</span><span class="p">.</span><span class="nx">headers</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1021" id="section-1021">&#182;</a>
</div>
<p>Allow custom headers/mimetypes and early abort</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">beforeSend</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">beforeSend</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1022" id="section-1022">&#182;</a>
</div>
<p>Abort if not done already and return</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1023" id="section-1023">&#182;</a>
</div>
<p>aborting is no longer a cancellation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">strAbort</span> <span class="o">=</span> <span class="s2">&quot;abort&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1024" id="section-1024">&#182;</a>
</div>
<p>Install callbacks on deferreds</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">{</span> <span class="nx">success</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">error</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">complete</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">[</span> <span class="nx">i</span> <span class="p">](</span> <span class="nx">s</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1025" id="section-1025">&#182;</a>
</div>
<p>Get transport</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">transport</span> <span class="o">=</span> <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">transports</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1026" id="section-1026">&#182;</a>
</div>
<p>If no transport, we auto-abort</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">transport</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">done</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;No Transport&quot;</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1027" id="section-1027">&#182;</a>
</div>
<p>Send global event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">globalEventContext</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxSend&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1028" id="section-1028">&#182;</a>
</div>
<p>Timeout</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">async</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">timeoutTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">abort</span><span class="p">(</span><span class="s2">&quot;timeout&quot;</span><span class="p">);</span>
        <span class="p">},</span> <span class="nx">s</span><span class="p">.</span><span class="nx">timeout</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">state</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">transport</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span> <span class="nx">requestHeaders</span><span class="p">,</span> <span class="nx">done</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1029" id="section-1029">&#182;</a>
</div>
<p>Propagate exception as error if not done</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">done</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">e</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1030" id="section-1030">&#182;</a>
</div>
<p>Simply rethrow otherwise</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">throw</span> <span class="nx">e</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1031" id="section-1031">&#182;</a>
</div>
<p>Callback for when everything is done</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">done</span><span class="p">(</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">nativeStatusText</span><span class="p">,</span> <span class="nx">responses</span><span class="p">,</span> <span class="nx">headers</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">isSuccess</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">modified</span><span class="p">,</span>
        <span class="nx">statusText</span> <span class="o">=</span> <span class="nx">nativeStatusText</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1032" id="section-1032">&#182;</a>
</div>
<p>Called once</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1033" id="section-1033">&#182;</a>
</div>
<p>State is "done" now</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">state</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1034" id="section-1034">&#182;</a>
</div>
<p>Clear timeout if it exists</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">timeoutTimer</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">timeoutTimer</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1035" id="section-1035">&#182;</a>
</div>
<p>Dereference transport for early garbage collection
(no matter how long the jqXHR object will be used)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">transport</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1036" id="section-1036">&#182;</a>
</div>
<p>Cache response headers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">responseHeadersString</span> <span class="o">=</span> <span class="nx">headers</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1037" id="section-1037">&#182;</a>
</div>
<p>Set readyState</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">=</span> <span class="nx">status</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">4</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1038" id="section-1038">&#182;</a>
</div>
<p>Determine if successful</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">isSuccess</span> <span class="o">=</span> <span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">304</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1039" id="section-1039">&#182;</a>
</div>
<p>Get response data</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">response</span> <span class="o">=</span> <span class="nx">ajaxHandleResponses</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">responses</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1040" id="section-1040">&#182;</a>
</div>
<p>Convert no matter what (that way responseXXX fields are always set)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">response</span> <span class="o">=</span> <span class="nx">ajaxConvert</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">isSuccess</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1041" id="section-1041">&#182;</a>
</div>
<p>If successful, handle type chaining</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isSuccess</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1042" id="section-1042">&#182;</a>
</div>
<p>Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">ifModified</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">modified</span> <span class="o">=</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span><span class="s2">&quot;Last-Modified&quot;</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">modified</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">lastModified</span><span class="p">[</span> <span class="nx">cacheURL</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">modified</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">modified</span> <span class="o">=</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span><span class="s2">&quot;etag&quot;</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">modified</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">etag</span><span class="p">[</span> <span class="nx">cacheURL</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">modified</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1043" id="section-1043">&#182;</a>
</div>
<p>if no content</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">204</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;HEAD&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">statusText</span> <span class="o">=</span> <span class="s2">&quot;nocontent&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1044" id="section-1044">&#182;</a>
</div>
<p>if not modified</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">304</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">statusText</span> <span class="o">=</span> <span class="s2">&quot;notmodified&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1045" id="section-1045">&#182;</a>
</div>
<p>If we have data, let's convert it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">statusText</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
          <span class="nx">success</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
          <span class="nx">error</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">;</span>
          <span class="nx">isSuccess</span> <span class="o">=</span> <span class="o">!</span><span class="nx">error</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1046" id="section-1046">&#182;</a>
</div>
<p>We extract error from statusText
then normalize statusText and status for non-aborts</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">error</span> <span class="o">=</span> <span class="nx">statusText</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">||</span> <span class="o">!</span><span class="nx">statusText</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">statusText</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">status</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1047" id="section-1047">&#182;</a>
</div>
<p>Set data for the fake xhr object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">status</span><span class="p">;</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">statusText</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">nativeStatusText</span> <span class="o">||</span> <span class="nx">statusText</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1048" id="section-1048">&#182;</a>
</div>
<p>Success/Error</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isSuccess</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="p">[</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">rejectWith</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">error</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1049" id="section-1049">&#182;</a>
</div>
<p>Status-dependent callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">(</span> <span class="nx">statusCode</span> <span class="p">);</span>
      <span class="nx">statusCode</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">globalEventContext</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">isSuccess</span> <span class="o">?</span> <span class="s2">&quot;ajaxSuccess&quot;</span> <span class="o">:</span> <span class="s2">&quot;ajaxError&quot;</span><span class="p">,</span>
          <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">isSuccess</span> <span class="o">?</span> <span class="nx">success</span> <span class="o">:</span> <span class="nx">error</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1050" id="section-1050">&#182;</a>
</div>
<p>Complete</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">completeDeferred</span><span class="p">.</span><span class="nx">fireWith</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">statusText</span> <span class="p">]</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">globalEventContext</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxComplete&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span> <span class="p">]</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1051" id="section-1051">&#182;</a>
</div>
<p>Handle the global AJAX counter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="o">--</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">active</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;ajaxStop&quot;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jqXHR</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">getJSON</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">getScript</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="s2">&quot;script&quot;</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">method</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1052" id="section-1052">&#182;</a>
</div>
<p>shift arguments if data argument was omitted</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="nx">callback</span><span class="p">;</span>
      <span class="nx">callback</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">method</span><span class="p">,</span>
      <span class="nx">dataType</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">success</span><span class="o">:</span> <span class="nx">callback</span>
    <span class="p">});</span>
  <span class="p">};</span>
<span class="p">});</span>


<span class="nx">jQuery</span><span class="p">.</span><span class="nx">_evalUrl</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
    <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;script&quot;</span><span class="p">,</span>
    <span class="nx">async</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">global</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;throws&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">});</span>
<span class="p">};</span>


<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">wrapAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1053" id="section-1053">&#182;</a>
</div>
<p>The elements to wrap the target around</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">wrap</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">html</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">clone</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">wrap</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">wrap</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">elem</span><span class="p">;</span>
      <span class="p">}).</span><span class="nx">append</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">wrapInner</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">wrapInner</span><span class="p">(</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
        <span class="nx">contents</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">contents</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">contents</span><span class="p">.</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">wrap</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">isFunction</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">isFunction</span> <span class="o">?</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">:</span> <span class="nx">html</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">unwrap</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">replaceWith</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}).</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>


<span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">hidden</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1054" id="section-1054">&#182;</a>
</div>
<p>Support: Opera &lt;= 12.12
Opera reports offsetWidths and offsetHeights less than zero on some elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetHeight</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span>
    <span class="p">(</span><span class="o">!</span><span class="nx">support</span><span class="p">.</span><span class="nx">reliableHiddenOffsets</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
      <span class="p">((</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="p">)</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">))</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">hidden</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
<span class="p">};</span>




<span class="kd">var</span> <span class="nx">r20</span> <span class="o">=</span> <span class="sr">/%20/g</span><span class="p">,</span>
  <span class="nx">rbracket</span> <span class="o">=</span> <span class="sr">/\[\]$/</span><span class="p">,</span>
  <span class="nx">rCRLF</span> <span class="o">=</span> <span class="sr">/\r?\n/g</span><span class="p">,</span>
  <span class="nx">rsubmitterTypes</span> <span class="o">=</span> <span class="sr">/^(?:submit|button|image|reset|file)$/i</span><span class="p">,</span>
  <span class="nx">rsubmittable</span> <span class="o">=</span> <span class="sr">/^(?:input|select|textarea|keygen)/i</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">name</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1055" id="section-1055">&#182;</a>
</div>
<p>Serialize array item.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">v</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">traditional</span> <span class="o">||</span> <span class="nx">rbracket</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">prefix</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1056" id="section-1056">&#182;</a>
</div>
<p>Treat each array item as a scalar.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">add</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">v</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1057" id="section-1057">&#182;</a>
</div>
<p>Item is non-scalar (array or object), encode its numeric index.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span> <span class="nx">i</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">traditional</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1058" id="section-1058">&#182;</a>
</div>
<p>Serialize object item.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">);</span>
    <span class="p">}</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1059" id="section-1059">&#182;</a>
</div>
<p>Serialize scalar item.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">add</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">obj</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1060" id="section-1060">&#182;</a>
</div>
<p>Serialize an array of form elements or a set of
key/values into a query string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">param</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">traditional</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">prefix</span><span class="p">,</span>
    <span class="nx">s</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1061" id="section-1061">&#182;</a>
</div>
<p>If value is a function, invoke it and return its value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">value</span><span class="p">()</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="nx">s</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1062" id="section-1062">&#182;</a>
</div>
<p>Set traditional to true for jQuery &lt;= 1.3.2 behavior.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">traditional</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">traditional</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">traditional</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1063" id="section-1063">&#182;</a>
</div>
<p>If an array was passed in, assume that it is an array of form elements.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1064" id="section-1064">&#182;</a>
</div>
<p>Serialize the form elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="p">);</span>
    <span class="p">});</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1065" id="section-1065">&#182;</a>
</div>
<p>If traditional, encode the "old" way (the way 1.3.2 or older
did it), otherwise encode params recursively.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">prefix</span> <span class="k">in</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">a</span><span class="p">[</span> <span class="nx">prefix</span> <span class="p">],</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1066" id="section-1066">&#182;</a>
</div>
<p>Return the resulting serialization</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;&amp;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">r20</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span> <span class="p">);</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">serialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">serializeArray</span><span class="p">()</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">serializeArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1067" id="section-1067">&#182;</a>
</div>
<p>Can add propHook for "elements" to filter or add form elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;elements&quot;</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">elements</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">elements</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1068" id="section-1068">&#182;</a>
</div>
<p>Use .is(":disabled") so that fieldset[disabled] works</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">is</span><span class="p">(</span> <span class="s2">&quot;:disabled&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="nx">rsubmittable</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rsubmitterTypes</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">checked</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rcheckableType</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">val</span><span class="p">();</span>

      <span class="k">return</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="kc">null</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="o">?</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">val</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">val</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rCRLF</span><span class="p">,</span> <span class="s2">&quot;\r\n&quot;</span> <span class="p">)</span> <span class="p">};</span>
          <span class="p">})</span> <span class="o">:</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">val</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rCRLF</span><span class="p">,</span> <span class="s2">&quot;\r\n&quot;</span> <span class="p">)</span> <span class="p">};</span>
    <span class="p">}).</span><span class="nx">get</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1069" id="section-1069">&#182;</a>
</div>
<p>Create the request object
(This is still attached to ajaxSettings for backward compatibility)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">xhr</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1070" id="section-1070">&#182;</a>
</div>
<p>Support: IE6+</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1071" id="section-1071">&#182;</a>
</div>
<p>XHR cannot access local files, always use ActiveX for that case</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isLocal</span> <span class="o">&amp;&amp;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1072" id="section-1072">&#182;</a>
</div>
<p>Support: IE7-8
oldIE XHR does not support non-RFC2616 methods (#13240)
See <a href='http://msdn.microsoft.com/en-us/library/ie/ms536648(v=vs.85).aspx'>http://msdn.microsoft.com/en-us/library/ie/ms536648(v=vs.85).aspx</a>
and <a href='http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9'>http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9</a>
Although this check for six methods instead of eight
since IE also does not support "trace" and "connect"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="sr">/^(get|post|head|put|delete|options)$/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>

      <span class="nx">createStandardXHR</span><span class="p">()</span> <span class="o">||</span> <span class="nx">createActiveXHR</span><span class="p">();</span>
  <span class="p">}</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1073" id="section-1073">&#182;</a>
</div>
<p>For all other browsers, use the standard XMLHttpRequest object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">createStandardXHR</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">xhrId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">xhrCallbacks</span> <span class="o">=</span> <span class="p">{},</span>
  <span class="nx">xhrSupported</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">xhr</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1074" id="section-1074">&#182;</a>
</div>
<p>Support: IE&lt;10
Open requests must be manually aborted on unload (#5280)
See <a href='https://support.microsoft.com/kb/2856746'>https://support.microsoft.com/kb/2856746</a> for more info</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onunload&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">xhrCallbacks</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">xhrCallbacks</span><span class="p">[</span> <span class="nx">key</span> <span class="p">](</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1075" id="section-1075">&#182;</a>
</div>
<p>Determine support properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">support</span><span class="p">.</span><span class="nx">cors</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">xhrSupported</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="s2">&quot;withCredentials&quot;</span> <span class="k">in</span> <span class="nx">xhrSupported</span> <span class="p">);</span>
<span class="nx">xhrSupported</span> <span class="o">=</span> <span class="nx">support</span><span class="p">.</span><span class="nx">ajax</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">xhrSupported</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1076" id="section-1076">&#182;</a>
</div>
<p>Create transport if the browser can provide an xhr</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="nx">xhrSupported</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxTransport</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1077" id="section-1077">&#182;</a>
</div>
<p>Cross domain only allowed if supported through XMLHttpRequest</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">||</span> <span class="nx">support</span><span class="p">.</span><span class="nx">cors</span> <span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">callback</span><span class="p">;</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">send</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">headers</span><span class="p">,</span> <span class="nx">complete</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
            <span class="nx">xhr</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">xhr</span><span class="p">(),</span>
            <span class="nx">id</span> <span class="o">=</span> <span class="o">++</span><span class="nx">xhrId</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1078" id="section-1078">&#182;</a>
</div>
<p>Open the socket</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">async</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">password</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1079" id="section-1079">&#182;</a>
</div>
<p>Apply custom fields if provided</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">xhrFields</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">options</span><span class="p">.</span><span class="nx">xhrFields</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">xhr</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">xhrFields</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
            <span class="p">}</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1080" id="section-1080">&#182;</a>
</div>
<p>Override mime type if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">mimeType</span> <span class="o">&amp;&amp;</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">overrideMimeType</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">xhr</span><span class="p">.</span><span class="nx">overrideMimeType</span><span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">mimeType</span> <span class="p">);</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1081" id="section-1081">&#182;</a>
</div>
<p>X-Requested-With header
For cross-domain requests, seeing as conditions for a preflight are
akin to a jigsaw puzzle, we simply never set it to be sure.
(it can always be set on a per-request basis or even using ajaxSetup)
For same-domain requests, won't change header if already provided.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;X-Requested-With&quot;</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;X-Requested-With&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XMLHttpRequest&quot;</span><span class="p">;</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1082" id="section-1082">&#182;</a>
</div>
<p>Set headers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">headers</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1083" id="section-1083">&#182;</a>
</div>
<p>Support: IE&lt;9
IE's ActiveXObject throws a 'Type Mismatch' exception when setting
request header to a null-value.</p>

<p>To keep consistent with other XHR implementations, cast the value
to string and ignore <code>undefined</code>.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">headers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">headers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1084" id="section-1084">&#182;</a>
</div>
<p>Do send the request
This may raise an exception which is actually
handled in jQuery.ajax (so no try/catch here)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">hasContent</span> <span class="o">&amp;&amp;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="o">||</span> <span class="kc">null</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1085" id="section-1085">&#182;</a>
</div>
<p>Listener</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">callback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">responses</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1086" id="section-1086">&#182;</a>
</div>
<p>Was never called and is aborted or complete</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">isAbort</span> <span class="o">||</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1087" id="section-1087">&#182;</a>
</div>
<p>Clean up</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">delete</span> <span class="nx">xhrCallbacks</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>
              <span class="nx">callback</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
              <span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1088" id="section-1088">&#182;</a>
</div>
<p>Abort manually if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">!==</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">xhr</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
                <span class="p">}</span>
              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">responses</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="nx">status</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1089" id="section-1089">&#182;</a>
</div>
<p>Support: IE&lt;10
Accessing binary-data responseText throws an exception
(#11426)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">responses</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>
                <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1090" id="section-1090">&#182;</a>
</div>
<p>Firefox throws an exception when accessing
statusText for faulty cross-domain requests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">try</span> <span class="p">{</span>
                  <span class="nx">statusText</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">statusText</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1091" id="section-1091">&#182;</a>
</div>
<p>We normalize with Webkit giving an empty statusText</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                  <span class="nx">statusText</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
                <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1092" id="section-1092">&#182;</a>
</div>
<p>Filter status for non standard behaviors</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1093" id="section-1093">&#182;</a>
</div>
<p>If the request is local and we have data: assume a success
(success with no data won't get notified, that's the best we
can do given current implementations)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">status</span> <span class="o">&amp;&amp;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">isLocal</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">status</span> <span class="o">=</span> <span class="nx">responses</span><span class="p">.</span><span class="nx">text</span> <span class="o">?</span> <span class="mi">200</span> <span class="o">:</span> <span class="mi">404</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1094" id="section-1094">&#182;</a>
</div>
<p>IE - #1450: sometimes returns 1223 when it should be 204</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">1223</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">status</span> <span class="o">=</span> <span class="mi">204</span><span class="p">;</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1095" id="section-1095">&#182;</a>
</div>
<p>Call complete if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">complete</span><span class="p">(</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">responses</span><span class="p">,</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">getAllResponseHeaders</span><span class="p">()</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">};</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">async</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1096" id="section-1096">&#182;</a>
</div>
<p>if we're in sync mode we fire the callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">callback</span><span class="p">();</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1097" id="section-1097">&#182;</a>
</div>
<p>(IE6 &amp; IE7) if it's in cache and has been
retrieved directly we need to fire the callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1098" id="section-1098">&#182;</a>
</div>
<p>Add to the list of active xhr callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="nx">xhrCallbacks</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">abort</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">(</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1099" id="section-1099">&#182;</a>
</div>
<p>Functions to create xhrs</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">createStandardXHR</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">createActiveXHR</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span><span class="p">(</span> <span class="s2">&quot;Microsoft.XMLHTTP&quot;</span> <span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>





</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1100" id="section-1100">&#182;</a>
</div>
<p>Install script dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">({</span>
  <span class="nx">accepts</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">script</span><span class="o">:</span> <span class="s2">&quot;text/javascript, application/javascript, application/ecmascript, application/x-ecmascript&quot;</span>
  <span class="p">},</span>
  <span class="nx">contents</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">script</span><span class="o">:</span> <span class="sr">/(?:java|ecma)script/</span>
  <span class="p">},</span>
  <span class="nx">converters</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;text script&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">globalEval</span><span class="p">(</span> <span class="nx">text</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">text</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1101" id="section-1101">&#182;</a>
</div>
<p>Handle cache's special case and global</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxPrefilter</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">s</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">cache</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">;</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1102" id="section-1102">&#182;</a>
</div>
<p>Bind script tag hack transport</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxTransport</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1103" id="section-1103">&#182;</a>
</div>
<p>This transport only deals with cross domain requests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">script</span><span class="p">,</span>
      <span class="nx">head</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">head</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">(</span><span class="s2">&quot;head&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nx">send</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;script&quot;</span><span class="p">);</span>

        <span class="nx">script</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">scriptCharset</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">script</span><span class="p">.</span><span class="nx">charset</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">scriptCharset</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1104" id="section-1104">&#182;</a>
</div>
<p>Attach handlers for all browsers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">isAbort</span> <span class="o">||</span> <span class="o">!</span><span class="nx">script</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">||</span> <span class="sr">/loaded|complete/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">script</span><span class="p">.</span><span class="nx">readyState</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1105" id="section-1105">&#182;</a>
</div>
<p>Handle memory leak in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1106" id="section-1106">&#182;</a>
</div>
<p>Remove the script</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">script</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">script</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">script</span> <span class="p">);</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1107" id="section-1107">&#182;</a>
</div>
<p>Dereference the script</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">script</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1108" id="section-1108">&#182;</a>
</div>
<p>Callback if not abort</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">callback</span><span class="p">(</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;success&quot;</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1109" id="section-1109">&#182;</a>
</div>
<p>Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending
Use native DOM manipulation to avoid our domManip AJAX trickery</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">head</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">script</span><span class="p">,</span> <span class="nx">head</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">},</span>

      <span class="nx">abort</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">script</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span><span class="p">(</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">});</span>




<span class="kd">var</span> <span class="nx">oldCallbacks</span> <span class="o">=</span> <span class="p">[],</span>
  <span class="nx">rjsonp</span> <span class="o">=</span> <span class="sr">/(=)\?(?=&amp;|$)|\?\?/</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1110" id="section-1110">&#182;</a>
</div>
<p>Default jsonp settings</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">({</span>
  <span class="nx">jsonp</span><span class="o">:</span> <span class="s2">&quot;callback&quot;</span><span class="p">,</span>
  <span class="nx">jsonpCallback</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">callback</span> <span class="o">=</span> <span class="nx">oldCallbacks</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">nonce</span><span class="o">++</span> <span class="p">)</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">[</span> <span class="nx">callback</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">callback</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1111" id="section-1111">&#182;</a>
</div>
<p>Detect, normalize options and install callbacks for jsonp requests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxPrefilter</span><span class="p">(</span> <span class="s2">&quot;json jsonp&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">originalSettings</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">callbackName</span><span class="p">,</span> <span class="nx">overwritten</span><span class="p">,</span> <span class="nx">responseContainer</span><span class="p">,</span>
    <span class="nx">jsonProp</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonp</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">rjsonp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">?</span>
      <span class="s2">&quot;url&quot;</span> <span class="o">:</span>
      <span class="k">typeof</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contentType</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">rjsonp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;data&quot;</span>
    <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1112" id="section-1112">&#182;</a>
</div>
<p>Handle iff the expected data type is "jsonp" or we have a parameter to set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jsonProp</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;jsonp&quot;</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1113" id="section-1113">&#182;</a>
</div>
<p>Get callback name, remembering preexisting value associated with it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">callbackName</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span> <span class="p">)</span> <span class="o">?</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span><span class="p">()</span> <span class="o">:</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1114" id="section-1114">&#182;</a>
</div>
<p>Insert callback into url or form data</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jsonProp</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">[</span> <span class="nx">jsonProp</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">[</span> <span class="nx">jsonProp</span> <span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rjsonp</span><span class="p">,</span> <span class="s2">&quot;$1&quot;</span> <span class="o">+</span> <span class="nx">callbackName</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonp</span> <span class="o">!==</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">+=</span> <span class="p">(</span> <span class="nx">rquery</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;&quot;</span> <span class="o">:</span> <span class="s2">&quot;?&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonp</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nx">callbackName</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1115" id="section-1115">&#182;</a>
</div>
<p>Use data converter to retrieve json after script execution</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span><span class="p">[</span><span class="s2">&quot;script json&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">responseContainer</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">callbackName</span> <span class="o">+</span> <span class="s2">&quot; was not called&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">responseContainer</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1116" id="section-1116">&#182;</a>
</div>
<p>force json dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1117" id="section-1117">&#182;</a>
</div>
<p>Install callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">overwritten</span> <span class="o">=</span> <span class="nb">window</span><span class="p">[</span> <span class="nx">callbackName</span> <span class="p">];</span>
    <span class="nb">window</span><span class="p">[</span> <span class="nx">callbackName</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">responseContainer</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1118" id="section-1118">&#182;</a>
</div>
<p>Clean-up function (fires after converters)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1119" id="section-1119">&#182;</a>
</div>
<p>Restore preexisting value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">window</span><span class="p">[</span> <span class="nx">callbackName</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">overwritten</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1120" id="section-1120">&#182;</a>
</div>
<p>Save back as free</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">[</span> <span class="nx">callbackName</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1121" id="section-1121">&#182;</a>
</div>
<p>make sure that re-using the options doesn't screw things around</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span> <span class="o">=</span> <span class="nx">originalSettings</span><span class="p">.</span><span class="nx">jsonpCallback</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1122" id="section-1122">&#182;</a>
</div>
<p>save the callback name for future use</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">oldCallbacks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">callbackName</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1123" id="section-1123">&#182;</a>
</div>
<p>Call if it was a function and we have a response</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">responseContainer</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">overwritten</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">overwritten</span><span class="p">(</span> <span class="nx">responseContainer</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">responseContainer</span> <span class="o">=</span> <span class="nx">overwritten</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1124" id="section-1124">&#182;</a>
</div>
<p>Delegate to script</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="s2">&quot;script&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>





</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1125" id="section-1125">&#182;</a>
</div>
<p>data: string of html
context (optional): If specified, the fragment will be created in this context, defaults to document
keepScripts (optional): If true, will include scripts passed in the html string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseHTML</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">keepScripts</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">data</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">data</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">keepScripts</span> <span class="o">=</span> <span class="nx">context</span><span class="p">;</span>
    <span class="nx">context</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">rsingleTag</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">data</span> <span class="p">),</span>
    <span class="nx">scripts</span> <span class="o">=</span> <span class="o">!</span><span class="nx">keepScripts</span> <span class="o">&amp;&amp;</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1126" id="section-1126">&#182;</a>
</div>
<p>Single tag</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">parsed</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">parsed</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">];</span>
  <span class="p">}</span>

  <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">buildFragment</span><span class="p">(</span> <span class="p">[</span> <span class="nx">data</span> <span class="p">],</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">scripts</span> <span class="o">&amp;&amp;</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">scripts</span> <span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="p">[],</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
<span class="p">};</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1127" id="section-1127">&#182;</a>
</div>
<p>Keep a copy of the old load method</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">_load</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">load</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1128" id="section-1128">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Load a url into a page</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">url</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">_load</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">_load</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span>
    <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
    <span class="nx">off</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">off</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">selector</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">off</span><span class="p">,</span> <span class="nx">url</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">);</span>
    <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">off</span> <span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1129" id="section-1129">&#182;</a>
</div>
<p>If it's a function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">params</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1130" id="section-1130">&#182;</a>
</div>
<p>We assume that it's the callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">callback</span> <span class="o">=</span> <span class="nx">params</span><span class="p">;</span>
    <span class="nx">params</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1131" id="section-1131">&#182;</a>
</div>
<p>Otherwise, build a param string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">params</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">params</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;POST&quot;</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1132" id="section-1132">&#182;</a>
</div>
<p>If we have elements to modify, make the request</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">self</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1133" id="section-1133">&#182;</a>
</div>
<p>if "type" variable is undefined, then "GET" method will be used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span>
      <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;html&quot;</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">params</span>
    <span class="p">}).</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">responseText</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1134" id="section-1134">&#182;</a>
</div>
<p>Save response for use in complete callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">response</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>

      <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">selector</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1135" id="section-1135">&#182;</a>
</div>
<p>If a selector was specified, locate the right elements in a dummy div
Exclude scripts to avoid IE 'Permission Denied' errors</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">jQuery</span><span class="p">(</span><span class="s2">&quot;&lt;div&gt;&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseHTML</span><span class="p">(</span> <span class="nx">responseText</span> <span class="p">)</span> <span class="p">).</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1136" id="section-1136">&#182;</a>
</div>
<p>Otherwise use the full result</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">responseText</span> <span class="p">);</span>

    <span class="p">}).</span><span class="nx">complete</span><span class="p">(</span> <span class="nx">callback</span> <span class="o">&amp;&amp;</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">status</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">response</span> <span class="o">||</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">responseText</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>





</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1137" id="section-1137">&#182;</a>
</div>
<p>Attach a bunch of functions for handling common AJAX events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span> <span class="s2">&quot;ajaxStart&quot;</span><span class="p">,</span> <span class="s2">&quot;ajaxStop&quot;</span><span class="p">,</span> <span class="s2">&quot;ajaxComplete&quot;</span><span class="p">,</span> <span class="s2">&quot;ajaxError&quot;</span><span class="p">,</span> <span class="s2">&quot;ajaxSuccess&quot;</span><span class="p">,</span> <span class="s2">&quot;ajaxSend&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>




<span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">animated</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>
  <span class="p">}).</span><span class="nx">length</span><span class="p">;</span>
<span class="p">};</span>





<span class="kd">var</span> <span class="nx">docElem</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1138" id="section-1138">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Gets a window from an element</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">getWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">?</span>
    <span class="nx">elem</span> <span class="o">:</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">?</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentWindow</span> <span class="o">:</span>
      <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">setOffset</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">curPosition</span><span class="p">,</span> <span class="nx">curLeft</span><span class="p">,</span> <span class="nx">curCSSTop</span><span class="p">,</span> <span class="nx">curTop</span><span class="p">,</span> <span class="nx">curOffset</span><span class="p">,</span> <span class="nx">curCSSLeft</span><span class="p">,</span> <span class="nx">calculatePosition</span><span class="p">,</span>
      <span class="nx">position</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;position&quot;</span> <span class="p">),</span>
      <span class="nx">curElem</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span>
      <span class="nx">props</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1139" id="section-1139">&#182;</a>
</div>
<p>set position first, in-case top/left are set even on static elem</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;static&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="s2">&quot;relative&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">curOffset</span> <span class="o">=</span> <span class="nx">curElem</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>
    <span class="nx">curCSSTop</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;top&quot;</span> <span class="p">);</span>
    <span class="nx">curCSSLeft</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span> <span class="p">);</span>
    <span class="nx">calculatePosition</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;absolute&quot;</span> <span class="o">||</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">curCSSTop</span><span class="p">,</span> <span class="nx">curCSSLeft</span> <span class="p">]</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1140" id="section-1140">&#182;</a>
</div>
<p>need to be able to calculate position if either top or left is auto and position is either absolute or fixed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">calculatePosition</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">curPosition</span> <span class="o">=</span> <span class="nx">curElem</span><span class="p">.</span><span class="nx">position</span><span class="p">();</span>
      <span class="nx">curTop</span> <span class="o">=</span> <span class="nx">curPosition</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span>
      <span class="nx">curLeft</span> <span class="o">=</span> <span class="nx">curPosition</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">curTop</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">curCSSTop</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">curLeft</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">curCSSLeft</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">curOffset</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">top</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">props</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">curOffset</span><span class="p">.</span><span class="nx">top</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">curTop</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">left</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">props</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">curOffset</span><span class="p">.</span><span class="nx">left</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">curLeft</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;using&quot;</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">using</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">curElem</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">props</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">offset</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">options</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span>
        <span class="k">this</span> <span class="o">:</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">setOffset</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">i</span> <span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">docElem</span><span class="p">,</span> <span class="nx">win</span><span class="p">,</span>
      <span class="nx">box</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span>
      <span class="nx">doc</span> <span class="o">=</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">doc</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">docElem</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1141" id="section-1141">&#182;</a>
</div>
<p>Make sure it's not a disconnected DOM node</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">docElem</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">box</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1142" id="section-1142">&#182;</a>
</div>
<p>If we don't have gBCR, just use 0,0 rather than error
BlackBerry 5, iOS 3 (original iPhone)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getBoundingClientRect</span> <span class="o">!==</span> <span class="nx">strundefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">box</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">win</span> <span class="o">=</span> <span class="nx">getWindow</span><span class="p">(</span> <span class="nx">doc</span> <span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">top</span><span class="o">:</span> <span class="nx">box</span><span class="p">.</span><span class="nx">top</span>  <span class="o">+</span> <span class="p">(</span> <span class="nx">win</span><span class="p">.</span><span class="nx">pageYOffset</span> <span class="o">||</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="p">)</span>  <span class="o">-</span> <span class="p">(</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="mi">0</span> <span class="p">),</span>
      <span class="nx">left</span><span class="o">:</span> <span class="nx">box</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">win</span><span class="p">.</span><span class="nx">pageXOffset</span> <span class="o">||</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="p">)</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span>
    <span class="p">};</span>
  <span class="p">},</span>

  <span class="nx">position</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">offsetParent</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span>
      <span class="nx">parentOffset</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1143" id="section-1143">&#182;</a>
</div>
<p>fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;position&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1144" id="section-1144">&#182;</a>
</div>
<p>we assume that getBoundingClientRect is available when computed position is fixed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">offset</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1145" id="section-1145">&#182;</a>
</div>
<p>Get <em>real</em> offsetParent</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">offsetParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1146" id="section-1146">&#182;</a>
</div>
<p>Get correct offsets</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">offset</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">offsetParent</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span> <span class="s2">&quot;html&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">parentOffset</span> <span class="o">=</span> <span class="nx">offsetParent</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1147" id="section-1147">&#182;</a>
</div>
<p>Add offsetParent borders</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">top</span>  <span class="o">+=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">offsetParent</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span> <span class="s2">&quot;borderTopWidth&quot;</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">left</span> <span class="o">+=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">offsetParent</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span> <span class="s2">&quot;borderLeftWidth&quot;</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1148" id="section-1148">&#182;</a>
</div>
<p>Subtract parent offsets and element margins
note: when an element has margin: auto the offsetLeft and marginLeft
are the same in Safari causing offset.left to incorrectly be 0</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">top</span><span class="o">:</span>  <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span>  <span class="o">-</span> <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;marginTop&quot;</span><span class="p">,</span> <span class="kc">true</span> <span class="p">),</span>
      <span class="nx">left</span><span class="o">:</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;marginLeft&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">};</span>
  <span class="p">},</span>

  <span class="nx">offsetParent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">offsetParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">offsetParent</span> <span class="o">||</span> <span class="nx">docElem</span><span class="p">;</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">offsetParent</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">offsetParent</span><span class="p">,</span> <span class="s2">&quot;html&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">offsetParent</span><span class="p">,</span> <span class="s2">&quot;position&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;static&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">offsetParent</span> <span class="o">=</span> <span class="nx">offsetParent</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">offsetParent</span> <span class="o">||</span> <span class="nx">docElem</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1149" id="section-1149">&#182;</a>
</div>
<p>Create scrollLeft and scrollTop methods</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">{</span> <span class="nx">scrollLeft</span><span class="o">:</span> <span class="s2">&quot;pageXOffset&quot;</span><span class="p">,</span> <span class="nx">scrollTop</span><span class="o">:</span> <span class="s2">&quot;pageYOffset&quot;</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">method</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">top</span> <span class="o">=</span> <span class="sr">/Y/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">prop</span> <span class="p">);</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">method</span><span class="p">,</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="nx">getWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">win</span> <span class="o">?</span> <span class="p">(</span><span class="nx">prop</span> <span class="k">in</span> <span class="nx">win</span><span class="p">)</span> <span class="o">?</span> <span class="nx">win</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">:</span>
          <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">:</span>
          <span class="nx">elem</span><span class="p">[</span> <span class="nx">method</span> <span class="p">];</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">win</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">win</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span>
          <span class="o">!</span><span class="nx">top</span> <span class="o">?</span> <span class="nx">val</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">win</span> <span class="p">).</span><span class="nx">scrollLeft</span><span class="p">(),</span>
          <span class="nx">top</span> <span class="o">?</span> <span class="nx">val</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">win</span> <span class="p">).</span><span class="nx">scrollTop</span><span class="p">()</span>
        <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="nx">method</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="kc">null</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1150" id="section-1150">&#182;</a>
</div>
<p>Add the top/left cssHooks using jQuery.fn.position
Webkit bug: <a href='https://bugs.webkit.org/show_bug.cgi?id=29084'>https://bugs.webkit.org/show_bug.cgi?id=29084</a>
getComputedStyle returns percent when specified for top/left/bottom/right
rather than make the css module depend on the offset module, we just check for it here</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">addGetHookIf</span><span class="p">(</span> <span class="nx">support</span><span class="p">.</span><span class="nx">pixelPosition</span><span class="p">,</span>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">computed</span> <span class="o">=</span> <span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1151" id="section-1151">&#182;</a>
</div>
<p>if curCSS returns percentage, fallback to offset</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span> <span class="nx">rnumnonpx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="o">?</span>
          <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">position</span><span class="p">()[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span> <span class="o">:</span>
          <span class="nx">computed</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">);</span>
<span class="p">});</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1152" id="section-1152">&#182;</a>
</div>
<p>Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">{</span> <span class="nx">Height</span><span class="o">:</span> <span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">Width</span><span class="o">:</span> <span class="s2">&quot;width&quot;</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">{</span> <span class="nx">padding</span><span class="o">:</span> <span class="s2">&quot;inner&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">content</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="o">:</span> <span class="s2">&quot;outer&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">defaultExtra</span><span class="p">,</span> <span class="nx">funcName</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1153" id="section-1153">&#182;</a>
</div>
<p>margin is only for outerHeight, outerWidth</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">funcName</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">margin</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">chainable</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">defaultExtra</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">margin</span> <span class="o">!==</span> <span class="s2">&quot;boolean&quot;</span> <span class="p">),</span>
        <span class="nx">extra</span> <span class="o">=</span> <span class="nx">defaultExtra</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">margin</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">?</span> <span class="s2">&quot;margin&quot;</span> <span class="o">:</span> <span class="s2">&quot;border&quot;</span> <span class="p">);</span>

      <span class="k">return</span> <span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">doc</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1154" id="section-1154">&#182;</a>
</div>
<p>As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
isn't a whole lot we can do. See pull request at this URL for discussion:
<a href='https://github.com/jquery/jquery/pull/764'>https://github.com/jquery/jquery/pull/764</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span> <span class="s2">&quot;client&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">];</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1155" id="section-1155">&#182;</a>
</div>
<p>Get document width or height</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">doc</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1156" id="section-1156">&#182;</a>
</div>
<p>Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest
unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span> <span class="s2">&quot;scroll&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">],</span> <span class="nx">doc</span><span class="p">[</span> <span class="s2">&quot;scroll&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">],</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span> <span class="s2">&quot;offset&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">],</span> <span class="nx">doc</span><span class="p">[</span> <span class="s2">&quot;offset&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">],</span>
            <span class="nx">doc</span><span class="p">[</span> <span class="s2">&quot;client&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">]</span>
          <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1157" id="section-1157">&#182;</a>
</div>
<p>Get width or height on the element, requesting but not forcing parseFloat</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1158" id="section-1158">&#182;</a>
</div>
<p>Set width or height on the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">);</span>
      <span class="p">},</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">chainable</span> <span class="o">?</span> <span class="nx">margin</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">chainable</span><span class="p">,</span> <span class="kc">null</span> <span class="p">);</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">});</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1159" id="section-1159">&#182;</a>
</div>
<p>The number of elements contained in the matched element set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">andSelf</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">addBack</span><span class="p">;</span>





</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1160" id="section-1160">&#182;</a>
</div>
<p>Register as a named AMD module, since jQuery can be concatenated with other
files that may use define, but not via a proper concatenation script that
understands anonymous AMD modules. A named AMD is safest and most robust
way to register. Lowercase jquery is used because AMD module names are
derived from file names, and jQuery is normally delivered in a lowercase
file name. Do this after creating the global so that if an AMD module wants
to call noConflict to hide this version of jQuery, it will work.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1161" id="section-1161">&#182;</a>
</div>
<p>Note that for maximum portability, libraries that are not jQuery should
declare themselves as anonymous modules, and avoid setting a global if an
AMD loader is present. jQuery is a special case. For more information, see
<a href='https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon'>https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">define</span><span class="p">(</span> <span class="s2">&quot;jquery&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>




<span class="kd">var</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1162" id="section-1162">&#182;</a>
</div>
<p>Map over jQuery in case of overwrite</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_jQuery</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1163" id="section-1163">&#182;</a>
</div>
<p>Map over the $ in case of overwrite</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_$</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">$</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">noConflict</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">deep</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">===</span> <span class="nx">jQuery</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nx">_$</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">deep</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">===</span> <span class="nx">jQuery</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="nx">_jQuery</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1164" id="section-1164">&#182;</a>
</div>
<p>Expose jQuery and $ identifiers, even in
AMD (#7102#comment:10, <a href='https://github.com/jquery/jquery/pull/557'>https://github.com/jquery/jquery/pull/557</a>)
and CommonJS for browser emulators (#13566)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">noGlobal</span> <span class="o">===</span> <span class="nx">strundefined</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">;</span>
<span class="p">}</span>




<span class="k">return</span> <span class="nx">jQuery</span><span class="p">;</span>

<span class="p">}));</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
